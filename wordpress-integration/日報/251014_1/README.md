# 地価情報ページ - WordPress自動投稿

## 📁 ファイル構成

```
wordpress-integration/日報/251014_1/
├── sample-pages/          # HTMLサンプルページ
│   ├── 01_tokyo.html      # 東京都ページ
│   ├── 02_chiyoda.html    # 千代田区ページ
│   ├── 03_chuo.html       # 中央区ページ
│   └── README.md          # HTMLテンプレートの説明
├── create_land_price_posts.py  # WordPress自動投稿スクリプト
├── ページ構成設計.md      # SEO最適化されたページ設計書
├── 日報_251014.md         # 本日の作業記録
└── README.md              # このファイル
```

---

## 🎯 概要

tochidai.infoのような地価情報サイトをWordPressで構築するためのサンプルページ（3ページ）とWordPress自動投稿スクリプトです。

### 作成したページ
1. **東京都ページ**（都道府県ページ）
2. **千代田区ページ**（市区町村ページ）
3. **中央区ページ**（市区町村ページ）

### 特徴
- ✅ **SEO最適化済み** - タイトル、メタ、構造化データ（JSON-LD）完備
- ✅ **API不要** - 静的HTMLとして表示、ページ読み込み時にAPI呼び出しなし
- ✅ **WordPress REST API連携** - Pythonスクリプトで自動投稿
- ✅ **レスポンシブ対応** - スマホ・タブレット・PCで最適表示
- ✅ **内部リンク完備** - 都道府県 ↔ 市区町村の相互リンク

---

## 🚀 クイックスタート

### 前提条件
- Python 3.x
- `requests`, `python-dotenv` パッケージ
- WordPressの Application Password（既に設定済み）

### 実行手順

#### 1. ディレクトリに移動
```bash
cd wordpress-integration/日報/251014_1
```

#### 2. スクリプト実行
```bash
python create_land_price_posts.py
```

#### 3. 結果確認
スクリプトが3つの投稿を「下書き」として作成します：
- 東京都の地価ページ
- 千代田区の地価ページ
- 中央区の地価ページ

---

## ⚠️ 重要な注意事項

### 海外IPアクセス制限について

**GitHub Codespaces（海外IP）から実行すると失敗します**

**理由：**
- XServerが海外IPからのPOST/PUT/DELETE操作をブロックしている
- Application Password認証があっても、サーバー側のファイアウォールでブロックされる

**対策：**
1. **ローカル環境（日本IP）で実行**（推奨）
2. VPN経由で日本IPから実行

---

## 📝 ローカル環境での実行方法

### ステップ1: リポジトリをクローン
```bash
git clone <repository-url>
cd real-estate-app/wordpress-integration
```

### ステップ2: 必要なパッケージをインストール
```bash
pip install requests python-dotenv
```

### ステップ3: .env ファイルの設定
`wordpress-integration/.env` ファイルが存在することを確認：
```bash
cat .env
```

内容例：
```
WP_SITE_URL=https://ooya.tech/media
WP_USERNAME=あなたのユーザー名
WP_APP_PASSWORD=xxxx xxxx xxxx xxxx xxxx xxxx
```

### ステップ4: スクリプト実行
```bash
cd 日報/251014_1
python create_land_price_posts.py
```

### ステップ5: 結果確認
```
==============================================================
地価情報ページ WordPress自動投稿スクリプト
==============================================================

WordPressに接続中...
サイトURL: https://ooya.tech/media

✅ WordPress接続成功

==============================================================
1. 東京都ページを投稿中...
==============================================================
✅ 投稿成功!
   投稿ID: 1234
   タイトル: 東京都の地価・公示地価【2025年最新】平均相場・推移グラフ・ランキング
   URL: https://ooya.tech/media/?p=1234
   ステータス: draft

... (以下同様)
```

---

## 🔧 WordPress管理画面での確認・公開手順

### ステップ1: WordPress管理画面にログイン
```
https://ooya.tech/media/wp-admin/
```

### ステップ2: 投稿一覧を確認
1. **投稿** → **投稿一覧** をクリック
2. 3つの新しい「下書き」投稿が表示されるはず：
   - 東京都の地価・公示地価【2025年最新】...
   - 千代田区の地価・公示地価【2025年最新】...
   - 中央区の地価・公示地価【2025年最新】...

### ステップ3: パーマリンク（URL）を設定
各投稿を編集して、パーマリンクを設定：

#### 東京都ページ
- 投稿を編集
- 右側の「パーマリンク」セクションで「URLスラッグ」を編集
- `land-price/tokyo` と入力
- 保存

#### 千代田区ページ
- URLスラッグ: `land-price/tokyo/chiyoda`

#### 中央区ページ
- URLスラッグ: `land-price/tokyo/chuo`

### ステップ4: カテゴリーを設定（オプション）
1. 「地価情報」カテゴリーを作成（まだない場合）
2. 各投稿にカテゴリーを割り当て

### ステップ5: プレビュー＆公開
1. **プレビュー**ボタンをクリックして表示を確認
2. 問題なければ**公開**ボタンをクリック

---

## 📊 投稿されるデータ

### 東京都ページ

**タイトル:**
```
東京都の地価・公示地価【2025年最新】平均相場・推移グラフ・ランキング
```

**抜粋（メタディスクリプション）:**
```
東京都の地価・公示地価の最新データ（2025年）。平均地価130.2万円/㎡、前年比+7.7%。
市区町村ランキング、地価推移グラフ、坪単価相場を掲載。不動産投資の判断材料に。
```

**コンテンツ:**
- パンくずリスト
- サマリーカード（4つの重要指標）
- 市区町村ランキングTOP10
- 地価推移グラフ（説明）
- エリア分析
- 全市区町村一覧
- FAQ（よくある質問）
- CTA（シミュレーターへの誘導）
- 構造化データ（JSON-LD）

---

## 🎨 カスタマイズ方法

### データの変更
`sample-pages/*.html` ファイルを編集して、データ部分を変更：

```html
<!-- 平均地価を変更 -->
<p style="...">130.2万円/㎡</p>

<!-- ランキングデータを変更 -->
<tr>
  <td>1位</td>
  <td><a href="...">中央区</a></td>
  <td>6,530,000円</td>
  ...
</tr>
```

### スタイルの変更
インラインスタイルを直接編集：

```html
<!-- 背景色を変更 -->
<div style="background: #f8f9fa; ...">

<!-- 文字色を変更 -->
<p style="color: #0066cc; ...">
```

### 再投稿
ファイルを編集した後、スクリプトを再実行：
```bash
python create_land_price_posts.py
```

---

## 🚀 1,900ページへの展開

### 現状
- ✅ サンプル3ページ作成完了
- ✅ WordPress自動投稿スクリプト完成

### 次のステップ

#### フェーズ1: 都道府県47ページ
1. 不動産情報ライブラリAPIで全国データ取得
2. 47都道府県分のHTMLを自動生成
3. WordPressに自動投稿

#### フェーズ2: 主要100都市
1. 東京23区、政令指定都市、県庁所在地のデータ取得
2. 100都市分のHTMLを自動生成
3. WordPressに自動投稿

#### フェーズ3: 全国1,900市区町村
1. 全国の市区町村データを取得
2. 1,900ページのHTMLを自動生成
3. バッチ処理で段階的に投稿（1日100件ずつ）

---

## 📈 期待できるSEO効果

### 検索キーワード

#### 都道府県ページ
- `東京都 地価`
- `東京都 公示地価 2025`
- `東京都 土地価格 推移`

#### 市区町村ページ
- `千代田区 地価`
- `千代田区 公示地価`
- `千代田区 土地価格 相場`
- `千代田区 坪単価`

### ロングテール戦略
- `千代田区 丸の内 地価`
- `千代田区 駅別 地価ランキング`
- `千代田区 地価 上昇率`

---

## 🛠️ トラブルシューティング

### エラー: "HTTPエラー: 401"
**原因:** Application Passwordが間違っている

**対策:**
1. `.env` ファイルの `WP_APP_PASSWORD` を確認
2. WordPressで新しいApplication Passwordを再生成

### エラー: "接続失敗"
**原因:** 海外IPからのアクセス、または認証情報が間違っている

**対策:**
1. ローカル環境（日本IP）で実行
2. `.env` ファイルの設定を確認

### 投稿は成功したが、ページが表示されない
**原因:** パーマリンクが正しく設定されていない

**対策:**
1. WordPress管理画面で投稿を編集
2. パーマリンク（URLスラッグ）を設定
3. 保存して再確認

---

## 📄 関連ドキュメント

- `sample-pages/README.md` - HTMLテンプレートの詳細説明
- `ページ構成設計.md` - SEO最適化されたページ設計書
- `日報_251014.md` - 本日の作業記録

---

## 📞 サポート

質問や問題がある場合は、プロジェクトの管理者に連絡してください。

---

**作成日**: 2025-10-14
**プロジェクト**: WordPress Integration - Land Price Pages
**バージョン**: 1.0
