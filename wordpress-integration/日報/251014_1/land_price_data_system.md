# åœ°ä¾¡æƒ…å ±ãƒšãƒ¼ã‚¸ å®Ÿãƒ‡ãƒ¼ã‚¿é€£æºã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸

## ğŸ“‹ æ¦‚è¦

ä¸å‹•ç”£æƒ…å ±ãƒ©ã‚¤ãƒ–ãƒ©ãƒªAPIã‹ã‚‰å®Ÿéš›ã®å…¬ç¤ºåœ°ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€éƒ½é“åºœçœŒãƒ»å¸‚åŒºç”ºæ‘åˆ¥ã®åœ°ä¾¡æƒ…å ±ãƒšãƒ¼ã‚¸ï¼ˆç´„1,900ãƒšãƒ¼ã‚¸ï¼‰ã‚’WordPressã«è‡ªå‹•æŠ•ç¨¿ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆæ›¸ã€‚

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
wordpress-integration/æ—¥å ±/251014_1/
â”œâ”€â”€ land_price_generator/           # æ–°è¦ä½œæˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ data_fetcher.py             # APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—
â”‚   â”œâ”€â”€ data_processor.py           # ãƒ‡ãƒ¼ã‚¿é›†è¨ˆãƒ»çµ±è¨ˆè¨ˆç®—
â”‚   â”œâ”€â”€ html_generator.py           # HTMLç”Ÿæˆ
â”‚   â”œâ”€â”€ wordpress_publisher.py      # WordPressæŠ•ç¨¿
â”‚   â”œâ”€â”€ templates/                  # HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ prefecture_template.html
â”‚   â”‚   â””â”€â”€ city_template.html
â”‚   â””â”€â”€ cache/                      # ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥
â”‚       â””â”€â”€ .gitignore
â””â”€â”€ run_land_price_generator.py     # ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

---

## ğŸ“Š ä½¿ç”¨ã™ã‚‹API

### 1. å…¬ç¤ºåœ°ä¾¡ãƒ‡ãƒ¼ã‚¿å–å¾— (XCT001)

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:** `https://www.reinfolib.mlit.go.jp/ex-api/external/XCT001`

**å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿:**
- æ¨™æº–åœ°ã®æ‰€åœ¨åœ°ãƒ»åœ°ç•ª
- 1ã¡ã‚ãŸã‚Šã®ä¾¡æ ¼
- å¤‰å‹•ç‡
- æœ€å¯„é§…ãƒ»é§…è·é›¢
- ç”¨é€”åœ°åŸŸã€å»ºè”½ç‡ã€å®¹ç©ç‡
- ç·¯åº¦çµŒåº¦

**ä½¿ç”¨ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
# real_estate_client.py ã®æ—¢å­˜ãƒ¡ã‚½ãƒƒãƒ‰
client.search_land_prices(prefecture="æ±äº¬éƒ½", city="åƒä»£ç”°åŒº", year="2024")
client.search_land_price_history(prefecture="æ±äº¬éƒ½", city="åƒä»£ç”°åŒº", years=["2020", "2021", "2022", "2023", "2024"])
```

---

## ğŸ”§ å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¨­è¨ˆ

### 1. data_fetcher.py - ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

**å½¹å‰²:** APIã‹ã‚‰å…¬ç¤ºåœ°ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜

**ä¸»è¦æ©Ÿèƒ½:**

#### 1.1 å…¨å›½ã®å…¬ç¤ºåœ°ä¾¡ãƒ‡ãƒ¼ã‚¿å–å¾—
```python
def fetch_all_prefecture_data(year: str = "2024") -> Dict[str, Any]:
    """
    å…¨å›½47éƒ½é“åºœçœŒã®å…¬ç¤ºåœ°ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—

    Returns:
        {
            "13": {  # éƒ½é“åºœçœŒã‚³ãƒ¼ãƒ‰
                "name": "æ±äº¬éƒ½",
                "data": [...]  # å…¬ç¤ºåœ°ä¾¡ãƒ‡ãƒ¼ã‚¿ã®ãƒªã‚¹ãƒˆ
            },
            ...
        }
    """
```

#### 1.2 éƒ½é“åºœçœŒåˆ¥ãƒ‡ãƒ¼ã‚¿å–å¾—
```python
def fetch_prefecture_data(prefecture_code: str, prefecture_name: str, year: str = "2024") -> Dict:
    """
    ç‰¹å®šã®éƒ½é“åºœçœŒã®å…¬ç¤ºåœ°ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—

    Args:
        prefecture_code: éƒ½é“åºœçœŒã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: "13"ï¼‰
        prefecture_name: éƒ½é“åºœçœŒåï¼ˆä¾‹: "æ±äº¬éƒ½"ï¼‰
        year: å¯¾è±¡å¹´

    Returns:
        {
            "prefecture_code": "13",
            "prefecture_name": "æ±äº¬éƒ½",
            "year": "2024",
            "data": [...],
            "municipalities": {...}  # å¸‚åŒºç”ºæ‘åˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
        }
    """
```

#### 1.3 å¸‚åŒºç”ºæ‘åˆ¥ãƒ‡ãƒ¼ã‚¿å–å¾—
```python
def fetch_city_data(prefecture_name: str, city_name: str, years: List[str] = None) -> Dict:
    """
    ç‰¹å®šã®å¸‚åŒºç”ºæ‘ã®å…¬ç¤ºåœ°ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆéå»ãƒ‡ãƒ¼ã‚¿å«ã‚€ï¼‰

    Args:
        prefecture_name: éƒ½é“åºœçœŒåï¼ˆä¾‹: "æ±äº¬éƒ½"ï¼‰
        city_name: å¸‚åŒºç”ºæ‘åï¼ˆä¾‹: "åƒä»£ç”°åŒº"ï¼‰
        years: å¯¾è±¡å¹´ã®ãƒªã‚¹ãƒˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: éå»5å¹´ï¼‰

    Returns:
        {
            "prefecture": "æ±äº¬éƒ½",
            "city": "åƒä»£ç”°åŒº",
            "current_year": "2024",
            "history": {...}  # ä½æ‰€ã”ã¨ã®å¹´æ¬¡ãƒ‡ãƒ¼ã‚¿
        }
    """
```

#### 1.4 ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½
```python
def save_to_cache(data: Dict, cache_key: str):
    """ãƒ‡ãƒ¼ã‚¿ã‚’JSONå½¢å¼ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜"""

def load_from_cache(cache_key: str, max_age_days: int = 30) -> Optional[Dict]:
    """ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ï¼ˆæœŸé™ãƒã‚§ãƒƒã‚¯ä»˜ãï¼‰"""
```

---

### 2. data_processor.py - ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ»çµ±è¨ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

**å½¹å‰²:** å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’é›†è¨ˆãƒ»åˆ†æã—ã¦çµ±è¨ˆæƒ…å ±ã‚’ç”Ÿæˆ

**ä¸»è¦æ©Ÿèƒ½:**

#### 2.1 éƒ½é“åºœçœŒçµ±è¨ˆã®è¨ˆç®—
```python
def calculate_prefecture_stats(prefecture_data: Dict) -> Dict:
    """
    éƒ½é“åºœçœŒå…¨ä½“ã®çµ±è¨ˆæƒ…å ±ã‚’è¨ˆç®—

    Returns:
        {
            "prefecture_name": "æ±äº¬éƒ½",
            "year": "2024",
            "summary": {
                "average_price_per_sqm": 1302000,  # å¹³å‡åœ°ä¾¡ï¼ˆå††/ã¡ï¼‰
                "average_price_per_tsubo": 4303000,  # å¹³å‡åªå˜ä¾¡ï¼ˆå††/åªï¼‰
                "median_price": 950000,
                "total_points": 2500,  # èª¿æŸ»åœ°ç‚¹æ•°
                "change_rate": 7.7,  # å¤‰å‹•ç‡ï¼ˆ%ï¼‰
                "nationwide_rank": 1  # å…¨å›½é †ä½ï¼ˆå¾Œã§è¨­å®šï¼‰
            },
            "municipalities": [...],  # å¸‚åŒºç”ºæ‘åˆ¥çµ±è¨ˆ
            "price_distribution": {
                "highest": {...},  # æœ€é«˜é¡ã®åœ°ç‚¹
                "lowest": {...},   # æœ€ä½é¡ã®åœ°ç‚¹
                "top10": [...],    # é«˜é¡TOP10
                "bottom10": [...]  # ä½é¡TOP10
            },
            "municipality_ranking": [...]  # å¸‚åŒºç”ºæ‘ãƒ©ãƒ³ã‚­ãƒ³ã‚°
        }
    """
```

#### 2.2 å¸‚åŒºç”ºæ‘çµ±è¨ˆã®è¨ˆç®—
```python
def calculate_city_stats(city_data: Dict) -> Dict:
    """
    å¸‚åŒºç”ºæ‘ã®çµ±è¨ˆæƒ…å ±ã‚’è¨ˆç®—

    Returns:
        {
            "city_name": "åƒä»£ç”°åŒº",
            "prefecture": "æ±äº¬éƒ½",
            "year": "2024",
            "summary": {
                "average_price_per_sqm": 6175000,
                "average_price_per_tsubo": 20413000,
                "total_points": 86,
                "change_rate": 13.9,
                "prefecture_rank": 2  # éƒ½é“åºœçœŒå†…é †ä½
            },
            "station_ranking": [...],  # é§…åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°
            "district_ranking": [...],  # åœ°åŒºåˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°
            "point_ranking": [...],     # åœ°ç‚¹åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°
            "trend": {
                "5_year_data": [...],   # éå»5å¹´ã®æ¨ç§»
                "growth_rate": 45.2     # 5å¹´é–“ã®ä¸Šæ˜‡ç‡
            }
        }
    """
```

#### 2.3 ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”Ÿæˆ
```python
def create_municipality_ranking(prefecture_data: Dict) -> List[Dict]:
    """
    éƒ½é“åºœçœŒå†…ã®å¸‚åŒºç”ºæ‘ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ç”Ÿæˆ

    Returns:
        [
            {
                "rank": 1,
                "municipality": "ä¸­å¤®åŒº",
                "average_price": 6530000,
                "price_per_tsubo": 21580000,
                "change_rate": 8.5,
                "total_points": 120
            },
            ...
        ]
    """

def create_station_ranking(city_data: Dict) -> List[Dict]:
    """
    å¸‚åŒºç”ºæ‘å†…ã®é§…åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ç”Ÿæˆ
    """

def create_district_ranking(city_data: Dict) -> List[Dict]:
    """
    å¸‚åŒºç”ºæ‘å†…ã®åœ°åŒºåˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ç”Ÿæˆ
    """
```

#### 2.4 æ¨ç§»åˆ†æ
```python
def analyze_price_trend(history_data: Dict) -> Dict:
    """
    åœ°ä¾¡æ¨ç§»ã‚’åˆ†æ

    Returns:
        {
            "years": [2020, 2021, 2022, 2023, 2024],
            "average_prices": [5400000, 5600000, 5900000, 6100000, 6530000],
            "change_rates": [2.5, 3.7, 5.4, 3.4, 7.0],
            "5_year_growth": 20.9,  # 5å¹´é–“ã®æˆé•·ç‡
            "trend": "ä¸Šæ˜‡"  # "ä¸Šæ˜‡", "ä¸‹é™", "æ¨ªã°ã„"
        }
    """
```

---

### 3. html_generator.py - HTMLç”Ÿæˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

**å½¹å‰²:** çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‹ã‚‰HTMLãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆ

**ä¸»è¦æ©Ÿèƒ½:**

#### 3.1 éƒ½é“åºœçœŒãƒšãƒ¼ã‚¸ç”Ÿæˆ
```python
def generate_prefecture_html(stats: Dict) -> str:
    """
    éƒ½é“åºœçœŒãƒšãƒ¼ã‚¸ã®HTMLã‚’ç”Ÿæˆ

    Args:
        stats: data_processor.calculate_prefecture_stats() ã®çµæœ

    Returns:
        å®Œæˆã—ãŸHTMLã‚³ãƒ³ãƒ†ãƒ³ãƒ„
    """
```

**ç”Ÿæˆã•ã‚Œã‚‹HTMLã‚»ã‚¯ã‚·ãƒ§ãƒ³:**
1. ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆ
2. ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆH1ï¼‰
3. ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ï¼ˆ4ã¤ã®æŒ‡æ¨™ï¼‰
4. å¸‚åŒºç”ºæ‘ãƒ©ãƒ³ã‚­ãƒ³ã‚° TOP10
5. åœ°ä¾¡æ¨ç§»ã‚°ãƒ©ãƒ•ã®èª¬æ˜
6. ã‚¨ãƒªã‚¢åˆ†æ
7. å…¨å¸‚åŒºç”ºæ‘ä¸€è¦§ï¼ˆã‚«ãƒ¼ãƒ‰å½¢å¼ï¼‰
8. FAQï¼ˆã‚ˆãã‚ã‚‹è³ªå•ï¼‰
9. CTAï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¸ã®èª˜å°ï¼‰
10. æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆJSON-LDï¼‰

#### 3.2 å¸‚åŒºç”ºæ‘ãƒšãƒ¼ã‚¸ç”Ÿæˆ
```python
def generate_city_html(stats: Dict) -> str:
    """
    å¸‚åŒºç”ºæ‘ãƒšãƒ¼ã‚¸ã®HTMLã‚’ç”Ÿæˆ

    Args:
        stats: data_processor.calculate_city_stats() ã®çµæœ

    Returns:
        å®Œæˆã—ãŸHTMLã‚³ãƒ³ãƒ†ãƒ³ãƒ„
    """
```

**ç”Ÿæˆã•ã‚Œã‚‹HTMLã‚»ã‚¯ã‚·ãƒ§ãƒ³:**
1. ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆ
2. ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆH1ï¼‰
3. ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ï¼ˆ4ã¤ã®æŒ‡æ¨™ï¼‰
4. é§…åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚° TOP5
5. è©³ç´°åœ°ç‚¹ãƒ©ãƒ³ã‚­ãƒ³ã‚° TOP10
6. åœ°ä¾¡æ¨ç§»ã‚°ãƒ©ãƒ•ï¼ˆéå»5å¹´ï¼‰
7. ã‚¨ãƒªã‚¢ç‰¹æ€§ãƒ»æŠ•è³‡åˆ†æ
8. éš£æ¥å¸‚åŒºç”ºæ‘ãƒªãƒ³ã‚¯
9. FAQ
10. CTA
11. æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆJSON-LDï¼‰

#### 3.3 ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³
```python
def render_template(template_name: str, context: Dict) -> str:
    """
    Jinjaãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

    Args:
        template_name: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å
        context: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¤‰æ•°ã®è¾æ›¸

    Returns:
        ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸHTML
    """
```

---

### 4. wordpress_publisher.py - WordPressæŠ•ç¨¿ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

**å½¹å‰²:** ç”Ÿæˆã—ãŸHTMLã‚’WordPressã«æŠ•ç¨¿

**ä¸»è¦æ©Ÿèƒ½:**

#### 4.1 ãƒãƒƒãƒæŠ•ç¨¿
```python
def batch_publish_pages(pages: List[Dict], batch_size: int = 10, delay: int = 1):
    """
    è¤‡æ•°ã®ãƒšãƒ¼ã‚¸ã‚’ãƒãƒƒãƒå‡¦ç†ã§æŠ•ç¨¿

    Args:
        pages: æŠ•ç¨¿ã™ã‚‹ãƒšãƒ¼ã‚¸ã®ãƒªã‚¹ãƒˆ
        batch_size: 1å›ã®ãƒãƒƒãƒã‚µã‚¤ã‚º
        delay: ãƒãƒƒãƒé–“ã®é…å»¶ï¼ˆç§’ï¼‰
    """
```

#### 4.2 éƒ½é“åºœçœŒãƒšãƒ¼ã‚¸æŠ•ç¨¿
```python
def publish_prefecture_page(prefecture_name: str, html_content: str, stats: Dict) -> Dict:
    """
    éƒ½é“åºœçœŒãƒšãƒ¼ã‚¸ã‚’æŠ•ç¨¿

    Args:
        prefecture_name: éƒ½é“åºœçœŒå
        html_content: ç”Ÿæˆã•ã‚ŒãŸHTML
        stats: çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ¡ã‚¿æƒ…å ±ç”¨ï¼‰

    Returns:
        æŠ•ç¨¿çµæœï¼ˆæŠ•ç¨¿IDã€URLç­‰ï¼‰
    """
```

#### 4.3 å¸‚åŒºç”ºæ‘ãƒšãƒ¼ã‚¸æŠ•ç¨¿
```python
def publish_city_page(prefecture: str, city_name: str, html_content: str, stats: Dict) -> Dict:
    """
    å¸‚åŒºç”ºæ‘ãƒšãƒ¼ã‚¸ã‚’æŠ•ç¨¿
    """
```

#### 4.4 æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿ä½œæˆ
```python
def create_post_data(title: str, content: str, excerpt: str, slug: str, status: str = "draft") -> Dict:
    """
    WordPressæŠ•ç¨¿ç”¨ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ä½œæˆ

    Returns:
        {
            'title': 'ã‚¿ã‚¤ãƒˆãƒ«',
            'content': 'HTMLã‚³ãƒ³ãƒ†ãƒ³ãƒ„',
            'status': 'draft',
            'excerpt': 'ãƒ¡ã‚¿ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³',
            'slug': 'URLã‚¹ãƒ©ãƒƒã‚°'
        }
    """
```

---

## ğŸš€ å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

### ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ: run_land_price_generator.py

```python
"""
åœ°ä¾¡æƒ…å ±ãƒšãƒ¼ã‚¸ç”Ÿæˆãƒ»æŠ•ç¨¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
"""

def main():
    """ãƒ¡ã‚¤ãƒ³å‡¦ç†"""

    # ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ‡ãƒ¼ã‚¿å–å¾—
    print("ã‚¹ãƒ†ãƒƒãƒ—1: å…¨å›½ã®å…¬ç¤ºåœ°ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­...")
    all_data = fetch_all_prefecture_data(year="2024")

    # ã‚¹ãƒ†ãƒƒãƒ—2: éƒ½é“åºœçœŒãƒšãƒ¼ã‚¸ç”Ÿæˆ
    print("ã‚¹ãƒ†ãƒƒãƒ—2: éƒ½é“åºœçœŒãƒšãƒ¼ã‚¸ï¼ˆ47ä»¶ï¼‰ã‚’ç”Ÿæˆä¸­...")
    prefecture_pages = []

    for pref_code, pref_data in all_data.items():
        # çµ±è¨ˆè¨ˆç®—
        stats = calculate_prefecture_stats(pref_data)

        # HTMLç”Ÿæˆ
        html = generate_prefecture_html(stats)

        prefecture_pages.append({
            'prefecture': pref_data['name'],
            'html': html,
            'stats': stats
        })

    # ã‚¹ãƒ†ãƒƒãƒ—3: éƒ½é“åºœçœŒãƒšãƒ¼ã‚¸ã‚’æŠ•ç¨¿
    print("ã‚¹ãƒ†ãƒƒãƒ—3: éƒ½é“åºœçœŒãƒšãƒ¼ã‚¸ã‚’WordPressã«æŠ•ç¨¿ä¸­...")
    batch_publish_pages(prefecture_pages, batch_size=10, delay=2)

    # ã‚¹ãƒ†ãƒƒãƒ—4: å¸‚åŒºç”ºæ‘ãƒšãƒ¼ã‚¸ç”Ÿæˆ
    print("ã‚¹ãƒ†ãƒƒãƒ—4: å¸‚åŒºç”ºæ‘ãƒšãƒ¼ã‚¸ï¼ˆç´„1,900ä»¶ï¼‰ã‚’ç”Ÿæˆä¸­...")
    city_pages = []

    for pref_code, pref_data in all_data.items():
        for city_name, city_data in pref_data['municipalities'].items():
            # éå»ãƒ‡ãƒ¼ã‚¿å–å¾—
            history = fetch_city_data(
                prefecture_name=pref_data['name'],
                city_name=city_name,
                years=["2020", "2021", "2022", "2023", "2024"]
            )

            # çµ±è¨ˆè¨ˆç®—
            stats = calculate_city_stats({**city_data, 'history': history})

            # HTMLç”Ÿæˆ
            html = generate_city_html(stats)

            city_pages.append({
                'prefecture': pref_data['name'],
                'city': city_name,
                'html': html,
                'stats': stats
            })

    # ã‚¹ãƒ†ãƒƒãƒ—5: å¸‚åŒºç”ºæ‘ãƒšãƒ¼ã‚¸ã‚’æŠ•ç¨¿ï¼ˆãƒãƒƒãƒå‡¦ç†ï¼‰
    print(f"ã‚¹ãƒ†ãƒƒãƒ—5: å¸‚åŒºç”ºæ‘ãƒšãƒ¼ã‚¸ï¼ˆ{len(city_pages)}ä»¶ï¼‰ã‚’WordPressã«æŠ•ç¨¿ä¸­...")
    batch_publish_pages(city_pages, batch_size=20, delay=3)

    print("å®Œäº†!")

if __name__ == '__main__':
    main()
```

---

## ğŸ“ æ®µéšçš„å®Ÿè£…ãƒ—ãƒ©ãƒ³

### ãƒ•ã‚§ãƒ¼ã‚º1: ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ï¼ˆ1æ—¥ï¼‰
- [ ] data_fetcher.py ä½œæˆ
- [ ] data_processor.py ä½œæˆ
- [ ] æ±äº¬éƒ½1éƒ½é“åºœçœŒã§ãƒ†ã‚¹ãƒˆ
- [ ] åƒä»£ç”°åŒº1å¸‚åŒºç”ºæ‘ã§ãƒ†ã‚¹ãƒˆ

### ãƒ•ã‚§ãƒ¼ã‚º2: éƒ½é“åºœçœŒãƒšãƒ¼ã‚¸ï¼ˆ1-2æ—¥ï¼‰
- [ ] html_generator.py ä½œæˆï¼ˆéƒ½é“åºœçœŒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰
- [ ] wordpress_publisher.py ä½œæˆ
- [ ] 47éƒ½é“åºœçœŒã®ãƒšãƒ¼ã‚¸ç”Ÿæˆãƒ»æŠ•ç¨¿

### ãƒ•ã‚§ãƒ¼ã‚º3: å¸‚åŒºç”ºæ‘ãƒšãƒ¼ã‚¸ï¼ˆ3-5æ—¥ï¼‰
- [ ] html_generator.py æ‹¡å¼µï¼ˆå¸‚åŒºç”ºæ‘ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰
- [ ] ä¸»è¦100éƒ½å¸‚ã®ãƒšãƒ¼ã‚¸ç”Ÿæˆãƒ»æŠ•ç¨¿
- [ ] å…¨å›½1,900å¸‚åŒºç”ºæ‘ã®ãƒšãƒ¼ã‚¸ç”Ÿæˆãƒ»æŠ•ç¨¿

### ãƒ•ã‚§ãƒ¼ã‚º4: æœ€é©åŒ–ãƒ»æ”¹å–„
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½å®Ÿè£…
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„
- [ ] ãƒ­ã‚°æ©Ÿèƒ½è¿½åŠ 

---

## ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹æˆæœç‰©

### 1. éƒ½é“åºœçœŒãƒšãƒ¼ã‚¸ï¼ˆ47ä»¶ï¼‰

**URLä¾‹:** `https://ooya.tech/media/land-price/tokyo/`

**ã‚³ãƒ³ãƒ†ãƒ³ãƒ„:**
- æ±äº¬éƒ½ã®å¹³å‡åœ°ä¾¡: 130.2ä¸‡å††/ã¡ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- å…¨å›½é †ä½: 1ä½ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- å¸‚åŒºç”ºæ‘ãƒ©ãƒ³ã‚­ãƒ³ã‚° TOP10ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- åœ°ä¾¡æ¨ç§»ã‚°ãƒ©ãƒ•ï¼ˆéå»5-10å¹´ã®å®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- å…¨62å¸‚åŒºç”ºæ‘ã¸ã®ãƒªãƒ³ã‚¯

### 2. å¸‚åŒºç”ºæ‘ãƒšãƒ¼ã‚¸ï¼ˆç´„1,900ä»¶ï¼‰

**URLä¾‹:** `https://ooya.tech/media/land-price/tokyo/chiyoda/`

**ã‚³ãƒ³ãƒ†ãƒ³ãƒ„:**
- åƒä»£ç”°åŒºã®å¹³å‡åœ°ä¾¡: 617.5ä¸‡å††/ã¡ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- æ±äº¬éƒ½å†…é †ä½: 2ä½ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- é§…åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- è©³ç´°åœ°ç‚¹ãƒ©ãƒ³ã‚­ãƒ³ã‚° TOP10ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- éå»5å¹´ã®åœ°ä¾¡æ¨ç§»ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰

---

## âš ï¸ æ³¨æ„äº‹é …

### 1. APIå‘¼ã³å‡ºã—åˆ¶é™
- ä¸€åº¦ã«å¤§é‡ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‰ãªã„
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ´»ç”¨ã—ã¦å†åˆ©ç”¨
- ã‚¨ãƒ©ãƒ¼æ™‚ã¯ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…

### 2. WordPressã‚µãƒ¼ãƒãƒ¼è² è·
- ãƒãƒƒãƒå‡¦ç†ã§æ®µéšçš„ã«æŠ•ç¨¿ï¼ˆ1å›10-20ä»¶ï¼‰
- ãƒãƒƒãƒé–“ã«é…å»¶ã‚’å…¥ã‚Œã‚‹ï¼ˆ2-3ç§’ï¼‰
- 1æ—¥100-200ä»¶ãšã¤æŠ•ç¨¿ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨

### 3. ãƒ‡ãƒ¼ã‚¿ã®å“è³ª
- æ¬ æãƒ‡ãƒ¼ã‚¿ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ç•°å¸¸å€¤ã®ãƒã‚§ãƒƒã‚¯
- å¸‚åŒºç”ºæ‘åã®è¡¨è¨˜ã‚†ã‚Œå¯¾å¿œ

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

```
[ä¸å‹•ç”£æƒ…å ±ãƒ©ã‚¤ãƒ–ãƒ©ãƒªAPI]
         â†“
    XCT001ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
         â†“
   data_fetcher.py
    (ãƒ‡ãƒ¼ã‚¿å–å¾—)
         â†“
     ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜
         â†“
   data_processor.py
    (çµ±è¨ˆè¨ˆç®—)
         â†“
   html_generator.py
    (HTMLç”Ÿæˆ)
         â†“
  wordpress_publisher.py
    (WordPressæŠ•ç¨¿)
         â†“
  [WordPressè¨˜äº‹ã¨ã—ã¦å…¬é–‹]
```

---

## ğŸ” ãƒ‡ãƒ¼ã‚¿ã‚µãƒ³ãƒ—ãƒ«ä¾‹

### éƒ½é“åºœçœŒãƒ‡ãƒ¼ã‚¿ã®ä¾‹ï¼ˆæ±äº¬éƒ½ï¼‰
```json
{
  "prefecture_code": "13",
  "prefecture_name": "æ±äº¬éƒ½",
  "year": "2024",
  "summary": {
    "average_price_per_sqm": 1302000,
    "average_price_per_tsubo": 4303000,
    "total_points": 2500,
    "change_rate": 7.7
  },
  "municipality_ranking": [
    {
      "rank": 1,
      "municipality": "ä¸­å¤®åŒº",
      "average_price": 6530000,
      "change_rate": 8.5
    },
    {
      "rank": 2,
      "municipality": "åƒä»£ç”°åŒº",
      "average_price": 6175000,
      "change_rate": 13.9
    }
  ]
}
```

### å¸‚åŒºç”ºæ‘ãƒ‡ãƒ¼ã‚¿ã®ä¾‹ï¼ˆåƒä»£ç”°åŒºï¼‰
```json
{
  "city_name": "åƒä»£ç”°åŒº",
  "prefecture": "æ±äº¬éƒ½",
  "year": "2024",
  "summary": {
    "average_price_per_sqm": 6175000,
    "total_points": 86,
    "change_rate": 13.9,
    "prefecture_rank": 2
  },
  "station_ranking": [
    {
      "rank": 1,
      "station": "å¤§æ‰‹ç”º",
      "average_price": 12500000
    },
    {
      "rank": 2,
      "station": "æ±äº¬",
      "average_price": 11200000
    }
  ],
  "point_ranking": [
    {
      "rank": 1,
      "address": "ä¸¸ã®å†…2-4-1",
      "price_per_sqm": 37100000,
      "station": "æ±äº¬",
      "distance": "200m"
    }
  ]
}
```

---

**ä½œæˆæ—¥**: 2025-10-14
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: WordPress Integration - Land Price Pages
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
