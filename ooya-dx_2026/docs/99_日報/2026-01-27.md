# 日報 - 2026年1月27日

## 完了タスク

### 1. SNSシェアボタンの実装・改善
- `ShareButtons.tsx` コンポーネントを作成
- ブランドカラーを適用
  - X（旧Twitter）: 黒（#000000）
  - Facebook: 青（#1877F2）
  - LINE: 緑（#00B900）
  - リンクコピー: グレー
- 全26個の計算ツールページに追加
- 用語集ページ、記事ページにも追加
- 非推奨だったTwitter/Facebookアイコンをカスタムの SVGに置き換え

### 2. PWA（Progressive Web App）実装
- `manifest.json` を作成（start_url: /mypage）
- PWAアイコン生成スクリプト作成（192x192、512x512）
- ロゴからPWAアイコンを自動生成
- `next.config.mjs` にnext-pwa設定を追加
- `layout.tsx` にPWAメタデータを追加
- Turbopack互換性問題を解決（`--webpack`フラグ使用）

### 3. PWAインストールバナーの実装・調整
- `PWAInstallBanner.tsx` コンポーネントを作成
- フッター前に表示する青いバナー形式
- beforeinstallpromptイベント対応
- iOS/Android判定による手順案内

### 4. PWAバナーのスマホ対応問題の解決
- iPhoneではSafari以外（Chrome等）でPWA追加不可のため、バナー非表示に
- 最終的にスマホ（iOS/Android）では完全にバナー非表示に決定
- **PCのみ**でPWAインストールバナーを表示

---

## 変更ファイル

| ファイル | 変更内容 |
|---|---|
| `components/tools/ShareButtons.tsx` | 新規作成（SNSシェアボタン） |
| `components/PWAInstallBanner.tsx` | 新規作成（PWAバナー） |
| `public/manifest.json` | 新規作成（PWAマニフェスト） |
| `public/icons/icon-192x192.png` | 新規作成（PWAアイコン） |
| `public/icons/icon-512x512.png` | 新規作成（PWAアイコン） |
| `scripts/generate-pwa-icons.mjs` | 新規作成（アイコン生成スクリプト） |
| `next.config.mjs` | next-pwa設定追加 |
| `app/layout.tsx` | PWAメタデータ・バナー追加 |
| `package.json` | ビルドスクリプトに`--webpack`追加 |
| 全26ツールページ | ShareButtons追加 |
| `app/glossary/[slug]/page.tsx` | ShareButtons追加 |
| `app/media/[category]/[slug]/page.tsx` | ShareButtons追加 |

---

## 技術メモ

### PWAのプラットフォーム制限

| デバイス | ブラウザ | PWA追加 | 備考 |
|---|---|---|---|
| iPhone | Safari | 可 | 共有メニューから手動追加 |
| iPhone | Chrome等 | 不可 | Appleの制限 |
| Android | Chrome | 可 | beforeinstallpromptで自動プロンプト |
| PC | Chrome/Edge | 可 | beforeinstallpromptで自動プロンプト |

### next-pwaとTurbopackの互換性
- Next.js 16はデフォルトでTurbopackを使用
- next-pwaはwebpack設定を使用するため非互換
- 解決策: `next build --webpack` フラグを使用

---

## 今後の検討事項

- App Store/Google Play登録によるネイティブアプリ化（年額費用発生）
- Capacitorを使用したWebViewアプリ化（現コード流用可能）
