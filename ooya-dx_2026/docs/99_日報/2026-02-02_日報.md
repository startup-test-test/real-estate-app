# 日報 2026-02-02

## 作業内容

### 計算ツール共通コンポーネント化（B案：完全共通化）

SEOページとマイページで同じ計算ツールコンポーネントを共有する仕組みを実装中。

---

### 1. 利回り計算ツール（表面利回り・実質利回り）

**実装内容**
- コンパクト版コンポーネント作成
- SEOページをリファクタリングしてコンパクト版を使用
- マイページに組み込み（文言を「表面利回り・実質利回り」に変更）

**作成・修正ファイル**
- `components/calculators/YieldRateCalculatorCompact.tsx` - 新規作成
- `components/calculators/index.ts` - エクスポート追加
- `app/tools/yield-rate/YieldRateCalculator.tsx` - コンパクト版使用にリファクタリング
- `app/mypage/calculators/CalculatorsClient.tsx` - 利回りツール追加

---

### 2. NOI（営業純利益）計算ツール

**実装内容**
- コンパクト版コンポーネント作成（簡易モード・詳細モード対応）
- SEOページをリファクタリングしてコンパクト版を使用
- マイページに組み込み

**作成・修正ファイル**
- `components/calculators/NOICalculatorCompact.tsx` - 新規作成
- `components/calculators/index.ts` - エクスポート追加
- `app/tools/noi/NOICalculator.tsx` - コンパクト版使用にリファクタリング
- `app/mypage/calculators/CalculatorsClient.tsx` - NOIツール追加

---

## 進捗状況

**全体進捗: 18 / 51 タスク (35.3%)**

| ステップ | 完了 | 未着手 | 保留 |
|----------|:----:|:------:|:----:|
| コンパクト版 | 6 | 11 | 9 |
| SEOページ | 6 | 11 | 9 |
| マイページ | 6 | 11 | 9 |

**完了済みツール:**
1. 仲介手数料
2. 不動産取得税
3. 登録免許税
4. 印紙税
5. 利回り（表面利回り・実質利回り）
6. NOI（営業純利益）

---

## ファイル格納先

### コンパクト版コンポーネント
```
components/calculators/
├── index.ts                           # エクスポート一覧
├── BrokerageCalculatorCompact.tsx     # 仲介手数料
├── AcquisitionTaxCalculatorCompact.tsx # 不動産取得税
├── RegistrationTaxCalculatorCompact.tsx # 登録免許税
├── StampTaxCalculatorCompact.tsx      # 印紙税
├── YieldRateCalculatorCompact.tsx     # 利回り ← 本日追加
└── NOICalculatorCompact.tsx           # NOI ← 本日追加
```

### 計算ロジック
```
lib/calculators/
├── yieldRate.ts                       # 利回り計算ロジック
└── noi.ts                             # NOI計算ロジック
```

### SEOページ
```
app/tools/
├── yield-rate/YieldRateCalculator.tsx # 利回りSEOページ
└── noi/NOICalculator.tsx              # NOI SEOページ
```

### マイページ
```
app/mypage/calculators/
└── CalculatorsClient.tsx              # 計算ツール一覧ページ
```

### 設計ドキュメント
```
docs/18_計算ツール共通コンポーネント設計/
├── 00_概要.md                         # 全体方針
├── 01_コンパクト版コンポーネント仕様.md # 仕様書
└── 02_実装状況.md                     # 進捗管理
```

---

## 次回以降の課題

### 優先度：高（収益指標系）
- [ ] 減価償却計算ツール

### 優先度：中
- [ ] CCR（自己資本利回り）
- [ ] DSCR（返済余裕率）
- [ ] IRR（内部収益率）
- [ ] NPV（正味現在価値）
- [ ] CF（キャッシュフロー）

### 優先度：中（ローン・売却系）
- [ ] 住宅ローン
- [ ] 譲渡所得税

---

## メモ

- B案（完全共通化）を採用：SEOページとマイページで完全に同じコンポーネントを使用
- 計算ロジックは`lib/calculators/*.ts`に分離済み
- コンパクト版は`showTitle`プロップでタイトル表示を制御
