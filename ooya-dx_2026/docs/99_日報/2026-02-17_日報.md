# 日報 2026-02-17

## 本日の作業内容

### 1. 公開ページ19ページのlayout.tsx共通化

Header/Footer/HeaderSpacerを各ページからlayout.tsxに抽出し、テンプレートを一元管理化。
HeaderSpacer変更時に全ファイル手修正が必要だった問題を解消。

**作成・修正したlayout.tsx（7ファイル）：**

| # | ファイル | 対象ページ数 | 状態 |
|---|---------|------------|------|
| 1 | `app/company/layout.tsx` | 12ページ | **新規作成** |
| 2 | `app/profile/layout.tsx` | 1ページ | **新規作成** |
| 3 | `app/contact/layout.tsx` | 1ページ | 既存を修正（Header/Footer追加） |
| 4 | `app/legal/layout.tsx` | 2ページ | **新規作成** |
| 5 | `app/disclaimer/layout.tsx` | 1ページ | 既存を修正（Header/Footer追加） |
| 6 | `app/pricing/layout.tsx` | 1ページ | 既存を修正（Header/Footer追加） |
| 7 | `app/faq/layout.tsx` | 1ページ | 既存を修正（Header/Footer追加） |

**3パターンの修正：**

| パターン | 対象ページ数 | 変更内容 |
|----------|------------|---------|
| A: Header/Footer削除 | 14ページ（company全12 + profile + contact） | 各ページからHeader/Footer/Spacerの重複コードを削除 |
| B: Header/Footer追加 | 2ページ（legal/terms, legal/privacy） | Header/Footer追加、`pt-32`→`py-12`、パンくず追加 |
| C: 構造変更 | 3ページ（disclaimer, pricing, faq） | Header/Footer追加、パンくず統一、背景色変更 |

**対象19ページ一覧：**

| # | パス | パターン |
|---|------|---------|
| 1 | `/company` | A |
| 2 | `/company/portfolio` | A |
| 3 | `/company/service` | A |
| 4 | `/company/contact` | A |
| 5 | `/company/csr` | A |
| 6 | `/company/sdgs` | A |
| 7 | `/company/link` | A |
| 8 | `/company/lib-partner` | A |
| 9 | `/company/teambeyond` | A |
| 10 | `/company/climate-adaptation` | A |
| 11 | `/company/plastics-smart` | A |
| 12 | `/company/consumer-policy` | A |
| 13 | `/profile` | A |
| 14 | `/contact` | A |
| 15 | `/legal/terms` | B |
| 16 | `/legal/privacy` | B |
| 17 | `/disclaimer` | C |
| 18 | `/pricing` | C |
| 19 | `/faq` | C |

**変更規模：** 27ファイル、+219行 / -307行

---

### 2. スマホ横スクロール修正

**原因特定：** プロフィールページの画像（`max-w-sm` = 384px）がスマホ表示幅（約351px）を超えてオーバーフロー。

**修正内容：**

| 修正 | 対象 | 内容 |
|------|------|------|
| 根本対策 | `app/profile/page.tsx` | `max-w-sm` → `max-w-full sm:max-w-sm` |
| 安全策 | 全7つのlayout.tsx | `<main>` に `overflow-x-hidden` 追加（19ページに一括適用） |

---

### 3. template-demo を ContentPageLayout ベースに書き直し

`/tools/template-demo` が古い実装（Header/Footer直接配置、1カラム）のままだったため、実際のツールページと同じ `ContentPageLayout`（2カラムLP型）ベースに書き直し。

| | 変更前 | 変更後 |
|---|--------|--------|
| テンプレート | Header/Footer直接配置 | **ContentPageLayout** |
| カラム | 1カラム（max-w-2xl） | **2カラム**（左:計算機、右:サイドバー） |
| パンくず | ToolsBreadcrumb直接使用 | ToolPageHeader経由 |
| サイドバー | なし | **ToolSidebar + ToolMobileSidebar** |
| CompanyProfile | なし | **あり** |

---

### 4. layout.tsxサンプルページ作成

ContentPageLayoutとの比較用に、layout.tsxだけのサンプルページを作成。

| テンプレート | サンプルURL | 構造 |
|-------------|-----------|------|
| layout.tsx（公開ページ共通） | `/layout-sample` | シンプル1カラム |
| ContentPageLayout | `/tools/template-demo` | 2カラムLP型 |

---

### 5. 設計資料（architecture-overview.html）更新

`/private/tmp/architecture-overview.html` を今回の変更に合わせて更新。

| セクション | 変更内容 |
|-----------|---------|
| テンプレート概要 | 3種→4種に更新、layout.tsx（19ページ）追加 |
| layout.tsx一覧 | 7ファイルの詳細テーブル追加 |
| テンプレートサンプルURL | `/layout-sample`、`/tools/template-demo` のリンク追加 |
| 公開ページ（会社系）テーブル | 全12ページを「コピペ」→「layout.tsx」に変更 |
| 公開ページ（その他）テーブル | profile/contact/disclaimer/legal/pricing/faq を更新 |
| パターンA見出し | 「約20ページ」→「約5ページ」、移行済み注記追加 |
| Section 9 パンくず | contact/legal/disclaimer/pricing/faq の行追加 |
| Section 9 py余白 | pricing/faq 追加 |
| Section 10 優先候補 | 公開ページレイアウト・company系ナビ → 「✅済」に更新 |

---

## コミット一覧（本日分）

| コミット | メッセージ | ファイル数 | 変更行 |
|---------|-----------|-----------|--------|
| `524ad79` | refactor: 公開ページ19ページのHeader/Footer/Spacerをlayout.tsxに共通化 | 27 | +219 / -307 |

---

## 設計判断

| 判断 | 選択肢 | 決定 | 理由 |
|------|--------|------|------|
| テンプレート方式 | 共通コンポーネント or layout.tsx | **layout.tsx** | Next.js App Routerのネスト機能で自然に実現 |
| tools のlayout.tsx化 | する or しない | **しない** | ContentPageLayoutがLP型で十分機能しており、layout.tsx化のメリットが薄い |
| pricing/faqの統一 | する or しない | **する** | 他の公開ページと見た目を揃えるため |
| 横スクロール対策 | 個別修正のみ or layout一括 | **両方** | 根本原因（画像）修正 + layout.tsxに安全策追加 |
| template-demo | 削除 or 書き直し | **書き直し** | ContentPageLayoutベースのサンプルとして活用 |

---

## 未着手・次回TODO

- [ ] 全19ページのSP/PC表示確認（特にlegal/disclaimer/pricing/faqは見た目が変わった箇所）
- [ ] media系3ページのテンプレート検討（現在コピペ状態）
- [ ] パンくず共通コンポーネント化（現在5種類のインライン実装）
- [ ] 日付・執筆者表示の共通コンポーネント化
- [ ] コミット・プッシュ（template-demo書き直し + layout-sample作成分）
