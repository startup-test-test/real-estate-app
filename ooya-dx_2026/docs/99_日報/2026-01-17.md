# 日報 2026-01-17

## 作業内容

### 目次コンポーネントの共通化・全ページ適用

シミュレーターページの目次を共通コンポーネント化し、全9ページに適用しました。

#### 1. 共通コンポーネントの作成

**ファイル:** `components/tools/TableOfContents.tsx`

- `TableOfContents` - 目次ナビゲーションを描画
- `SectionHeading` - 自動採番付きh2/h3見出しを描画
- `TocItem` 型 - 目次項目の定義（id, title, level）
- 採番ロジック - level 2は「1, 2, 3...」、level 3は「1-1, 1-2, 2-1...」形式

#### 2. 目次コンポーネント適用ページ（全9ページ）

| ページ | ファイル | 目次構成 |
|--------|----------|----------|
| 贈与税 | gift-tax/GiftTaxCalculator.tsx | about, calculation, tax-rate, example, special |
| 不動産取得税 | acquisition-tax/AcquisitionTaxCalculator.tsx | about, calculation, reduction, used |
| 譲渡所得税 | capital-gains-tax/CapitalGainsTaxCalculator.tsx | about, calculation, tax-rate, special |
| 法人税 | corporate-tax/CorporateTaxCalculator.tsx | about, structure, effective-rate, comparison, breakeven, costs |
| 減価償却 | depreciation/DepreciationCalculator.tsx | about, calculation, used-asset, example |
| 相続税 | inheritance-tax/InheritanceTaxCalculator.tsx | about, basic-deduction, calculation, tax-rate, special |
| 住宅ローン | mortgage-loan/MortgageLoanCalculator.tsx | about, equal-pi, equal-p, ratio, bonus |
| 登録免許税 | registration-tax/RegistrationTaxCalculator.tsx | about, calculation, reduction, example |
| 印紙税 | stamp-tax/StampTaxCalculator.tsx | about, documents, reduction, electronic, penalty |

#### 3. 各ページへの変更内容

1. **import追加**
   ```tsx
   import { TableOfContents, SectionHeading, TocItem } from '@/components/tools/TableOfContents'
   ```

2. **tocItems配列追加**
   ```tsx
   const tocItems: TocItem[] = [
     { id: 'about', title: '○○とは', level: 2 },
     { id: 'calculation', title: '計算方法', level: 3 },
     // ...
   ]
   ```

3. **目次の置換**
   ```tsx
   // Before: 手動の<nav>要素
   // After:
   <TableOfContents items={tocItems} />
   ```

4. **見出しの置換**
   ```tsx
   // Before: <h2 id="about">○○とは</h2>
   // After:
   <SectionHeading id="about" items={tocItems} />
   ```

#### 4. スクロール位置の修正

**ファイル:** `app/globals.css`

```css
html {
  scroll-padding-top: 120px;
}
```

固定ヘッダーによるアンカーリンク時のコンテンツ被りを解消。

## 技術的なポイント

- 目次と見出しで同じ`tocItems`配列を参照することで、番号と見出しテキストの一貫性を保証
- level 2/3に応じて自動的にh2/h3タグと適切なスタイルを適用
- 既存のデザインパターンを維持しつつ、コードの重複を大幅に削減

## 確認事項

- TypeScriptエラー: なし
- 全9ページで目次の自動採番が正常に動作

## 次のタスク候補

- （必要に応じて記載）
