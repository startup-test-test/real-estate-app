<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>ä»²ä»‹æ‰‹æ•°æ–™ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¨­è¨ˆæ›¸</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: #f8fafc; color: #1a1a1a; display: flex; flex-direction: column; height: 100vh; }

  .topbar { background: #1e293b; color: #fff; padding: 8px 20px; display: flex; align-items: center; gap: 16px; height: 44px; flex-shrink: 0; }
  .topbar h1 { font-size: 15px; white-space: nowrap; }
  .topbar .stats { font-size: 11px; color: #94a3b8; }
  .topbar .link { font-size: 11px; color: #60a5fa; text-decoration: none; margin-left: auto; }
  .topbar .link:hover { text-decoration: underline; }

  .layout { display: flex; flex: 1; overflow: hidden; }

  /* Sidebar */
  .sidebar { width: 240px; background: #fff; border-right: 1px solid #e2e8f0; overflow-y: auto; flex-shrink: 0; }
  .sidebar-title { font-size: 11px; font-weight: 700; color: #64748b; padding: 12px 14px 6px; text-transform: uppercase; letter-spacing: 0.5px; }
  .page-item { padding: 10px 14px; cursor: pointer; border-bottom: 1px solid #f1f5f9; transition: background 0.15s; }
  .page-item:hover { background: #f8fafc; }
  .page-item.active { background: #eff6ff; border-left: 3px solid #2563eb; }
  .page-item .num { font-size: 10px; color: #94a3b8; }
  .page-item .name { font-size: 13px; font-weight: 600; color: #1e293b; margin: 2px 0; }
  .page-item .meta { font-size: 10px; color: #64748b; display: flex; gap: 8px; }
  .page-item .cover { font-size: 10px; font-weight: 700; }
  .page-item .cover.ok { color: #059669; }
  .page-item .cover.warn { color: #d97706; }
  .page-item .cover.bad { color: #dc2626; }

  .sidebar-section { padding: 12px 14px; border-top: 2px solid #e2e8f0; }
  .sidebar-section .label { font-size: 10px; font-weight: 700; color: #64748b; margin-bottom: 6px; }
  .cover-row { display: flex; justify-content: space-between; font-size: 11px; padding: 2px 0; }
  .cover-row .pname { color: #475569; }

  /* Main content */
  .main { flex: 1; overflow-y: auto; padding: 24px 32px; }
  .page-header { margin-bottom: 20px; }
  .page-header .num-label { font-size: 12px; color: #64748b; font-weight: 600; }
  .page-header .title { font-size: 22px; font-weight: 700; color: #1e293b; margin: 4px 0; }
  .page-header .url { font-size: 12px; color: #2563eb; text-decoration: none; }
  .page-header .url:hover { text-decoration: underline; }
  .page-header .page-meta { display: flex; gap: 16px; margin-top: 8px; font-size: 12px; color: #475569; }
  .page-header .page-meta .val { font-weight: 700; }

  .h1-bar { background: #1e293b; color: #fff; padding: 12px 16px; border-radius: 8px; margin-bottom: 20px; }
  .h1-bar .h1-label { font-size: 10px; color: #94a3b8; font-weight: 600; }
  .h1-bar .h1-title { font-size: 16px; font-weight: 700; margin-top: 2px; }
  .h1-bar .h1-kw { font-size: 11px; color: #60a5fa; margin-top: 4px; }

  .h2-card { background: #fff; border: 1px solid #e2e8f0; border-radius: 8px; margin-bottom: 16px; overflow: hidden; }
  .h2-card .h2-header { background: #f8fafc; padding: 12px 16px; border-bottom: 1px solid #e2e8f0; display: flex; align-items: center; gap: 12px; }
  .h2-card .h2-tag { background: #2563eb; color: #fff; font-size: 10px; font-weight: 700; padding: 2px 8px; border-radius: 4px; white-space: nowrap; }
  .h2-card .h2-title { font-size: 14px; font-weight: 700; color: #1e293b; flex: 1; }
  .h2-card .h2-stats { font-size: 10px; color: #64748b; white-space: nowrap; }
  .h2-card .h2-body { padding: 12px 16px; }
  .h2-card .h2-desc { font-size: 12px; color: #475569; margin-bottom: 8px; line-height: 1.6; }

  .kw-list { display: flex; flex-wrap: wrap; gap: 6px; }
  .kw-chip { display: inline-flex; align-items: center; gap: 4px; background: #f1f5f9; border: 1px solid #e2e8f0; padding: 3px 10px; border-radius: 20px; font-size: 11px; }
  .kw-chip .kw-name { color: #1e293b; font-weight: 500; }
  .kw-chip .kw-vol { color: #64748b; font-size: 10px; }
  .kw-chip.main-kw { background: #dbeafe; border-color: #93c5fd; }
  .kw-chip.main-kw .kw-name { color: #1e40af; font-weight: 700; }

  .h3-section { margin: 8px 0 8px 20px; padding: 8px 12px; border-left: 2px solid #e2e8f0; }
  .h3-title { font-size: 12px; font-weight: 700; color: #475569; }
  .h3-desc { font-size: 11px; color: #64748b; margin-top: 2px; }

  .link-section { margin-top: 8px; padding-top: 8px; border-top: 1px solid #f1f5f9; }
  .link-item { font-size: 11px; color: #2563eb; margin: 2px 0; }
  .link-item .arrow { color: #94a3b8; }

  /* ãƒªãƒ³ã‚¯å…ˆãƒãƒƒã‚¸ */
  .h2-link-badge { display: inline-flex; align-items: center; gap: 4px; background: #dcfce7; border: 1px solid #86efac; color: #166534; font-size: 10px; font-weight: 700; padding: 2px 10px; border-radius: 12px; margin-left: 8px; white-space: nowrap; }
  .h2-link-badge.incoming { background: #fef3c7; border-color: #fcd34d; color: #92400e; }

  /* ãƒªãƒ³ã‚¯ãƒãƒƒãƒ— */
  .link-map { background: #fff; border: 1px solid #e2e8f0; border-radius: 8px; margin-bottom: 20px; padding: 16px; }
  .link-map .lm-title { font-size: 13px; font-weight: 700; color: #1e293b; margin-bottom: 12px; }
  .link-map .lm-row { display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px solid #f1f5f9; font-size: 12px; }
  .link-map .lm-row:last-child { border-bottom: none; }
  .link-map .lm-h2 { flex: 1; color: #475569; font-weight: 500; }
  .link-map .lm-arrow { color: #2563eb; font-weight: 700; font-size: 14px; }
  .link-map .lm-dest { background: #eff6ff; border: 1px solid #bfdbfe; padding: 3px 10px; border-radius: 6px; color: #1e40af; font-weight: 600; cursor: pointer; }
  .link-map .lm-dest:hover { background: #dbeafe; }

  /* Unassigned warning */
  .unassigned { background: #fef2f2; border: 1px solid #fecaca; border-radius: 8px; padding: 16px; margin-bottom: 16px; }
  .unassigned .ua-title { font-size: 12px; font-weight: 700; color: #dc2626; margin-bottom: 8px; }
  .unassigned .kw-chip { background: #fee2e2; border-color: #fca5a5; }

  /* Footer stats */
  .page-footer { background: #fff; border: 1px solid #e2e8f0; border-radius: 8px; padding: 16px; margin-top: 8px; }
  .page-footer .footer-title { font-size: 11px; font-weight: 700; color: #64748b; margin-bottom: 8px; }
  .page-footer .footer-stats { display: flex; gap: 24px; font-size: 12px; }
  .page-footer .footer-stats .val { font-weight: 700; }
  .page-footer .kw-link { font-size: 11px; color: #2563eb; text-decoration: none; margin-top: 8px; display: inline-block; }
  .page-footer .kw-link:hover { text-decoration: underline; }

  .internal-links { background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 8px; padding: 16px; margin-top: 16px; }
  .internal-links .il-title { font-size: 12px; font-weight: 700; color: #166534; margin-bottom: 8px; }
  .internal-links .il-item { font-size: 11px; color: #475569; margin: 3px 0; }
  .internal-links .il-item .il-dir { color: #059669; font-weight: 600; }

  /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ */
  .status-dashboard { padding: 12px 14px; border-bottom: 2px solid #e2e8f0; background: #fafbfc; }
  .status-dashboard .sd-title { font-size: 11px; font-weight: 700; color: #64748b; margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
  .status-dashboard .sd-progress { background: #e2e8f0; border-radius: 4px; height: 8px; margin-bottom: 10px; overflow: hidden; display: flex; }
  .status-dashboard .sd-progress .seg { height: 100%; transition: width 0.3s; }
  .status-dashboard .sd-progress .seg-done { background: #059669; }
  .status-dashboard .sd-progress .seg-review { background: #f59e0b; }
  .status-dashboard .sd-progress .seg-writing { background: #3b82f6; }
  .status-dashboard .sd-progress .seg-todo { background: #e2e8f0; }
  .status-dashboard .sd-legend { display: flex; flex-wrap: wrap; gap: 4px 10px; font-size: 10px; color: #64748b; margin-bottom: 8px; }
  .status-dashboard .sd-legend span { display: flex; align-items: center; gap: 3px; }
  .status-dashboard .sd-legend .dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; }
  .sd-table { width: 100%; }
  .sd-row { display: flex; align-items: center; gap: 6px; padding: 3px 0; font-size: 11px; }
  .sd-row .sd-num { color: #94a3b8; width: 18px; flex-shrink: 0; }
  .sd-row .sd-name { flex: 1; color: #1e293b; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .sd-badge { display: inline-flex; align-items: center; padding: 1px 8px; border-radius: 10px; font-size: 9px; font-weight: 700; cursor: pointer; user-select: none; transition: all 0.15s; white-space: nowrap; }
  .sd-badge:hover { filter: brightness(0.9); }
  .sd-badge.st-todo { background: #f1f5f9; color: #64748b; border: 1px solid #e2e8f0; }
  .sd-badge.st-writing { background: #dbeafe; color: #1d4ed8; border: 1px solid #93c5fd; }
  .sd-badge.st-review { background: #fef3c7; color: #92400e; border: 1px solid #fcd34d; }
  .sd-badge.st-done { background: #dcfce7; color: #166534; border: 1px solid #86efac; }
  .sd-badge.st-deleted { background: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }

  .page-item.deleted { opacity: 0.5; }
  .page-item.deleted .name { text-decoration: line-through; color: #94a3b8; }
  .deleted-notice { background: #fef2f2; border: 1px solid #fecaca; border-radius: 8px; padding: 16px; margin-bottom: 20px; }
  .deleted-notice .dn-title { font-size: 14px; font-weight: 700; color: #dc2626; margin-bottom: 8px; }
  .deleted-notice .dn-reason { font-size: 12px; color: #475569; line-height: 1.8; }
  .deleted-notice .dn-reason li { margin: 4px 0; }

  .empty { text-align: center; padding: 60px; color: #94a3b8; font-size: 14px; }
  .loading-bar { background: #e2e8f0; border-radius: 4px; height: 6px; margin: 8px auto; width: 200px; overflow: hidden; }
  .loading-bar .fill { background: #2563eb; height: 100%; transition: width 0.3s; }
</style>
</head>
<body>
<div class="topbar">
  <h1>ä»²ä»‹æ‰‹æ•°æ–™ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¨­è¨ˆæ›¸</h1>
  <span class="stats" id="topStats">èª­ã¿è¾¼ã¿ä¸­...</span>
  <a class="link" href="index.html" target="_blank">ğŸ“Š ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã‚’é–‹ã</a>
</div>
<div class="layout">
  <div class="sidebar" id="sidebar">
    <div id="statusDashboard" class="status-dashboard"></div>
    <div class="sidebar-title">ğŸ“„ ãƒšãƒ¼ã‚¸ä¸€è¦§</div>
    <div id="pageList"></div>
    <div class="sidebar-section" id="coverSummary"></div>
  </div>
  <div class="main" id="main">
    <div class="empty">èª­ã¿è¾¼ã¿ä¸­...<div class="loading-bar"><div class="fill" id="loadbar" style="width:0%"></div></div></div>
  </div>
</div>

<script>
// â”€â”€â”€ ãƒšãƒ¼ã‚¸å®šç¾©ï¼ˆã‚µã‚¤ãƒˆè¨­è¨ˆ v2 ã«å¯¾å¿œï¼‰â”€â”€â”€
const PAGES = [
  {
    id: 'calc', num: 'â‘ ', name: 'è¨ˆç®—ãƒ„ãƒ¼ãƒ«', url: '/tools/brokerage/',
    group: 'ä»²ä»‹æ‰‹æ•°æ–™è¨ˆç®—', status: 'æ—¢å­˜', defaultStatus: 'å…¬é–‹æ¸ˆã¿',
    h2defs: [
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã®è¨ˆç®—æ–¹æ³•ï¼ˆé€Ÿç®—å¼ï¼‰', match: ['è¨ˆç®—', 'è¨ˆç®—æ–¹æ³•', 'è¨ˆç®—å¼', 'ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³'], desc: 'é€Ÿç®—å¼: (å£²è²·ä¾¡æ ¼Ã—3%+6ä¸‡å††)Ã—æ¶ˆè²»ç¨' },
      { title: 'ç‰©ä»¶ä¾¡æ ¼åˆ¥ã®è¨ˆç®—çµæœ', match: ['400ä¸‡å††ä»¥ä¸‹', 'æ¶ˆè²»ç¨'], desc: 'è‡ªå‹•è¨ˆç®—ãƒ•ã‚©ãƒ¼ãƒ ã§çµæœè¡¨ç¤º' },
    ],
    links: { cta: null, parent: 'â‘¡ ãƒ”ãƒ©ãƒ¼', children: [] }
  },
  {
    id: 'pillar', num: 'â‘¡', name: 'ãƒ”ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸', url: '/media/brokerage/guide/',
    group: 'ä»²ä»‹æ‰‹æ•°æ–™_åŸºç¤è§£èª¬', status: 'ä½œæˆæ¸ˆ', defaultStatus: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­',
    h2defs: [
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã¨ã¯ï¼Ÿã‚ã‹ã‚Šã‚„ã™ãè§£èª¬', match: ['ã¨ã¯', 'ç°¡å˜ã«'], desc: 'ãã‚‚ãã‚‚ä»²ä»‹æ‰‹æ•°æ–™ã¨ã¯ä½•ã‹ï¼Ÿä»•çµ„ã¿ã¨åŸºæœ¬ã‚’è§£èª¬' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã®è¨ˆç®—æ–¹æ³•', match: [], desc: 'é€Ÿç®—å¼ã®ç´¹ä»‹ï¼ˆ200å­—ç¨‹åº¦ã®è¦ç´„ï¼‰', linkTo: 'calc', linkLabel: 'â‘  è¨ˆç®—ãƒ„ãƒ¼ãƒ«ã§è‡ªå‹•è¨ˆç®—' },
      { title: 'ä¸å‹•ç”£å£²è²·ã®ä»²ä»‹æ‰‹æ•°æ–™', match: ['å£²ä¸»'], desc: 'å£²è²·æ™‚ã®ä»•çµ„ã¿ã‚’è¦ç´„', linkTo: 'realestate', linkLabel: 'â‘¢ ä¸å‹•ç”£å£²è²·ã‚¬ã‚¤ãƒ‰ã§è©³ã—ã' },
      { title: 'è³ƒè²¸ã®ä»²ä»‹æ‰‹æ•°æ–™', match: [], desc: 'è³ƒè²¸ã§ã®ç›¸å ´ãƒ»ä»•çµ„ã¿ã‚’è¦ç´„', linkTo: 'rental', linkLabel: 'â‘£ è³ƒè²¸ã‚¬ã‚¤ãƒ‰ã§è©³ã—ã' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ç„¡æ–™ã®ä»•çµ„ã¿', match: [], desc: 'â‘¤ ç„¡æ–™ãƒšãƒ¼ã‚¸ã¯å‰Šé™¤æ¸ˆã¿ã€‚ãƒ”ãƒ©ãƒ¼å†…ã§ç°¡æ½”ã«è§¦ã‚Œã‚‹ã®ã¿' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã®ç›¸å ´', match: [], desc: 'ä¾¡æ ¼å¸¯åˆ¥ã®ç›¸å ´ã‚’è¦ç´„', linkTo: 'market', linkLabel: 'â‘¥ ç›¸å ´ã‚¬ã‚¤ãƒ‰ã§è©³ã—ã' },
      { title: 'äº¤æ¸‰ãƒ»å€¤å¼•ãã¯ã§ãã‚‹ï¼Ÿ', match: [], desc: 'äº¤æ¸‰ã®å®Ÿæ…‹ã‚’è¦ç´„', linkTo: 'nego', linkLabel: 'â‘¦ äº¤æ¸‰ãƒ»å€¤å¼•ãã§è©³ã—ã' },
      { title: 'ä¸Šé™ï¼ˆå®…å»ºæ¥­æ³•ï¼‰ã¨æ³•æ”¹æ­£', match: [], desc: 'æ³•å¾‹ã§æ±ºã¾ã£ã¦ã„ã‚‹ä¸Šé™ã‚’è¦ç´„', linkTo: 'legal', linkLabel: 'â‘§ ä¸Šé™ãƒ»æ³•å¾‹ã§è©³ã—ã' },
      { title: 'é‡‘é¡åˆ¥ã®ä»²ä»‹æ‰‹æ•°æ–™', match: [], desc: 'ç‰©ä»¶ä¾¡æ ¼ã”ã¨ã®å…·ä½“ä¾‹ã‚’è¦ç´„', linkTo: 'price', linkLabel: 'â‘¨ é‡‘é¡åˆ¥ãƒ»å…·ä½“ä¾‹ã§è©³ã—ã' },
      { title: 'æ¶ˆè²»ç¨ã¯ã‹ã‹ã‚‹ï¼Ÿ', match: [], desc: 'æ¶ˆè²»ç¨ã®æ‰±ã„ã‚’è¦ç´„', linkTo: 'tax', linkLabel: 'â‘© æ¶ˆè²»ç¨ã§è©³ã—ã' },
      { title: 'ä½å®…ãƒ­ãƒ¼ãƒ³ã«çµ„ã¿è¾¼ã‚ã‚‹ï¼Ÿ', match: [], desc: 'ä½“é¨“è«‡ãƒ™ãƒ¼ã‚¹ã®è§£èª¬ã‚’è¦ç´„', linkTo: 'loan', linkLabel: 'â‘ª ä½å®…ãƒ­ãƒ¼ãƒ³ã§è©³ã—ã' },
      { title: 'ã„ã¤æ‰•ã†ï¼Ÿæ”¯æ‰•ã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°', match: ['ã„ã¤æ‰•ã†'], desc: 'å£²è²·: å¥‘ç´„æ™‚50%+æ±ºæ¸ˆæ™‚50% / è³ƒè²¸: å¥‘ç´„æ™‚ä¸€æ‹¬' },
    ],
    links: { cta: 'â‘  è¨ˆç®—ãƒ„ãƒ¼ãƒ«', parent: null, children: ['â‘¢ã€œâ‘ª å…¨å­ãƒšãƒ¼ã‚¸'] }
  },
  {
    id: 'realestate', num: 'â‘¢', name: 'ä¸å‹•ç”£å£²è²·ã‚¬ã‚¤ãƒ‰', url: '/media/brokerage/real-estate/',
    group: 'ä»²ä»‹æ‰‹æ•°æ–™_ä¸å‹•ç”£å£²è²·', status: 'æ–°è¦', defaultStatus: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­',
    h2defs: [
      { title: 'ä¸å‹•ç”£å£²è²·ã®ä»²ä»‹æ‰‹æ•°æ–™ã¨ã¯', match: ['ä¸å‹•ç”£', 'ä¸å‹•ç”£å£²è²·', 'å£²è²·'], desc: 'å£²è²·ã«ãŠã‘ã‚‹ä»•çµ„ã¿ã€å£²ä¸»ãƒ»è²·ä¸»ã©ã¡ã‚‰ãŒæ‰•ã†ï¼Ÿ' },
      { title: 'ãƒãƒ³ã‚·ãƒ§ãƒ³è³¼å…¥ãƒ»å£²å´æ™‚ã®ä»²ä»‹æ‰‹æ•°æ–™', match: ['ãƒãƒ³ã‚·ãƒ§ãƒ³', 'ä¸­å¤ãƒãƒ³ã‚·ãƒ§ãƒ³', 'ãƒãƒ³ã‚·ãƒ§ãƒ³å£²å´', 'ãƒãƒ³ã‚·ãƒ§ãƒ³è³¼å…¥', 'åˆ†è­²ãƒãƒ³ã‚·ãƒ§ãƒ³'], desc: 'æ–°ç¯‰: å£²ä¸»ç›´å£²ãªã‚‰ä¸è¦ / ä¸­å¤ã®è¨ˆç®—ä¾‹' },
      { title: 'ä¸­å¤ä½å®…ãƒ»å»ºå£²ã®ä»²ä»‹æ‰‹æ•°æ–™', match: ['æˆ¸å»ºã¦', 'å»ºå£²', 'ä¸­å¤'], desc: 'ä¸€æˆ¸å»ºã¦ã®æ³¨æ„ç‚¹ã€å»ºå£²ã¯ä¸è¦ãªå ´åˆã‚‚' },
      { title: 'åœŸåœ°å£²è²·ã®ä»²ä»‹æ‰‹æ•°æ–™', match: ['åœŸåœ°', 'åœŸåœ°å£²è²·'], desc: 'æ›´åœ°ã¨å¤å®¶ä»˜ãã®é•ã„' },
      { title: 'ä¸¡æ‰‹ä»²ä»‹ãƒ»ç‰‡æ‰‹ä»²ä»‹ãƒ»åˆ†ã‹ã‚Œã¨ã¯', match: ['ä¸¡æ‰‹', 'ç‰‡æ‰‹', 'åˆ†ã‹ã‚Œ', 'ä¸¡æ‰‹å–ã‚Š', 'ä¸¡æ‰‹ã¨ã¯'], desc: 'ä¸¡æ‰‹=ä¸¡æ–¹ã‹ã‚‰æ‰‹æ•°æ–™ã€ç‰‡æ‰‹=ä¸€æ–¹ã®ã¿' },
      { title: 'å£²ä¸»ãƒ»è²·ä¸»ã®è² æ‹…', match: ['å£²ä¸»', 'è²·ä¸»', 'ä¸¡æ–¹', 'æ‰‹ä»˜è§£é™¤'], desc: 'èª°ãŒã„ãã‚‰æ‰•ã†ã‹' },
    ],
    links: { cta: 'â‘  è¨ˆç®—ãƒ„ãƒ¼ãƒ«', parent: 'â‘¡ ãƒ”ãƒ©ãƒ¼', children: ['â‘¥ ç›¸å ´', 'â‘« æ”¯æ‰•ã„'] }
  },
  {
    id: 'rental', num: 'â‘£', name: 'è³ƒè²¸ã‚¬ã‚¤ãƒ‰', url: '/media/brokerage/rental/',
    group: 'ä»²ä»‹æ‰‹æ•°æ–™è³ƒè²¸', status: 'æ–°è¦', defaultStatus: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­',
    h2defs: [
      { title: 'è³ƒè²¸ã®ä»²ä»‹æ‰‹æ•°æ–™ã¨ã¯', match: ['è³ƒè²¸', 'ä¸å‹•ç”£ è³ƒè²¸'], desc: 'å®¶è³ƒ1ãƒ¶æœˆåˆ†ãŒåŸºæœ¬ã€å€Ÿä¸» or è²¸ä¸»' },
      { title: 'è³ƒè²¸ã®ä»²ä»‹æ‰‹æ•°æ–™ã®ç›¸å ´', match: ['ç›¸å ´', 'å¹³å‡', 'å®¶è³ƒ', 'å®¶è³ƒã‚ˆã‚Šé«˜ã„'], desc: 'å®¶è³ƒ1ãƒ¶æœˆåˆ†Ã—1.1ï¼ˆæ¶ˆè²»ç¨ï¼‰ãŒåŸºæœ¬ã€‚å®¶è³ƒã‚ˆã‚Šé«˜ã„å ´åˆã®ç†ç”±ã‚‚è§£èª¬' },
      { title: '0.5ãƒ¶æœˆãƒ»1ãƒ¶æœˆãƒ»ä¸Šé™ã®æ³•å¾‹', match: ['0.5ãƒ¶æœˆ', '0.55ãƒ¶æœˆ', '0.5ã‹æœˆ', '1ãƒ¶æœˆ', '1ãƒ¶æœˆåˆ†', '1ãƒ¶æœˆä»¥ä¸Š', '2ãƒ¶æœˆ', '2ãƒ¶æœˆåˆ†', 'ä¸Šé™', 'å…±ç›Šè²»'], desc: 'å®¶è³ƒ1ãƒ¶æœˆåˆ†+æ¶ˆè²»ç¨ãŒæ³•å®šä¸Šé™ã€å…±ç›Šè²»ã¯å«ã‚€ã‹ï¼Ÿ' },
      { title: 'è³ƒè²¸ã§ä»²ä»‹æ‰‹æ•°æ–™ç„¡æ–™ã®ç‰©ä»¶', match: ['ç„¡æ–™', 'ãªã—', 'å®‰ã„', '0'], desc: 'ãªãœç„¡æ–™ã«ã§ãã‚‹ã®ã‹ã€æ³¨æ„ç‚¹' },
      { title: 'è³ƒè²¸ã®ä»²ä»‹æ‰‹æ•°æ–™ã‚’äº¤æ¸‰ã™ã‚‹æ–¹æ³•', match: ['äº¤æ¸‰', 'å€¤å¼•ã'], desc: 'â†’ è©³ã—ãã¯â‘¦äº¤æ¸‰ãƒšãƒ¼ã‚¸' },
      { title: 'ã‚¢ãƒ‘ãƒ¼ãƒˆãƒ»é§è»Šå ´ã®ä»²ä»‹æ‰‹æ•°æ–™', match: ['ã‚¢ãƒ‘ãƒ¼ãƒˆ', 'é§è»Šå ´', 'é§è»Šå ´ä»£'], desc: 'ã‚¢ãƒ‘ãƒ¼ãƒˆã®ç›¸å ´ã€é§è»Šå ´ã¯å®…å»ºæ¥­æ³•é©ç”¨å¤–' },
      { title: 'è³ƒè²¸ã¨ç¤¼é‡‘ã®é•ã„', match: ['ç¤¼é‡‘'], desc: 'ä»²ä»‹æ‰‹æ•°æ–™ã¨ç¤¼é‡‘ã¯åˆ¥ã®è²»ç”¨' },
    ],
    links: { cta: 'â‘  è¨ˆç®—ãƒ„ãƒ¼ãƒ«', parent: 'â‘¡ ãƒ”ãƒ©ãƒ¼', children: ['â‘¦ äº¤æ¸‰'] }
  },
  {
    id: 'free', num: 'â‘¤', name: 'ç„¡æ–™ã®ä»•çµ„ã¿', url: '/media/brokerage/free/',
    group: 'ä»²ä»‹æ‰‹æ•°æ–™å€¤å¼•ã', status: 'å‰Šé™¤æ¸ˆã¿', defaultStatus: 'å‰Šé™¤æ¸ˆã¿',
    deleted: true,
    deletedReason: [
      'ç­†è€…ã®å®Ÿä½“é¨“ã«åŸºã¥ã‹ãªã„ â€” ä»²ä»‹æ‰‹æ•°æ–™ã€Œç„¡æ–™ã€ã®ä¼šç¤¾ã¯å®Ÿéš›ã«è¦‹ãŸã“ã¨ãŒãªãã€E-E-A-Tã®è¦³ç‚¹ã§ä¿¡é ¼æ€§ã‚’æ‹…ä¿ã§ããªã„ï¼ˆåŠé¡ã¯å­˜åœ¨ã™ã‚‹ãŒç„¡æ–™ã¯æœªç¢ºèªï¼‰',
      'è¨˜äº‹å†…å®¹ã«æ ¹æ‹ ã®è–„ã„ä¸»å¼µãŒå¤šã„ â€” å›²ã„è¾¼ã¿ãƒªã‚¹ã‚¯ã€è¿½åŠ è²»ç”¨è«‹æ±‚ãªã©ã€è£ä»˜ã‘ãªã—ã«ä¸å®‰ã‚’ç…½ã‚‹å†…å®¹',
      'æ¤œç´¢ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªãŒä½ã„ â€” ã€Œç„¡æ–™ã€ã‚’æ±‚ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ãªãŒã‚Šã«ããã€ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ãŒä½ã„',
      'è‘—è€…ã®ãƒãƒªã‚·ãƒ¼ã¨çŸ›ç›¾ â€” ä»²ä»‹æ‰‹æ•°æ–™ã¯å€¤åˆ‡ã‚‰ãªã„æ–¹ãŒã„ã„ã¨ã„ã†ç«‹å ´ã¨ã€ç„¡æ–™ã‚’æ¨å¥¨ã™ã‚‹è¨˜äº‹ã¯æ–¹å‘æ€§ãŒåˆã‚ãªã„',
    ],
    h2defs: [
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ç„¡æ–™ã®ä»•çµ„ã¿ï¼ˆã‹ã‚‰ãã‚Šï¼‰', match: ['ç„¡æ–™', 'ã‹ã‚‰ãã‚Š', '0å††', 'ã‚¼ãƒ­', '0'], desc: 'å£²ä¸»ã‹ã‚‰ã®æ‰‹æ•°æ–™ã§æˆç«‹ã€ä¸¡æ‰‹å–å¼•ã®æ´»ç”¨' },
      { title: 'ãªãœç„¡æ–™ã«ã§ãã‚‹ã®ã‹', match: ['ãªãœ', '0å†† ãªãœ'], desc: 'ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã®è§£èª¬' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ãŒå®‰ã„ä¸å‹•ç”£ä¼šç¤¾ã®é¸ã³æ–¹', match: ['å®‰ã„', 'æ ¼å®‰', 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°', 'æ¯”è¼ƒ', '9800å††'], desc: 'ç„¡æ–™ vs åŠé¡ vs é€šå¸¸ã®æ¯”è¼ƒ' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ç„¡æ–™ã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ', match: ['ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ', 'ãªã— ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ'], desc: 'ã‚µãƒ¼ãƒ“ã‚¹ã®è³ªã€å›²ã„è¾¼ã¿ãƒªã‚¹ã‚¯' },
      { title: 'ä¸­å¤ãƒãƒ³ã‚·ãƒ§ãƒ³ã§ä»²ä»‹æ‰‹æ•°æ–™ç„¡æ–™', match: ['ä¸­å¤ãƒãƒ³ã‚·ãƒ§ãƒ³', 'ä¸­å¤'], desc: 'å®Ÿä¾‹ç´¹ä»‹' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ç„¡æ–™ãƒ»æ ¼å®‰ã®ã‚µã‚¤ãƒˆ', match: ['ã‚µã‚¤ãƒˆ', 'ä¸å‹•ç”£å±‹', 'ä¸å‹•ç”£'], desc: 'ä¸»è¦ã‚µãƒ¼ãƒ“ã‚¹ç´¹ä»‹' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ãŒä¸è¦ãªã‚±ãƒ¼ã‚¹', match: ['ä¸è¦', 'ã‹ã‹ã‚‰ãªã„', 'ãªã—ã«ã™ã‚‹', 'ãªã—'], desc: 'å£²ä¸»ç›´å£²ã€æ–°ç¯‰ãƒãƒ³ã‚·ãƒ§ãƒ³ç­‰' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã®åŠé¡ã«ã™ã‚‹æ–¹æ³•', match: ['åŠé¡', 'å‰²å¼•', 'å€¤å¼•ã', 'å€¤ä¸‹ã’', 'å®‰ãã™ã‚‹', 'æŠ‘ãˆã‚‹', 'åŠåˆ†'], desc: 'äº¤æ¸‰ä»¥å¤–ã®æ‰‹æ®µ' },
    ],
    links: { cta: 'â‘  è¨ˆç®—ãƒ„ãƒ¼ãƒ«', parent: 'â‘¡ ãƒ”ãƒ©ãƒ¼', children: ['â‘£ è³ƒè²¸'] }
  },
  {
    id: 'market', num: 'â‘¥', name: 'ç›¸å ´ã‚¬ã‚¤ãƒ‰', url: '/media/brokerage/market-rate/',
    group: 'ä»²ä»‹æ‰‹æ•°æ–™ç›¸å ´', status: 'æ–°è¦', defaultStatus: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­',
    h2defs: [
      { title: 'ä¸å‹•ç”£å£²è²·ã®ä»²ä»‹æ‰‹æ•°æ–™ç›¸å ´ï¼ˆä¾¡æ ¼å¸¯åˆ¥æ—©è¦‹è¡¨ï¼‰', match: ['ç›¸å ´', 'ä¸å‹•ç”£', 'ä¸å‹•ç”£ ç›¸å ´'], desc: '1,000ä¸‡ã€œ1å„„å††ã®ä¸€è¦§ â†’ CTA: è¨ˆç®—ãƒ„ãƒ¼ãƒ«' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã¯ã„ãã‚‰ï¼Ÿ', match: ['ã„ãã‚‰', 'ã„ãã‚‰ã¾ã§'], desc: 'å£²è²·ä¾¡æ ¼åˆ¥ã®é‡‘é¡ä¸€è¦§' },
      { title: 'åœŸåœ°å£²è²·ã®ä»²ä»‹æ‰‹æ•°æ–™ç›¸å ´', match: ['åœŸåœ°'], desc: 'åœŸåœ°ç‰¹æœ‰ã®æ³¨æ„ç‚¹' },
      { title: 'ä¸­å¤ãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ»æˆ¸å»ºã¦ã®ç›¸å ´', match: ['ä¸­å¤ãƒãƒ³ã‚·ãƒ§ãƒ³', 'ä¸­å¤ä½å®…', 'æˆ¸å»ºã¦'], desc: 'ç‰©ä»¶ç¨®åˆ¥ã”ã¨ã®ç›¸å ´' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã®å¹³å‡ãƒ»æœ€ä½é‡‘é¡', match: ['å¹³å‡', 'æœ€ä½é‡‘é¡', 'ç›®å®‰'], desc: 'å¸‚å ´ã®å®Ÿæ…‹ãƒ‡ãƒ¼ã‚¿' },
      { title: 'å£²è²·ã®ç›¸å ´', match: ['å£²è²·'], desc: 'å£²è²·ä¾¡æ ¼å¸¯åˆ¥ã®ç›¸å ´ä¸€è¦§' },
    ],
    links: { cta: 'â‘  è¨ˆç®—ãƒ„ãƒ¼ãƒ«', parent: 'â‘¡ ãƒ”ãƒ©ãƒ¼', children: ['â‘ª é‡‘é¡åˆ¥'] }
  },
  {
    id: 'nego', num: 'â‘¦', name: 'äº¤æ¸‰ãƒ»å€¤å¼•ã', url: '/media/brokerage/negotiation/',
    group: 'ä»²ä»‹æ‰‹æ•°æ–™_äº¤æ¸‰ã‚¬ã‚¤ãƒ‰', status: 'æ–°è¦', defaultStatus: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­',
    h2defs: [
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã¯äº¤æ¸‰ã§ãã‚‹ï¼Ÿå€¤åˆ‡ã‚Œã‚‹ï¼Ÿ', match: ['äº¤æ¸‰', 'å€¤å¼•ãäº¤æ¸‰', 'äº¤æ¸‰ã®ä»•æ–¹', 'å€¤åˆ‡ã‚‹', 'å€¤åˆ‡ã‚Œã‚‹'], desc: 'æ³•å¾‹ä¸Šã¯å€¤å¼•ãOKã€å®Ÿæ…‹ã¯ã»ã¼æº€é¡' },
      { title: 'å€¤åˆ‡ã‚‹å®¢ã‚’ä¸å‹•ç”£ä¼šç¤¾ã¯ã©ã†è¦‹ã¦ã„ã‚‹ï¼Ÿ', match: ['å€¤åˆ‡ã‚‹å®¢'], desc: 'æ¥­ç•Œå´ã®æœ¬éŸ³ã¨ã€äº¤æ¸‰ã§å«Œã‚ã‚Œãªã„ã‚³ãƒ„' },
      { title: 'äº¤æ¸‰ã®ãƒ™ã‚¹ãƒˆã‚¿ã‚¤ãƒŸãƒ³ã‚°', match: ['ã‚¿ã‚¤ãƒŸãƒ³ã‚°'], desc: 'åª’ä»‹å¥‘ç´„ã®å‰ãŒæœ€é©' },
      { title: 'äº¤æ¸‰ã®è¨€ã„æ–¹ãƒ»ä¾‹æ–‡', match: ['è¨€ã„æ–¹', 'ä¾‹æ–‡', 'å€¤åˆ‡ã‚Šæ–¹'], desc: 'å…·ä½“çš„ãªäº¤æ¸‰ãƒ•ãƒ¬ãƒ¼ã‚º' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã‚’å®‰ãã™ã‚‹æ–¹æ³•', match: ['å®‰ãã™ã‚‹', 'å®‰ãã™ã‚‹æ–¹æ³•', 'æŠ‘ãˆã‚‹', 'ã‹ã‹ã‚‰ãªã„', 'æ‰•ã„ãŸããªã„'], desc: 'äº¤æ¸‰ä»¥å¤–: åŠé¡ä¼šç¤¾ã®åˆ©ç”¨ã€ç›¸è¦‹ç©ã‚‚ã‚Š' },
      { title: 'åŠé¡ã«ã™ã‚‹æ–¹æ³•', match: ['åŠé¡'], desc: 'ç¾å®Ÿçš„ãªæ–¹æ³•' },
      { title: 'å€¤å¼•ããƒ»å‰²å¼•ã®å®Ÿæ…‹', match: ['å€¤å¼•ã', 'å€¤ä¸‹ã’', 'å‰²å¼•'], desc: 'å®Ÿéš›ã«ã©ã“ã¾ã§ä¸‹ãŒã‚‹ã‹' },
    ],
    links: { cta: 'â‘  è¨ˆç®—ãƒ„ãƒ¼ãƒ«', parent: 'â‘¡ ãƒ”ãƒ©ãƒ¼', children: [] }
  },
  {
    id: 'legal', num: 'â‘§', name: 'ä¸Šé™ãƒ»æ³•å¾‹ãƒ»æ³•æ”¹æ­£', url: '/media/brokerage/legal-limit/',
    group: 'ä»²ä»‹æ‰‹æ•°æ–™ä¸Šé™', status: 'æ–°è¦', defaultStatus: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­',
    h2defs: [
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã®ä¸Šé™ã¯æ³•å¾‹ã§æ±ºã¾ã£ã¦ã„ã‚‹', match: ['ä¸Šé™', 'æ³•å¾‹', 'å®…å»ºæ¥­æ³•', 'å®…å»º', 'æ¥­æ³•', 'è¦å®š'], desc: 'å®…å»ºæ¥­æ³•46æ¡ã®è¦å®š' },
      { title: 'å£²è²·ã®ä¸Šé™ï¼šé€Ÿç®—å¼ã®ä»•çµ„ã¿', match: ['å‰²åˆ', 'ç‡', 'æ–™ç‡', 'ãƒ«ãƒ¼ãƒ«', 'ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆ'], desc: '200ä¸‡ä»¥ä¸‹5%ã€200ã€œ400ä¸‡4%ã€400ä¸‡è¶…3%' },
      { title: '2024å¹´æ³•æ”¹æ­£ï¼ˆ800ä¸‡å††ä»¥ä¸‹ã®ç‰¹ä¾‹ï¼‰', match: ['800ä¸‡å††ä»¥ä¸‹', 'æ”¹æ­£', 'æ”¹å®š', 'å¤‰æ›´', 'æ³•æ”¹æ­£', 'å›½åœŸäº¤é€šçœ', 'ã„ã¤ã‹ã‚‰'], desc: '800ä¸‡å††ä»¥ä¸‹ã¯ä¸Šé™30ä¸‡å††ã«å¤‰æ›´' },
      { title: '400ä¸‡å††ä»¥ä¸‹ã®æ”¹æ­£', match: ['400ä¸‡å††ä»¥ä¸‹'], desc: '400ä¸‡å††ä»¥ä¸‹ã®å¤‰æ›´ç‚¹' },
      { title: 'ä¸Šé™ã‚’è¶…ãˆã‚‹è«‹æ±‚ã¯é•æ³•ï¼Ÿ', match: ['é•æ³•', '1ãƒ¶æœˆ é•æ³•', '1.1ãƒ¶æœˆ', 'ä¸¡æ‰‹ é•æ³•'], desc: 'é•åæ™‚ã®ç½°å‰‡ãƒ»ç›¸è«‡å…ˆ' },
      { title: 'ä½å»‰ãªç©ºãå®¶ã®ç‰¹ä¾‹', match: ['ç©ºãå®¶', 'ä½å»‰ãªç©ºãå®¶', 'ç‰¹ä¾‹'], desc: 'ç©ºãå®¶å•é¡Œã¸ã®å¯¾å¿œç­–' },
    ],
    links: { cta: 'â‘  è¨ˆç®—ãƒ„ãƒ¼ãƒ«', parent: 'â‘¡ ãƒ”ãƒ©ãƒ¼', children: ['â‘£ è³ƒè²¸', 'â‘ª é‡‘é¡åˆ¥'] }
  },
  {
    id: 'price', num: 'â‘¨', name: 'é‡‘é¡åˆ¥ãƒ»å…·ä½“ä¾‹', url: '/media/brokerage/price-examples/',
    group: 'ä»²ä»‹æ‰‹æ•°æ–™_é‡‘é¡åˆ¥', status: 'æ–°è¦', defaultStatus: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­',
    h2defs: [
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ æ—©è¦‹è¡¨', match: ['800ä¸‡å††ä»¥ä¸‹', '33ä¸‡å††', '30ä¸‡å††', '6ä¸‡å††'], desc: 'ä¸»è¦ä¾¡æ ¼å¸¯ã®ä»²ä»‹æ‰‹æ•°æ–™ä¸€è¦§' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã¯é«˜ã„ï¼Ÿé©æ­£é¡ã®åˆ¤æ–­æ–¹æ³•', match: ['é«˜ã„', 'é«˜ã™ãã‚‹', 'é«˜ã„ç†ç”±'], desc: 'ç›¸å ´ã¨ã®æ¯”è¼ƒã§åˆ¤æ–­' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã¯ä½•ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆï¼Ÿ', match: ['ä½•ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆ', '3ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆ', '4ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆ', '6ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆ', 'ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆ'], desc: 'ä¾¡æ ¼å¸¯åˆ¥ã®æ‰‹æ•°æ–™ç‡' },
      { title: 'å…·ä½“çš„ãªè¨ˆç®—ä¾‹', match: ['0.5', '0.55', '1.1', '2', '3', '3.3', '4', '5', '6', '50', '55', '100', '50ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆ', '55ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆ', '100ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆ'], desc: 'å„ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆãƒ»é‡‘é¡ã§ã®è¨ˆç®—çµæœ' },
    ],
    links: { cta: 'â‘  è¨ˆç®—ãƒ„ãƒ¼ãƒ«', parent: 'â‘¡ ãƒ”ãƒ©ãƒ¼', children: [] }
  },
  {
    id: 'tax', num: 'â‘©', name: 'æ¶ˆè²»ç¨', url: '/media/brokerage/tax/',
    group: 'ä»²ä»‹æ‰‹æ•°æ–™_æ¶ˆè²»ç¨è§£èª¬', status: 'æ–°è¦', defaultStatus: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­',
    h2defs: [
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã«æ¶ˆè²»ç¨ã¯ã‹ã‹ã‚‹ï¼Ÿ', match: ['æ¶ˆè²»ç¨', 'èª²ç¨'], desc: 'ä»²ä»‹æ‰‹æ•°æ–™ã¯èª²ç¨å¯¾è±¡' },
      { title: 'ä¸å‹•ç”£å–å¼•ã®æ¶ˆè²»ç¨', match: ['ä¸å‹•ç”£'], desc: 'åœŸåœ°ã¯éèª²ç¨ã€å»ºç‰©ã¯èª²ç¨' },
      { title: 'åœŸåœ°ã®ä»²ä»‹æ‰‹æ•°æ–™ã¨æ¶ˆè²»ç¨', match: ['åœŸåœ°'], desc: 'åœŸåœ°è‡ªä½“ã¯éèª²ç¨ã ãŒæ‰‹æ•°æ–™ã«ã¯èª²ç¨' },
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã®ç¨è¾¼ãƒ»ç¨åˆ¥', match: ['ç¨è¾¼', 'ç¨', 'ç¨é‡‘', 'ç¨ç‡'], desc: 'è¡¨ç¤ºæ–¹æ³•ã¨è¨ˆç®—ã®æ³¨æ„ç‚¹' },
      { title: 'ä»•å…¥ç¨é¡æ§é™¤ãƒ»éèª²ç¨ã®æ‰±ã„', match: ['ä»•å…¥ç¨é¡æ§é™¤', 'éèª²ç¨', 'éèª²ç¨æ¥­è€…'], desc: 'äº‹æ¥­è€…å‘ã‘ã®ç¨å‹™å‡¦ç†' },
    ],
    links: { cta: 'â‘  è¨ˆç®—ãƒ„ãƒ¼ãƒ«', parent: 'â‘¡ ãƒ”ãƒ©ãƒ¼', children: [] }
  },
  {
    id: 'loan', num: 'â‘ª', name: 'ä½å®…ãƒ­ãƒ¼ãƒ³ã¨ä»²ä»‹æ‰‹æ•°æ–™', url: '/media/brokerage/housing-loan/',
    group: 'ä»²ä»‹æ‰‹æ•°æ–™_ä½å®…ãƒ­ãƒ¼ãƒ³', status: 'æ–°è¦', defaultStatus: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­',
    h2defs: [
      { title: 'ä»²ä»‹æ‰‹æ•°æ–™ã¯ä½å®…ãƒ­ãƒ¼ãƒ³ã«çµ„ã¿è¾¼ã‚ã‚‹ï¼Ÿ', match: ['ä½å®…ãƒ­ãƒ¼ãƒ³', 'ãƒ­ãƒ¼ãƒ³ã«çµ„ã¿è¾¼ã‚€', 'ãƒ­ãƒ¼ãƒ³'], desc: 'çµè«–ï¼šåŸå‰‡NGã€‚ãŸã ã—è«¸è²»ç”¨ãƒ­ãƒ¼ãƒ³ã§å¯¾å¿œå¯èƒ½' },
      { title: 'ã€ä½“é¨“è«‡ã€‘å®Ÿéš›ã«ãƒ­ãƒ¼ãƒ³ã«çµ„ã¿è¾¼ã‚“ã æµã‚Œ', match: [], desc: 'ç­†è€…ãŒå®Ÿéš›ã«çµŒé¨“ã—ãŸæ‰‹é †ãƒ»éŠ€è¡Œã¨ã®ã‚„ã‚Šå–ã‚Šãƒ»æ³¨æ„ç‚¹' },
      { title: 'è«¸è²»ç”¨ãƒ­ãƒ¼ãƒ³ã¨ã¯ï¼Ÿé‡‘åˆ©ãƒ»å¯©æŸ»ã®é•ã„', match: [], desc: 'ä½å®…ãƒ­ãƒ¼ãƒ³ã¨ã®é‡‘åˆ©å·®ã€å¯©æŸ»åŸºæº–ã®é•ã„' },
      { title: 'çµ„ã¿è¾¼ã‚€å ´åˆã®ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ', match: [], desc: 'æ‰‹å…ƒè³‡é‡‘ã‚’æ®‹ã›ã‚‹ vs ç·æ”¯æ‰•é¡ãŒå¢—ãˆã‚‹' },
      { title: 'ãƒ­ãƒ¼ãƒ³ã«çµ„ã¿è¾¼ã‚ãªã„å ´åˆã®æ”¯æ‰•ã„æ–¹æ³•', match: [], desc: 'ç¾é‡‘ä¸€æ‹¬ã€åˆ†å‰²äº¤æ¸‰ã€è«¸è²»ç”¨ãƒ­ãƒ¼ãƒ³ã®æ¯”è¼ƒ' },
    ],
    links: { cta: 'â‘  è¨ˆç®—ãƒ„ãƒ¼ãƒ«', parent: 'â‘¡ ãƒ”ãƒ©ãƒ¼', children: ['â‘¢ ä¸å‹•ç”£å£²è²·'] }
  },
];

// â”€â”€â”€ ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ â”€â”€â”€
let allRows = [];
let currentPageId = 'pillar';

// â”€â”€â”€ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç† â”€â”€â”€
const STATUS_CYCLE = ['æœªç€æ‰‹', 'åŸ·ç­†ä¸­', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­', 'å…¬é–‹æ¸ˆã¿'];
const STATUS_CLASS = { 'æœªç€æ‰‹': 'st-todo', 'åŸ·ç­†ä¸­': 'st-writing', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­': 'st-review', 'å…¬é–‹æ¸ˆã¿': 'st-done', 'å‰Šé™¤æ¸ˆã¿': 'st-deleted' };
const STATUS_COLOR = { 'æœªç€æ‰‹': '#e2e8f0', 'åŸ·ç­†ä¸­': '#3b82f6', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­': '#f59e0b', 'å…¬é–‹æ¸ˆã¿': '#059669', 'å‰Šé™¤æ¸ˆã¿': '#dc2626' };

function loadStatuses() {
  try {
    const s = JSON.parse(localStorage.getItem('cp_statuses') || '{}');
    // defaultStatusãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ãƒšãƒ¼ã‚¸ã§ã€ã¾ã localStorageã«ç„¡ã„ã‚‚ã®ã‚’ãƒãƒ¼ã‚¸
    let updated = false;
    PAGES.forEach(p => {
      if (p.defaultStatus && !s[p.id]) {
        s[p.id] = p.defaultStatus;
        updated = true;
      }
    });
    if (updated) localStorage.setItem('cp_statuses', JSON.stringify(s));
    return s;
  } catch { return {}; }
}
function saveStatuses(s) { localStorage.setItem('cp_statuses', JSON.stringify(s)); }

function getStatus(pageId) {
  const s = loadStatuses();
  if (s[pageId]) return s[pageId];
  const page = PAGES.find(p => p.id === pageId);
  return (page && page.defaultStatus) || 'æœªç€æ‰‹';
}
function cycleStatus(pageId) {
  const s = loadStatuses();
  const cur = s[pageId] || 'æœªç€æ‰‹';
  const idx = STATUS_CYCLE.indexOf(cur);
  s[pageId] = STATUS_CYCLE[(idx + 1) % STATUS_CYCLE.length];
  saveStatuses(s);
  renderStatusDashboard();
  renderSidebar();
  renderPage(currentPageId);
}

function renderStatusDashboard() {
  const statuses = loadStatuses();
  const counts = { 'æœªç€æ‰‹': 0, 'åŸ·ç­†ä¸­': 0, 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­': 0, 'å…¬é–‹æ¸ˆã¿': 0, 'å‰Šé™¤æ¸ˆã¿': 0 };
  PAGES.forEach(p => { counts[statuses[p.id] || (p.deleted ? 'å‰Šé™¤æ¸ˆã¿' : 'æœªç€æ‰‹')]++; });
  const total = PAGES.length;
  const activeTotal = total - counts['å‰Šé™¤æ¸ˆã¿'];

  let html = '<div class="sd-title">é€²æ—ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ <span style="font-size:9px;color:#94a3b8;cursor:pointer;margin-left:auto" onclick="if(confirm(\'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ\')){localStorage.removeItem(\'cp_statuses\');renderStatusDashboard();renderSidebar();renderPage(currentPageId);}">ãƒªã‚»ãƒƒãƒˆ</span></div>';

  // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ï¼ˆå‰Šé™¤æ¸ˆã¿ã‚’é™¤å¤–ï¼‰
  html += '<div class="sd-progress">';
  html += '<div class="seg seg-done" style="width:' + (activeTotal > 0 ? counts['å…¬é–‹æ¸ˆã¿']/activeTotal*100 : 0) + '%"></div>';
  html += '<div class="seg seg-review" style="width:' + (activeTotal > 0 ? counts['ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­']/activeTotal*100 : 0) + '%"></div>';
  html += '<div class="seg seg-writing" style="width:' + (activeTotal > 0 ? counts['åŸ·ç­†ä¸­']/activeTotal*100 : 0) + '%"></div>';
  html += '<div class="seg seg-todo" style="width:' + (activeTotal > 0 ? counts['æœªç€æ‰‹']/activeTotal*100 : 0) + '%"></div>';
  html += '</div>';

  // å‡¡ä¾‹
  html += '<div class="sd-legend">';
  html += '<span><span class="dot" style="background:#059669"></span>å…¬é–‹æ¸ˆã¿ ' + counts['å…¬é–‹æ¸ˆã¿'] + '</span>';
  html += '<span><span class="dot" style="background:#f59e0b"></span>ãƒ¬ãƒ“ãƒ¥ãƒ¼ ' + counts['ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­'] + '</span>';
  html += '<span><span class="dot" style="background:#3b82f6"></span>åŸ·ç­†ä¸­ ' + counts['åŸ·ç­†ä¸­'] + '</span>';
  html += '<span><span class="dot" style="background:#e2e8f0"></span>æœªç€æ‰‹ ' + counts['æœªç€æ‰‹'] + '</span>';
  if (counts['å‰Šé™¤æ¸ˆã¿'] > 0) html += '<span><span class="dot" style="background:#dc2626"></span>å‰Šé™¤ ' + counts['å‰Šé™¤æ¸ˆã¿'] + '</span>';
  html += '</div>';

  // ãƒšãƒ¼ã‚¸åˆ¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨
  html += '<div class="sd-table">';
  PAGES.forEach(p => {
    const st = statuses[p.id] || 'æœªç€æ‰‹';
    const cls = STATUS_CLASS[st];
    html += '<div class="sd-row">';
    html += '<span class="sd-num">' + p.num + '</span>';
    html += '<span class="sd-name">' + esc(p.name) + '</span>';
    html += '<span class="sd-badge ' + cls + '" onclick="cycleStatus(\'' + p.id + '\')">' + st + '</span>';
    html += '</div>';
  });
  html += '</div>';

  document.getElementById('statusDashboard').innerHTML = html;
}

async function loadData() {
  const bar = document.getElementById('loadbar');
  try {
    const res = await fetch(encodeURIComponent('ä»²ä»‹æ‰‹æ•°æ–™_åˆ¤å®šæ¸ˆã¿.tsv') + '?t=' + Date.now());
    const text = await res.text();
    const lines = text.trim().split('\n').map(r => r.split('\t'));
    const hdr = lines[0];
    const cm = {};
    hdr.forEach((h, i) => { cm[h.trim()] = i; });
    const g = (r, n) => { const i = cm[n]; return i !== undefined && i < r.length ? (r[i]||'').trim() : ''; };

    for (let i = 1; i < lines.length; i++) {
      const r = lines[i];
      if (r.length < 6) continue;
      const hantei = g(r, 'åˆ¤å®š');
      if (hantei === 'å‰Šé™¤') continue;
      const cat = g(r, 'No') ? 'ä»²ä»‹æ‰‹æ•°æ–™' : 'ä»²ä»‹æ‰‹æ•°æ–™';
      const kw = g(r, 'ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰');
      const vol = parseInt(g(r, 'æœˆé–“æ¤œç´¢æ•°')) || 0;
      // ã‚µãƒ–KW: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰ã‚«ãƒ†ã‚´ãƒªåã‚’é™¤ã„ãŸå·®åˆ†
      const kwTokens = kw.split(/\s+/);
      const catTokens = new Set('ä»²ä»‹æ‰‹æ•°æ–™'.split(/\s+/));
      const sub = kwTokens.filter(w => !catTokens.has(w));
      const subKw = sub.length > 0 ? sub.join(' ') : '';

      allRows.push({
        kw, vol, subKw, hantei,
        pageGroup: g(r, 'ãƒšãƒ¼ã‚¸ã‚°ãƒ«ãƒ¼ãƒ—'),
        articleTitle: g(r, 'æƒ³å®šãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«'),
        intent: g(r, 'æ¤œç´¢æ„å›³'),
        need: g(r, 'è§£æ±ºãƒ‹ãƒ¼ã‚º'),
        kd: g(r, 'SEOé›£æ˜“åº¦'),
      });
    }
    if (bar) bar.style.width = '100%';
  } catch (e) {
    document.getElementById('main').innerHTML = '<div class="empty">TSVãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ</div>';
    return;
  }

  renderStatusDashboard();
  renderSidebar();
  renderPage(currentPageId);
  updateTopStats();
}

function esc(s) { return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

// â”€â”€â”€ KWã‚’H2ã«å‰²ã‚Šå½“ã¦ â”€â”€â”€
function assignKeywords(page) {
  const rows = allRows.filter(r => r.pageGroup === page.group);
  const h2s = page.h2defs.map(d => ({ ...d, keywords: [] }));
  const unassigned = [];
  const h1Keywords = [];

  rows.forEach(r => {
    // ã‚µãƒ–KWãŒç©º = ã‚«ãƒ†ã‚´ãƒªåãã®ã‚‚ã® = H1ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
    if (!r.subKw) {
      h1Keywords.push(r);
      return;
    }

    let matched = false;
    for (const h2 of h2s) {
      for (const pat of h2.match) {
        // ã‚µãƒ–KWãŒãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å«ã‚€ã‹ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚µãƒ–KWã‚’å«ã‚€ã‹
        if (r.subKw === pat || r.subKw.includes(pat) || pat.includes(r.subKw)) {
          h2.keywords.push(r);
          matched = true;
          break;
        }
      }
      if (matched) break;
    }
    if (!matched) {
      // éƒ¨åˆ†ä¸€è‡´: ã‚µãƒ–KWã®æœ€åˆã®ãƒˆãƒ¼ã‚¯ãƒ³ã§ãƒãƒƒãƒ
      const firstToken = r.subKw.split(/\s+/)[0];
      for (const h2 of h2s) {
        if (h2.match.some(p => p.includes(firstToken) || firstToken.includes(p))) {
          h2.keywords.push(r);
          matched = true;
          break;
        }
      }
    }
    if (!matched) unassigned.push(r);
  });

  // å„H2å†…ã‚’volé™é †
  h2s.forEach(h => h.keywords.sort((a, b) => b.vol - a.vol));
  h1Keywords.sort((a, b) => b.vol - a.vol);

  const totalKw = rows.length;
  const assignedKw = totalKw - unassigned.length;
  const coverRate = totalKw > 0 ? Math.round(assignedKw / totalKw * 100) : 100;
  const totalVol = rows.reduce((s, r) => s + r.vol, 0);

  return { h2s, h1Keywords, unassigned, totalKw, assignedKw, coverRate, totalVol, rows };
}

// â”€â”€â”€ ã‚µã‚¤ãƒ‰ãƒãƒ¼æç”» â”€â”€â”€
function renderSidebar() {
  let html = '';
  let coverHtml = '<div class="label">ã‚«ãƒãƒ¼ç‡ã‚µãƒãƒªãƒ¼</div>';

  PAGES.forEach(p => {
    const result = assignKeywords(p);
    const coverCls = result.coverRate >= 95 ? 'ok' : result.coverRate >= 80 ? 'warn' : 'bad';
    const coverIcon = result.coverRate >= 95 ? 'âœ…' : result.coverRate >= 80 ? 'âš ï¸' : 'âŒ';
    const active = p.id === currentPageId ? ' active' : '';
    const deletedCls = p.deleted ? ' deleted' : '';

    html += '<div class="page-item' + active + deletedCls + '" onclick="selectPage(\'' + p.id + '\')">';
    const pSt = getStatus(p.id);
    const pStCls = STATUS_CLASS[pSt];
    html += '<div class="num">' + p.num + ' <span class="sd-badge ' + pStCls + '" style="font-size:8px;padding:0px 5px">' + pSt + '</span></div>';
    html += '<div class="name">' + esc(p.name) + '</div>';
    html += '<div class="meta"><span>' + result.totalKw + 'KW</span><span>' + result.totalVol.toLocaleString() + 'vol</span>';
    html += '<span class="cover ' + coverCls + '">' + coverIcon + ' ' + result.coverRate + '%</span></div>';
    html += '</div>';

    coverHtml += '<div class="cover-row"><span class="pname">' + p.num + ' ' + esc(p.name) + '</span>';
    coverHtml += '<span class="cover ' + coverCls + '">' + result.coverRate + '%</span></div>';
  });

  document.getElementById('pageList').innerHTML = html;
  document.getElementById('coverSummary').innerHTML = coverHtml;
}

// â”€â”€â”€ ãƒ¡ã‚¤ãƒ³æç”» â”€â”€â”€
function renderPage(pageId) {
  const page = PAGES.find(p => p.id === pageId);
  if (!page) return;

  const result = assignKeywords(page);
  let html = '';

  // ãƒ˜ãƒƒãƒ€ãƒ¼
  html += '<div class="page-header">';
  const pageStatus = getStatus(pageId);
  const stCls = STATUS_CLASS[pageStatus];
  html += '<div class="num-label">' + page.num + ' <span class="sd-badge ' + stCls + '" onclick="cycleStatus(\'' + pageId + '\')" style="font-size:10px;vertical-align:middle">' + pageStatus + '</span></div>';
  html += '<div class="title">' + esc(page.name) + '</div>';
  html += '<a class="url" href="http://localhost:3002' + page.url + '" target="_blank">' + page.url + '</a>';
  html += '<div class="page-meta">';
  html += '<span>å¯¾è±¡KW: <span class="val">' + result.totalKw + '</span></span>';
  html += '<span>æœˆé–“Vol: <span class="val">' + result.totalVol.toLocaleString() + '</span></span>';
  html += '<span>ã‚«ãƒãƒ¼ç‡: <span class="val">' + result.coverRate + '%</span></span>';
  html += '</div></div>';

  // å‰Šé™¤æ¸ˆã¿é€šçŸ¥
  if (page.deleted && page.deletedReason) {
    html += '<div class="deleted-notice">';
    html += '<div class="dn-title">ğŸ—‘ ã“ã®ãƒšãƒ¼ã‚¸ã¯å‰Šé™¤ã•ã‚Œã¾ã—ãŸ</div>';
    html += '<div class="dn-reason"><ul>';
    page.deletedReason.forEach(r => { html += '<li>' + esc(r) + '</li>'; });
    html += '</ul></div></div>';
  }

  // H1
  const h1Title = result.rows.length > 0 ? (result.rows[0].articleTitle || page.name) : page.name;
  html += '<div class="h1-bar">';
  html += '<div class="h1-label">H1</div>';
  html += '<div class="h1-title">' + esc(h1Title) + '</div>';
  if (result.h1Keywords.length > 0) {
    html += '<div class="h1-kw">ãƒ¡ã‚¤ãƒ³KW: ' + result.h1Keywords.map(r => esc(r.kw) + ' (' + r.vol.toLocaleString() + ')').join('ã€€') + '</div>';
  }
  html += '</div>';

  // ãƒªãƒ³ã‚¯ãƒãƒƒãƒ—ï¼ˆãƒ”ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã®å ´åˆï¼‰
  const hasLinks = page.h2defs.some(d => d.linkTo);
  if (hasLinks) {
    html += '<div class="link-map">';
    html += '<div class="lm-title">ğŸ”— ãƒªãƒ³ã‚¯æ§‹é€ ãƒãƒƒãƒ— â€” ã“ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰å„å­ãƒšãƒ¼ã‚¸ã¸</div>';
    page.h2defs.forEach(d => {
      if (d.linkTo) {
        const dest = PAGES.find(p => p.id === d.linkTo);
        if (dest) {
          html += '<div class="lm-row">';
          html += '<span class="lm-h2">H2: ' + esc(d.title) + '</span>';
          html += '<span class="lm-arrow">â†’</span>';
          html += '<span class="lm-dest" onclick="selectPage(\'' + dest.id + '\')">' + dest.num + ' ' + esc(dest.name) + '</span>';
          html += '</div>';
        }
      }
    });
    html += '</div>';
  }

  // H2ã‚«ãƒ¼ãƒ‰
  result.h2s.forEach((h2, idx) => {
    const h2Vol = h2.keywords.reduce((s, r) => s + r.vol, 0);
    html += '<div class="h2-card">';
    html += '<div class="h2-header">';
    html += '<span class="h2-tag">H2</span>';
    html += '<span class="h2-title">' + esc(h2.title) + '</span>';
    if (h2.linkTo) {
      const dest = PAGES.find(p => p.id === h2.linkTo);
      if (dest) {
        html += '<span class="h2-link-badge" onclick="selectPage(\'' + dest.id + '\')" style="cursor:pointer">â†’ ' + esc(h2.linkLabel || dest.name) + '</span>';
      }
    }
    html += '<span class="h2-stats">' + h2.keywords.length + 'KW / ' + h2Vol.toLocaleString() + 'vol</span>';
    html += '</div>';
    html += '<div class="h2-body">';

    if (h2.desc) {
      html += '<div class="h2-desc">' + esc(h2.desc) + '</div>';
    }

    if (h2.keywords.length > 0) {
      html += '<div class="kw-list">';
      h2.keywords.forEach((r, ki) => {
        const cls = ki === 0 ? ' main-kw' : '';
        html += '<span class="kw-chip' + cls + '"><span class="kw-name">' + esc(r.subKw || r.kw) + '</span><span class="kw-vol">' + r.vol.toLocaleString() + '</span></span>';
      });
      html += '</div>';
    } else if (h2.linkTo) {
      const dest = PAGES.find(p => p.id === h2.linkTo);
      const destResult = dest ? assignKeywords(dest) : null;
      const destKwCount = destResult ? destResult.totalKw : '?';
      const destVol = destResult ? destResult.totalVol.toLocaleString() : '?';
      html += '<div style="font-size:11px;color:#059669;font-weight:600">ğŸ“„ ã“ã®H2ã¯è¦ç´„ï¼ˆ200ã€œ300å­—ï¼‰â†’ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ ' + (dest ? dest.num + ' ' + esc(dest.name) : '') + ' ã§ç®¡ç†ï¼ˆ' + destKwCount + 'KW / ' + destVol + 'volï¼‰</div>';
    } else {
      html += '<div style="font-size:11px;color:#94a3b8">ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æœªå‰²å½“ â€” ã©ã®H2ã«å…¥ã‚Œã‚‹ã‹è¦æ¤œè¨ï¼‰</div>';
    }

    html += '</div></div>';
  });

  // æœªå‰²å½“KW
  if (result.unassigned.length > 0) {
    html += '<div class="unassigned">';
    html += '<div class="ua-title">âš  æœªå‰²å½“ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆ' + result.unassigned.length + 'ä»¶ï¼‰â€” ã©ã®H2ã«å…¥ã‚Œã‚‹ã‹è¦æ¤œè¨</div>';
    html += '<div class="kw-list">';
    result.unassigned.sort((a, b) => b.vol - a.vol).forEach(r => {
      html += '<span class="kw-chip"><span class="kw-name">' + esc(r.kw) + '</span><span class="kw-vol">' + r.vol.toLocaleString() + '</span></span>';
    });
    html += '</div></div>';
  }

  // å†…éƒ¨ãƒªãƒ³ã‚¯è¨­è¨ˆ
  if (page.links) {
    html += '<div class="internal-links">';
    html += '<div class="il-title">ğŸ”— å†…éƒ¨ãƒªãƒ³ã‚¯è¨­è¨ˆ</div>';
    if (page.links.parent) {
      html += '<div class="il-item"><span class="il-dir">â† ãƒ‘ãƒ³ããš:</span> ' + esc(page.links.parent) + ' ã«æˆ»ã‚‹</div>';
    }
    if (page.links.cta) {
      html += '<div class="il-item"><span class="il-dir">â†’ CTA:</span> ' + esc(page.links.cta) + '</div>';
    }
    if (page.links.children && page.links.children.length > 0) {
      html += '<div class="il-item"><span class="il-dir">â†’ å­ãƒšãƒ¼ã‚¸:</span> ' + page.links.children.map(c => esc(c)).join(', ') + '</div>';
    }
    html += '</div>';
  }

  // ãƒ•ãƒƒã‚¿ãƒ¼
  html += '<div class="page-footer">';
  html += '<div class="footer-title">ğŸ“Š ã“ã®ãƒšãƒ¼ã‚¸ã®KWçµ±è¨ˆ</div>';
  html += '<div class="footer-stats">';
  html += '<span>å¯¾è±¡KW: <span class="val">' + result.totalKw + '</span></span>';
  html += '<span>å‰²å½“æ¸ˆ: <span class="val">' + result.assignedKw + '</span></span>';
  html += '<span>æœªå‰²å½“: <span class="val" style="color:' + (result.unassigned.length > 0 ? '#dc2626' : '#059669') + '">' + result.unassigned.length + '</span></span>';
  html += '<span>ã‚«ãƒãƒ¼ç‡: <span class="val">' + result.coverRate + '%</span></span>';
  html += '</div>';
  html += '<a class="kw-link" href="index.html" target="_blank">ğŸ”— ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã§ç¢ºèªï¼ˆãƒšãƒ¼ã‚¸ã‚°ãƒ«ãƒ¼ãƒ—: ' + esc(page.group) + 'ï¼‰</a>';
  html += '</div>';

  document.getElementById('main').innerHTML = html;
}

function updateTopStats() {
  let totalKw = 0, totalVol = 0, totalAssigned = 0;
  const activePages = PAGES.filter(p => !p.deleted);
  activePages.forEach(p => {
    const r = assignKeywords(p);
    totalKw += r.totalKw;
    totalVol += r.totalVol;
    totalAssigned += r.assignedKw;
  });
  const rate = totalKw > 0 ? Math.round(totalAssigned / totalKw * 100) : 100;
  const deletedCount = PAGES.length - activePages.length;
  let statsText = activePages.length + 'ãƒšãƒ¼ã‚¸ / ' + totalKw.toLocaleString() + 'KW / ' + totalVol.toLocaleString() + 'vol / ã‚«ãƒãƒ¼ç‡: ' + rate + '%';
  if (deletedCount > 0) statsText += ' ï¼ˆå‰Šé™¤: ' + deletedCount + 'ï¼‰';
  document.getElementById('topStats').textContent = statsText;
}

function selectPage(id) {
  currentPageId = id;
  renderSidebar();
  renderPage(id);
  document.getElementById('main').scrollTop = 0;
}

loadData();
</script>
</body>
</html>
