# シミュレーター作成手順

新しいシミュレーターを作成する際のステップバイステップガイドです。

---

## 📋 作成フロー概要

```
1. 文言チェックリスト確認（必須・最初に読む）
   ↓
2. リサーチ（計算ロジック・エビデンス収集）
   ↓
3. 設計（入力項目・出力項目・早見表）
   ↓
4. 実装（テンプレートから作成）
   ↓
5. 文言チェック（断定表現・非弁行為の確認）
   ↓
6. テスト（計算結果の検証）
   ↓
7. リーガルチェック依頼
   ↓
8. 公開
```

---

## Step 1: 文言チェックリスト確認（必須）

**⚠️ シミュレーター作成前に必ず以下を確認してください**

📄 **`docs/07_SEO_シミュレーター/文言チェックリスト.md`**

### 確認すべき内容
- 断定表現はNG（「〜です」→「〜とされています」）
- FAQ/Q&AはNG（削除済み）
- アドバイスはNG（「〜した方がいい」「〜がおすすめ」）
- 数字は「約」をつける
- 免責事項は必須

### 前提の理解
当サイト運営者は税理士・弁護士・宅建士などの資格を保有していないため、
**「情報提供」と「計算ツールの提供」のみ**を行います。

---

## Step 2: リサーチ（計算ロジック・エビデンス収集）

### 1-1. 公式ソースを確認

| カテゴリ | 確認先 |
|---------|--------|
| 税金関連 | 国税庁 https://www.nta.go.jp/ |
| 不動産取引 | 国土交通省 https://www.mlit.go.jp/ |
| 宅建業法 | 宅建業法施行規則 |
| 地方税 | 各都道府県の税務ページ |
| 登記関連 | 法務局 https://houmukyoku.moj.go.jp/ |

### 1-2. 調査テンプレート

以下の項目を調査してメモする：

```markdown
## [ツール名] リサーチメモ

### 基本情報
- 正式名称：
- 根拠法令：
- 管轄省庁：

### 計算式
- 基本計算式：
- 特例・軽減措置：
- 税率・料率：

### エビデンス（公式ソース）
1. [タイトル](URL) - 概要
2. [タイトル](URL) - 概要

### 競合ツール調査
1. [サイト名](URL) - 特徴・差別化ポイント

### 注意点・免責事項に記載すべき内容
-
```

### 1-3. 競合ツール調査

`docs/07_SEO/競合ツール一覧.md` を参照し、以下を確認：
- 競合の入力項目
- 競合の出力形式
- 競合にない付加価値（差別化ポイント）

---

## Step 3: 設計

### 2-1. 入力項目の設計

```markdown
| 項目名 | 型 | 必須 | 単位 | バリデーション |
|--------|-----|------|------|----------------|
| 売買価格 | number | ○ | 円 | 0以上 |
| 築年数 | number | - | 年 | 0-100 |
```

### 2-2. 出力項目の設計

```markdown
| 項目名 | 計算式 | 表示形式 |
|--------|--------|----------|
| 税額（税抜） | price * rate | ○○円 |
| 消費税 | tax * 0.1 | ○○円 |
| 合計（税込） | tax + consumption | ○○円（強調表示） |
```

### 2-3. 早見表データ

よく検索される価格帯（SEOキーワードから逆算）：
- 「仲介手数料 3000万」→ 3,000万円を含める
- 「贈与税 1000万」→ 1,000万円を含める

---

## Step 4: 実装

### 3-1. テンプレートコピー

```bash
# ツール名: gift-tax（贈与税の例）
mkdir app/tools/gift-tax
cp app/tools/_template/page.tsx app/tools/gift-tax/
cp app/tools/_template/ToolNameCalculator.tsx app/tools/gift-tax/GiftTaxCalculator.tsx
cp lib/calculators/_template.ts lib/calculators/gift-tax.ts
```

### 3-2. 編集箇所チェックリスト

- [ ] `page.tsx`: メタデータ（title, description, keywords, OGP）
- [ ] `page.tsx`: 構造化データ（WebApplication, BreadcrumbList）
- [ ] `Calculator.tsx`: コンポーネント名
- [ ] `Calculator.tsx`: 早見表データ
- [ ] `Calculator.tsx`: パンくず
- [ ] `Calculator.tsx`: タイトル・説明文
- [ ] `Calculator.tsx`: 入力項目
- [ ] `Calculator.tsx`: 計算ロジック呼び出し
- [ ] `Calculator.tsx`: 結果表示
- [ ] `Calculator.tsx`: 解説セクション
- [ ] `calculator.ts`: 計算ロジック実装

---

## Step 5: 文言チェック

### 5-1. 断定表現の確認

`文言チェックリスト.md` を参照し、以下を確認：

- [ ] 「〜です」の断定が最小限
- [ ] 「一般的に」「約」「程度」「とされています」を使用
- [ ] FAQ/Q&Aセクションがないこと
- [ ] アドバイス表現（「〜すべき」「おすすめ」）がないこと
- [ ] 免責事項が記載されていること

### 5-2. 非弁行為チェック

- [ ] 法律相談・法的アドバイスに該当しないこと
- [ ] 税務相談・節税アドバイスに該当しないこと
- [ ] 「情報提供」と「計算ツール提供」の範囲に留まっていること

---

## Step 6: テスト

### 4-1. 計算結果の検証

| テストケース | 入力値 | 期待値 | 実際の値 | 結果 |
|-------------|--------|--------|---------|------|
| ケース1 | 1,000万円 | 〇〇円 | | |
| ケース2 | 3,000万円 | 〇〇円 | | |
| 境界値 | 400万円 | 〇〇円 | | |

### 4-2. 検証方法

1. 公式の計算例と照合
2. 競合ツールの結果と比較
3. 税理士・専門家に確認（可能であれば）

---

## Step 7: リーガルチェック依頼

### 5-1. チェック依頼テンプレート

```
【シミュレーター名】〇〇シミュレーター
【URL】https://www.ooya.tech/tools/xxx

【確認事項】
1. 計算ロジックの正確性
2. 免責事項の文言
3. 法改正への対応状況

【参照した公式ソース】
- [国税庁](URL)
- ...

【懸念点】
- ...
```

### 5-2. ステータス更新

`docs/07_SEO/シミュレーターステータス一覧.md` を更新

---

## Step 8: 公開

### 8-1. 公開前チェックリスト

- [ ] 計算結果が正確
- [ ] 早見表データが正確
- [ ] 文言チェック完了（断定表現なし、非弁行為なし）
- [ ] メタデータが設定済み
- [ ] 構造化データが出力される
- [ ] モバイル表示確認
- [ ] リーガルチェック完了（または依頼済み）
- [ ] `シミュレーターステータス一覧.md` 更新

### 8-2. リンク追加（必須）

**新しいシミュレーターを公開したら、以下にリンクを追加：**

1. **トップページ** (`app/LandingPageClient.tsx`)
   - `tools` 配列に追加
   - `available: true` に設定

2. **ツール一覧ページ** (`app/tools/page.tsx`)
   - `tools` 配列に追加
   - `available: true` に設定

```tsx
// 追加例
{ name: '〇〇税', description: '〇〇を計算', href: '/tools/xxx', available: true },
```

### 8-3. 公開後

- Google Search Console でインデックス登録リクエスト
- アクセス解析で効果測定

---

## 📁 関連ファイル

| ファイル | 用途 |
|---------|------|
| **`docs/07_SEO_シミュレーター/文言チェックリスト.md`** | **⚠️ 必読：断定表現・非弁行為チェック** |
| `app/tools/_template/` | テンプレートファイル |
| `app/tools/template-demo/` | テンプレートデモページ |
| `lib/calculators/` | 計算ロジック |
| `app/LandingPageClient.tsx` | トップページ（リンク追加先） |
| `app/tools/page.tsx` | ツール一覧ページ（リンク追加先） |
| `docs/07_SEO_シミュレーター/シミュレーターステータス一覧.md` | 進捗管理 |
| `docs/07_SEO_シミュレーター/03_競合調査/競合ツール一覧.md` | 競合調査 |
