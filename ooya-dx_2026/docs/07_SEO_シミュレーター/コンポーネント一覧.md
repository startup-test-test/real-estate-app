# シミュレーター用コンポーネント一覧

`components/tools/` にあるシミュレーター共通コンポーネントの一覧です。

---

## 一覧表

| コンポーネント | 用途 | 必須 |
|---------------|------|------|
| **ToolsBreadcrumb** | パンくずリスト | ○ |
| **NumberInput** | 数値入力フィールド | ○ |
| **QuickReferenceTable** | 早見表（2列） | ○ |
| **QuickReferenceTable3Col** | 早見表（3列・比較用） | △ |
| **ResultCard** | 計算結果カード | △ |
| **TableOfContents** | 目次（連番自動付与） | ○ |
| **SectionHeading** | セクション見出し（連番自動付与） | ○ |
| **CalculatorNote** | シミュレーター直下の注記 | ○ |
| **ToolDisclaimer** | 記事末尾の免責事項 | ○ |

---

## 各コンポーネント詳細

### 1. ToolsBreadcrumb

**パンくずリスト**

```tsx
import { ToolsBreadcrumb } from '@/components/tools/ToolsBreadcrumb'

<ToolsBreadcrumb currentPage="贈与税シミュレーター" />
```

| Props | 型 | 説明 |
|-------|-----|------|
| `currentPage` | string | 現在のページ名（例: 贈与税シミュレーター） |

**出力例:**
```
ホーム > 不動産・賃貸経営計算ツール > 贈与税シミュレーター
```

**特徴:**
- 中間階層名（`不動産・賃貸経営計算ツール`）は `TOOLS_CATEGORY_NAME` 定数で1箇所管理
- 変更時は `ToolsBreadcrumb.tsx` の定数を変更するだけでOK

---

### 2. NumberInput

**数値入力フィールド（カンマ区切り対応）**

```tsx
import { NumberInput } from '@/components/tools/NumberInput'

<NumberInput
  label="売買価格"
  value={priceInMan}
  onChange={setPriceInMan}
  unit="万円"
  placeholder="0"
/>
```

| Props | 型 | デフォルト | 説明 |
|-------|-----|-----------|------|
| `label` | string | - | ラベル（必須） |
| `value` | number | - | 値（必須） |
| `onChange` | (value: number) => void | - | 変更時のコールバック（必須） |
| `unit` | string | "円" | 単位 |
| `placeholder` | string | "0" | プレースホルダー |
| `min` | number | 0 | 最小値 |
| `max` | number | 999999999999 | 最大値 |

**特徴:**
- 自動的にカンマ区切りで表示
- `inputMode="numeric"` でスマホで数字キーボード表示
- 黄色ボーダーで入力欄を強調

---

### 3. QuickReferenceTable

**早見表**

```tsx
import { QuickReferenceTable, QuickReferenceRow } from '@/components/tools/QuickReferenceTable'

const data: QuickReferenceRow[] = [
  { label: '1,000万円', value: '39.6万円', subValue: '税抜36万円' },
  { label: '2,000万円', value: '72.6万円', subValue: '税抜66万円' },
]

<QuickReferenceTable
  title="仲介手数料早見表"
  description="売買価格別の仲介手数料上限（税込）"
  headers={['売買価格', '仲介手数料（税込）']}
  rows={data}
  note="※上記は上限金額です"
/>
```

| Props | 型 | 説明 |
|-------|-----|------|
| `title` | string | 表のタイトル（必須） |
| `description` | string | 説明文 |
| `headers` | [string, string] | ヘッダー2列（必須） |
| `rows` | QuickReferenceRow[] | データ行（必須） |
| `note` | string | 表下の注記 |

**QuickReferenceRow:**
```ts
{
  label: string    // 左列（例: "1,000万円"）
  value: string    // 右列（例: "39.6万円"）
  subValue?: string // 右列の補足（例: "税抜36万円"）
}
```

---

### 3-2. QuickReferenceTable3Col

**早見表（3列・比較用）**

2つの値を比較したい場合に使用します（例: 特例税率 vs 一般税率）。

```tsx
import { QuickReferenceTable3Col } from '@/components/tools/QuickReferenceTable'

<QuickReferenceTable3Col
  title="贈与税額早見表（暦年課税）"
  description="基礎控除110万円を差し引いた後の税額を表示しています。"
  headers={[
    '贈与金額',
    { title: '特例税率', sub: '父母・祖父母→子・孫' },
    { title: '一般税率', sub: 'その他の贈与' },
  ]}
  rows={[
    { label: '100万円', value1: '0円', value2: '0円' },
    { label: '200万円', value1: '9万円', value2: '9万円' },
    { label: '300万円', value1: '19万円', value2: '19万円' },
  ]}
  note="※特例税率は贈与を受けた年の1月1日時点で18歳以上の場合に適用"
/>
```

| Props | 型 | 説明 |
|-------|-----|------|
| `title` | string | 表のタイトル（必須） |
| `description` | string | 説明文 |
| `headers` | [string, HeaderWithSub, HeaderWithSub] | ヘッダー3列（必須） |
| `rows` | QuickReferenceRow3Col[] | データ行（必須） |
| `note` | string | 表下の注記 |

**HeaderWithSub:**
```ts
{
  title: string   // メインタイトル（例: "特例税率"）
  sub?: string    // サブテキスト（例: "父母・祖父母→子・孫"）
}
```

**QuickReferenceRow3Col:**
```ts
{
  label: string   // 左列（例: "100万円"）
  value1: string  // 中央列（例: "0円"）
  value2: string  // 右列（例: "0円"）
}
```

**使用例:**
- 贈与税: 特例税率 vs 一般税率の比較
- 相続税: 法定相続人数別の基礎控除額
- 住宅ローン: 変動金利 vs 固定金利の比較

---

### 4. ResultCard

**計算結果カード**

```tsx
import { ResultCard } from '@/components/tools/ResultCard'

<ResultCard
  label="仲介手数料（税込）"
  value={396000}
  unit="円"
  highlight={true}
  subText="税抜: 360,000円"
/>
```

| Props | 型 | デフォルト | 説明 |
|-------|-----|-----------|------|
| `label` | string | - | ラベル（必須） |
| `value` | number | - | 値（必須） |
| `unit` | string | "円" | 単位 |
| `highlight` | boolean | false | 強調表示（青色） |
| `subText` | string | - | 補足テキスト |

---

### 5. TableOfContents & SectionHeading

**目次と見出し（連番自動付与）**

```tsx
import { TableOfContents, SectionHeading, TocItem } from '@/components/tools/TableOfContents'

// 1. 見出しデータを定義
const tocItems: TocItem[] = [
  { id: 'about', title: '仲介手数料とは', level: 2 },
  { id: 'calculation', title: '計算方法（速算式）', level: 3 },
  { id: 'rate', title: '正式な料率', level: 3 },
  { id: 'payment', title: '支払いと仕組み', level: 2 },
]

// 2. 目次を表示
<TableOfContents items={tocItems} />

// 3. セクションの見出しを表示（連番自動付与）
<SectionHeading id="about" items={tocItems} />
// → <h2 id="about">1. 仲介手数料とは</h2>

<SectionHeading id="calculation" items={tocItems} />
// → <h3 id="calculation">1-1. 計算方法（速算式）</h3>

<SectionHeading id="payment" items={tocItems} />
// → <h2 id="payment">2. 支払いと仕組み</h2>
```

**TocItem:**
```ts
{
  id: string       // アンカーID
  title: string    // 見出しタイトル
  level: 2 | 3     // h2 or h3
}
```

**自動連番ルール:**
- h2: `1`, `2`, `3`...
- h3: `1-1`, `1-2`, `2-1`, `2-2`...

**スタイル（自動適用）:**
- h2: `text-xl font-bold mt-12 mb-4 scroll-mt-32`
- h3: `text-lg font-semibold mt-8 mb-3 scroll-mt-32`

---

### 6. CalculatorNote

**シミュレーター直下の注記**

```tsx
import { CalculatorNote } from '@/components/tools/CalculatorNote'

<CalculatorNote />
```

**出力:**
```
※本計算結果は概算値です。実際の金額は異なる場合があります。
※最終的な判断は専門家（税理士・宅建業者・司法書士等）にご相談ください。
```

**配置場所:** シミュレーターボックス（青いボックス）の直後

---

### 7. ToolDisclaimer

**記事末尾の免責事項**

```tsx
import { ToolDisclaimer } from '@/components/tools/ToolDisclaimer'

// 基本の使い方
<ToolDisclaimer />

// カスタマイズする場合
<ToolDisclaimer
  lastUpdated="2026年1月15日"
  infoDate="2025年1月"
  additionalItems={[
    '金利は実際の金融機関の条件により異なります',
    '団体信用生命保険料は含まれていません',
  ]}
/>
```

| Props | 型 | デフォルト | 説明 |
|-------|-----|-----------|------|
| `lastUpdated` | string | "2026年1月15日" | 最終更新日 |
| `infoDate` | string | "2025年1月" | 情報の基準時点 |
| `additionalItems` | string[] | [] | 追加の免責事項 |

**配置場所:** 記事コンテンツの末尾、CTAセクションの直前

---

## コンポーネント配置の標準構成

```tsx
<article>
  {/* パンくず */}
  <ToolsBreadcrumb currentPage="〇〇シミュレーター" />

  {/* タイトル */}
  <h1>...</h1>

  {/* 目次 */}
  <TableOfContents items={tocItems} />

  {/* シミュレーター本体 */}
  <div className="bg-blue-50 ...">
    <NumberInput ... />
    <ResultCard ... />
  </div>

  {/* シミュレーター直下の注記 */}
  <CalculatorNote />

  {/* 早見表 */}
  <QuickReferenceTable ... />

  {/* 解説セクション */}
  <SectionHeading id="about" items={tocItems} />
  <p>...</p>

  <SectionHeading id="calculation" items={tocItems} />
  <p>...</p>

  {/* 免責事項 */}
  <ToolDisclaimer />
</article>
```

---

## プレビューページ

コンポーネントの見た目を確認:

**URL:** `/tools/components`

---

## 関連ドキュメント

- [シミュレーター作成手順](./シミュレーター作成手順.md)
- [見出し構造ルール](./見出し構造ルール.md)
- [文言チェックリスト](./文言チェックリスト.md)
