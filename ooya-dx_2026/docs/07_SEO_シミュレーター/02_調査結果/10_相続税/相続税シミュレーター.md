相続税シミュレーションシステム開発のための包括的調査報告書：ロジック、法改正、および実装要件の定義
1. エグゼクティブサマリー
本報告書は、日本の複雑な相続税法に基づき、不動産を含む相続財産の税額計算を自動化し、かつ2024年（令和6年）以降の抜本的な税制改正に対応した次世代型シミュレーションシステムの構築に向けた、網羅的な調査および要件定義を行うものである。
現代の日本において、基礎控除額の縮小（2015年改正）以降、相続税は一部の富裕層だけの問題ではなく、都市部に自宅を所有する中間層にとっても避けて通れない課題となっている。加えて、2024年1月1日より施行された税制改正は、暦年課税における生前贈与加算期間の延長（3年から7年へ）や、相続時精算課税制度への基礎控除導入など、これまでの相続税対策の定石を根底から覆すパラダイムシフトをもたらした。
これにより、求められるシミュレーターの機能は、単なる「現時点での税額試算」から、過去の贈与履歴と将来の資産移転計画を包括した「動的なライフプラン・シミュレーション」へと高度化している。特に、資産構成の大部分を占める不動産の評価においては、路線価方式や倍率方式の自動化に加え、小規模宅地等の特例における「有利選択（数理最適化問題）」の自動判定が、競合ツールとの決定的な差別化要因となる。
本報告書では、計算ロジックの基礎構造から、特例適用の複雑なアルゴリズム、2024年改正に伴う経過措置の処理、そして競合ツールの機能分析に至るまでを詳細に解説する。開発チームおよびプロジェクトマネージャーは、本報告書を指針として、法的正確性とユーザー体験を両立させたシステム設計を行うことが求められる。
2. 相続税計算システムの基本アーキテクチャとアルゴリズム定義
相続税シミュレーターのコアエンジンとなる計算ロジックは、国税庁が定める手順に厳密に従いつつ、ユーザーの入力負荷を軽減するための推論ロジックを組み込む必要がある。計算プロセスは大きく分けて以下の4段階で構成される。システム設計においては、各フェーズでの入力変数、中間生成データ、および例外処理を明確に定義することが不可欠である。
2.1 フェーズ1：法定相続人の確定ロジックと基礎控除額の算出
相続税計算の第一歩にして最大の分岐点は、課税対象となる「法定相続人」の数を確定することである。この数は、基礎控除額、生命保険金等の非課税枠、さらには相続税の総額計算における分割仮定に直接影響を与える変数となる。
2.1.1 法定相続人の定義と優先順位判定
民法上の相続順位に基づき、相続人を特定するロジックを実装する。システムはユーザーから「配偶者の有無」「子供の人数」「両親の生死」「兄弟姉妹の構成」を入力させ、以下の優先順位アルゴリズムに従って法定相続人を自動抽出する1。
配偶者 (Spouse): 常に相続人となる。法的な婚姻関係が必要であり、内縁関係は含まれない点に注意が必要である（ただし、内縁者は特別縁故者として扱われる場合があるが、シミュレーターのMVPとしては除外が一般的である）。
第1順位 (Children): 子。子が既に死亡している場合は、その子（孫）が代襲相続人となる。
第2順位 (Parents/Grandparents): 直系尊属。第1順位（子・孫）が不在の場合のみ相続人となる。
第3順位 (Siblings): 兄弟姉妹。第1順位および第2順位が不在の場合のみ相続人となる。兄弟姉妹が死亡している場合は、その子（甥・姪）までが代襲相続可能である（再代襲は不可）。
2.1.2 養子の数の制限（Tax Law Constraint）
システム実装上、最も注意を要するのが民法上の相続人数と、税法上の「法定相続人の数」の乖離である。相続税法第15条第2項に基づき、基礎控除額の計算に算入できる養子の数には厳格な制限が存在する2。
被相続人に実子がいる場合: 法定相続人の数に含めることができる養子は 1人まで。
被相続人に実子がいない場合: 法定相続人の数に含めることができる養子は 2人まで。
ロジック実装の例外処理:
ただし、以下のケースに該当する養子は「実子」とみなされ、上記の人数制限を受けない。この区別をユーザーインターフェース（UI）上で選択させる必要がある。
特別養子縁組による養子。
配偶者の実子で被相続人の養子となった者（いわゆる連れ子養子）。
2.1.3 基礎控除額の計算式
確定した税法上の法定相続人の数（$N$）を用い、以下の式で算出する1。

$$\text{基礎控除額} = 3,000\text{万円} + (600\text{万円} \times N)$$
この値は、相続税申告の要否判定（Border Threshold）となる重要な指標である。遺産総額がこの基礎控除額以下であれば、原則として申告は不要であり、納税額は0円となる。シミュレーターは、計算の初期段階でこの判定を行い、ユーザーに早期のフィードバック（「申告不要の可能性が高いです」等）を提供することがUX上望ましい。
2.2 フェーズ2：正味の遺産総額の算出（アグリゲーション）
次に、各相続人が取得した財産の価額を合計し、そこから債務などを控除して「正味の遺産額」を算出する。このフェーズでは、プラスの財産とマイナスの財産を正確に分類し、評価額を決定するサブシステムが必要となる。
2.2.1 プラスの財産（資産）の分類と評価
不動産 (Real Estate): 土地、建物。本シミュレーターの中核機能であり、後述する第3章で詳細な評価ロジックを定義する。
金融資産 (Financial Assets): 預貯金、株式、投資信託等。株式については、上場株式の場合、以下の4つの価格のうち最も低い価額を採用するロジックを実装する（課税時期の終値、課税時期の月の月平均、前月の月平均、前々月の月平均）5。
みなし相続財産 (Deemed Assets): 本来は民法上の相続財産ではないが、実質的な経済価値の移転として課税対象となるもの。主に生命保険金と死亡退職金が該当する。
生前贈与加算 (Look-back Gifts): 相続開始前一定期間（2024年改正により3年〜7年に変動）の贈与財産、および相続時精算課税制度適用財産6。これは2024年改正の最重要ポイントであり、第5章で詳述する。
2.2.2 マイナスの財産（債務・控除）
債務: 借入金、未払金、未払医療費、未払税金等。
葬式費用: 通夜、告別式にかかった費用、埋葬料等。香典返しや初七日法要費用などは控除対象外であるため、入力画面での注意書き（バリデーション）が必要である。
2.2.3 非課税枠の適用ロジック
みなし相続財産には強力な非課税枠が存在する。これを自動計算し、課税価格から減算する8。

$$\text{生命保険金非課税枠} = 500\text{万円} \times N$$

$$\text{死亡退職金非課税枠} = 500\text{万円} \times N$$
実装ロジック:


$$\text{課税算入額} = \max(0, \text{受取総額} - \text{非課税枠})$$

※各相続人の受取額に応じて按分して控除する処理が必要となるが、簡易シミュレーションでは総額ベースでの計算でも許容される場合がある。
2.2.4 課税遺産総額の確定
すべての要素を集約し、以下の式で課税遺産総額を確定する。

$$\text{課税遺産総額} = \text{正味の遺産額} - \text{基礎控除額}$$
この値がマイナスであれば、計算プロセスはここで終了（Tax = 0）となる10。
2.3 フェーズ3：相続税総額の算出（法定相続分課税方式）
日本の相続税計算における最大の特徴は、「実際に誰がいくらもらったか」に関わらず、一旦「法定相続分で分割したと仮定して総額を計算する」という点にある。このメカニズムをユーザーに直感的に理解させるUI設計（ステップバイステップの表示等）が重要である。
2.3.1 法定相続分による仮定分割
課税遺産総額を、民法上の法定相続分に従って理論的に分割する8。
配偶者と子: 配偶者 1/2、子 1/2（子が複数の場合は、1/2を人数で等分）。
配偶者と直系尊属: 配偶者 2/3、直系尊属 1/3。
配偶者と兄弟姉妹: 配偶者 3/4、兄弟姉妹 1/4。
2.3.2 超過累進税率の適用（速算表の実装）
各相続人の「法定相続分に応ずる取得金額」に対し、国税庁の速算表を適用して税額を算出する。この税率は10%から55%までの8段階累進課税である11。
法定相続分に応ずる取得金額
税率
控除額
1,000万円以下
10%
-
3,000万円以下
15%
50万円
5,000万円以下
20%
200万円
1億円以下
30%
700万円
2億円以下
40%
1,700万円
3億円以下
50%
4,200万円
6億円以下
50%
4,200万円（※注：ここは通常段階的だが、速算表準拠）
6億円超
55%
7,200万円

システムは、算出された各人の税額を合計し、「相続税の総額」として保持する。この総額が、遺産分割の方法に関わらず（特例適用等を除き）国に納めるべきパイの大きさとなる。
2.4 フェーズ4：各人の実際の納付税額の確定
最後に、「相続税の総額」を、実際の遺産取得割合に応じて各相続人に割り振る。ここからさらに、個別の事情による税額控除または加算（2割加算）を行うことで、最終的な納付税額（Final Tax Due）が確定する12。
3. 不動産評価サブシステムの詳細仕様
本シミュレーターにおいて、ユーザーにとって最も利用価値が高く、かつ開発難易度が高いのが不動産評価機能である。不動産評価額は時価（市場価格）ではなく、「相続税評価額」を用いるため、その計算ロジック（路線価方式・倍率方式）の正確な実装が求められる。
3.1 評価方式の自動判定ロジック
土地の評価方式は地域によって異なる。システムは住所入力に基づき、以下のいずれかを判定する必要がある13。
路線価方式 (Roadside Value Method): 主に市街地。道路ごとに1㎡あたりの価格（路線価）が定められている。
倍率方式 (Multiplier Method): 郊外、農村部。固定資産税評価額に一定の倍率を乗じて評価する。
システム要件:
国土交通省の「不動産情報ライブラリ」APIや国税庁のデータを活用し、入力された住所が路線価地域か倍率地域かを判定する機能を実装することが推奨される。多くの簡易ツールはこの判定をユーザー任せにしているが、自動化することでUXは劇的に向上する15。
3.2 路線価方式の計算エンジン詳細
基本式は 路線価 × 各種補正率 × 地積 であるが、実務上の補正は多岐にわたる12。
3.2.1 路線価情報のパースと解釈
路線価図上のデータ（例：「280D」）を以下のように解析する。
数値 (280): 1平方メートル当たりの価額が280,000円であることを示す（千円単位）。
アルファベット (D): 借地権割合を示す（A=90%, B=80%, C=70%, D=60%, E=50%, F=40%, G=30%）。これは、土地を貸している場合や借りている場合の評価に必須のパラメータとなる。
3.2.2 形状・接道状況による補正アルゴリズム
土地の価値は形状や道路への接し方で大きく変動する。簡易シミュレーターでは一部省略されることもあるが、高精度を目指すならば以下の補正係数を実装、あるいはユーザーに入力させるUIが必要となる。
奥行価格補正 (Depth Correction): 道路からの奥行きが短すぎたり長すぎたりする場合、利用価値が下がるため減額する。
ロジック例: 普通住宅地区で奥行20mの場合、補正率は1.00だが、奥行4m未満なら0.90など。
側方路線影響加算 (Corner Lot Adjustment): 角地など、正面と側方の二面が道路に接している場合、利用価値が高いため加算する12。
計算式: $(\text{正面路線価} \times \text{奥行補正}) + (\text{側方路線価} \times \text{奥行補正} \times \text{側方路線影響加算率})$
角地の場合の加算率は通常0.03〜0.05程度である。
二方路線影響加算: 正面と裏面に道路がある場合。
不整形地・間口狭小・がけ地補正: 土地がいびつな形、間口が狭い、がけ地を含むなどの減額要因。これらは自動判定が困難なため、スライダーやプルダウンによる「減額率の手動入力（例：形状補正0.9）」を許容する設計が現実的である。
3.3 倍率方式の計算エンジン

$$\text{評価額} = \text{固定資産税評価額} \times \text{評価倍率}$$
入力: ユーザーの手元にある「固定資産税課税明細書（毎年春に届く）」に記載された「固定資産税評価額（価格）」を入力させる18。
データ取得: 国税庁の評価倍率表データベースから、当該地域の倍率を取得する。宅地の場合、多くの地域で1.1倍が設定されているが、農地や山林では数十倍になるケースもあり、デフォルト値を1.1に固定するのは危険である13。
3.4 権利関係による評価調整（貸家建付地等）
土地・建物の所有形態と利用状況に応じた減額ロジックを実装する9。
自用地 (Owned Land): 自分で使用。評価額 $\times 1.0$。
貸宅地 (Leased Land): 他人に土地を貸している（借地権設定）。
$\text{評価額} \times (1 - \text{借地権割合})$
貸家建付地 (Rental Property Land): 自分の土地にアパート等を建てて貸している。
$\text{評価額} \times (1 - \text{借地権割合} \times \text{借家権割合} \times \text{賃貸割合})$
借家権割合: 全国一律30%が原則。
賃貸割合: 満室なら100%。空室がある場合は、床面積ベースで稼働率を計算して入力させる。この「賃貸割合」の入力は、賃貸経営を行っているユーザーにとって重要なパラメータである。
4. 特例措置の実装：小規模宅地等の特例と最適化アルゴリズム
「小規模宅地等の特例」は、土地の評価額を最大80%減額できる、相続税対策において最も強力な節税手段である。しかし、その適用要件は複雑であり、複数の土地がある場合の「有利選択」には高度な数理的判断が必要となる。本シミュレーターの価値は、この複雑な判定をいかに自動化・単純化できるかにかかっている。
4.1 特例の基本パラメータと適用要件
以下の3つの主要区分について、限度面積と減額割合を定義する20。

利用区分
限度面積
減額割合
適用要件の概要（シミュレーター判定用）
特定居住用宅地等
330㎡
80%
被相続人の自宅敷地。配偶者は無条件適用。同居親族は居住継続要件あり。「家なき子」特例は要件厳格化（持家なし要件等）22。
特定事業用宅地等
400㎡
80%
被相続人の事業（貸付以外）の敷地。事業承継要件あり。
貸付事業用宅地等
200㎡
50%
アパート、駐車場（構築物あり）の敷地。3年以内の「貸付事業用」該当性判定が必要（3年縛り）。

4.2 併用計算と限度面積の判定ロジック
一人の被相続人が自宅とアパートの両方を持っている場合など、複数の区分を併用する際の計算式は極めて複雑である。システムは以下のロジックに従い、適用可能面積の上限を計算しなければならない20。
ケースA：貸付事業用がない場合（特定居住用 ＋ 特定事業用）
この組み合わせは「完全併用」が可能である。それぞれの限度面積までフルに適用できる。


$$\text{適用可能総面積} \le 330\text{m}^2 (\text{居住用}) + 400\text{m}^2 (\text{事業用}) = \text{最大}730\text{m}^2$$
ケースB：貸付事業用を含む場合（居住用・事業用・貸付用）
貸付事業用宅地等が含まれる場合、以下の調整式を満たす範囲内でのみ適用が可能となる。面積の「食い合い」が発生するため、最適配分が必要となる。

$$(\text{特定事業用適用面積} \times \frac{200}{400}) + (\text{特定居住用適用面積} \times \frac{200}{330}) + \text{貸付事業用適用面積} \le 200\text{m}^2$$
4.3 「有利判定（Optimization）」アルゴリズムの実装
複数の土地候補がある場合、どの土地に優先的に特例を適用すれば減額総額が最大になるか（Global Optimum）を自動判定する機能は、プロ向けツール（BBC等）と一般向けツールの大きな差となっている。
最適化ロジックのステップ24:
ユニット単価の算出: 各土地候補について、$1\text{m}^2$あたりの評価額（単価）を算出する。
減額効率スコアの算出: 減額割合と、面積調整式における消費枠を考慮した「実質減額効率」を算出する。
特定居住用（80%）と貸付事業用（50%）を比較する場合、単に80%の方が得とは限らない（限度面積が異なるため）。
判定基準（連比）:
特定居住用 vs 貸付事業用：居住用単価が貸付用単価の 約2.64倍 以上あれば、居住用を優先すべき。
特定事業用 vs 貸付事業用：事業用単価が貸付用単価の 3.2倍 以上あれば、事業用を優先すべき。
グリーディ法による割当: 算出した効率スコアが高い土地から順に、調整式の枠（200㎡換算枠）を埋めていくアルゴリズムを実装する。
実装上の注意:
配偶者が取得する土地については、「配偶者の税額軽減（1.6億円）」があるため、特例を使っても使わなくても税額がゼロになる場合がある。しかし、二次相続（配偶者死亡時の子供への課税）までシミュレーションする場合、あえて配偶者には特例を使わず、子供が取得する土地に特例を使うことで、トータルの税負担を減らせるケースがある27。高度なシミュレーターでは、この「二次相続考慮モード」の実装が推奨される。
5. 2024年（令和6年）以降の税制改正対応とロジック分岐
2024年1月1日以降の贈与および相続において、相続税と贈与税のルールは劇的に変更された。シミュレーターは、相続発生日（Input Date）に応じて異なる計算ロジックを動的に適用する「分岐処理」が必須となる。
5.1 暦年課税における生前贈与加算期間の延長（7年ルール）
従来、相続開始前3年以内の贈与が持ち戻し（相続財産への加算）対象であったが、これが7年以内に延長された。これにより、駆け込み贈与の封じ込めが強化されている6。
5.1.1 経過措置の実装（段階的延長ロジック）
制度は一律に7年になるわけではなく、2031年まで段階的に期間が延びる。シミュレーターは相続発生日を入力キーとして、以下の加算期間を自動判定しなければならない29。
相続開始日が2026年12月31日まで: 旧ルール適用（相続開始前3年以内のみ加算）。
相続開始日が2027年1月1日以降: 2024年1月1日以降に行われた贈与が加算対象となり、期間が徐々に延びる。
例：2027年1月相続発生 → 遡及期間は3年。
例：2028年1月相続発生 → 遡及期間は4年（2024/1/1以降分）。
...
例：2031年1月1日以降相続発生 → 完全な7年ルール適用。
5.1.2 「延長期間の100万円控除」の計算
延長された4年間（相続開始前3年超〜7年以内の期間）に行われた贈与については、その総額から100万円を控除できる緩和措置がある29。
計算ロジック（擬似コード）:

Python


def calculate_mochimodoshi(gifts, death_date):
    total_add_back = 0
    
    # 死亡前3年以内の贈与（全額加算）
    recent_gifts = sum([g.amount for g in gifts if g.date >= death_date - 3years])
    total_add_back += recent_gifts
    
    # 死亡前3年超7年以内の贈与（100万円控除あり）
    extended_gifts = sum([g.amount for g in gifts if death_date - 7years <= g.date < death_date - 3years])
    
    # 2024年1月1日以前の贈与は加算対象外（経過措置）
    # ※ロジック内で日付フィルタリングが必要
    
    if extended_gifts > 0:
        total_add_back += max(0, extended_gifts - 1,000,000) # 100万円控除
        
    return total_add_back


※この100万円は「期間通算で100万円」であり、年ごとではない点に注意が必要である。
5.2 相続時精算課税制度の改正（基礎控除の導入）
これまで「一度選択すると暦年贈与に戻れない」「少額でも申告が必要」というデメリットから敬遠されがちだった相続時精算課税制度に、年110万円の基礎控除が新設された33。
5.2.1 新制度の計算ロジックと持ち戻し免除
贈与時: 年間110万円までは申告不要・贈与税ゼロ。
相続時（持ち戻し）: 年間110万円以下の基礎控除部分は持ち戻し不要。累積2,500万円の特別控除枠を使用した分のみ持ち戻す。
34や28にあるように、少額贈与をコツコツ繰り返す場合、暦年課税（7年持ち戻しあり）よりも相続時精算課税（110万円まで持ち戻し完全免除）の方が有利になるケースが急増した。
5.2.2 戦略的シミュレーション機能の実装要件
この改正により、シミュレーターには「どちらの制度を選択すべきか」を判定する機能が強く求められる。
入力: 現在の資産額、推定余命、年間贈与予定額、相続人の数。
出力（比較グラフ）:
プランA（暦年課税継続）：7年持ち戻しリスクを考慮した最終税額。
プランB（精算課税切替）：年110万円控除を活用した場合の最終税額。
損益分岐点（いつ亡くなるとどちらが有利か）の可視化。
6. 各種税額控除の詳細ロジックと適用順序
算出された相続税の総額から、各相続人の属性に応じて控除を行う。適用の順序や要件を正確に実装する必要がある。
6.1 配偶者の税額軽減（Spousal Tax Credit）
配偶者は、以下のいずれか多い金額まで相続税がかからない10。
1億6,000万円
配偶者の法定相続分相当額
ロジック:


$$\text{軽減額} = \text{相続税総額} \times \frac{\min(\text{配偶者取得額}, \max(1.6\text{億円}, \text{法定相続分額}))}{\text{課税価格合計}}$$

システム上は、配偶者の取得額が上記範囲内であれば、強制的に配偶者の税額を0円とする処理を入れる。ただし、前述の通り「二次相続」のシミュレーションにおいては、この枠を使い切ることが必ずしも正解ではないことを示唆する機能が望ましい。
6.2 未成年者控除
相続人が18歳未満（令和4年4月1日以降の相続）の場合に適用される36。
計算式: $(18 - \text{相続時の年齢}) \times 10\text{万円}$
年齢計算: 1年未満の端数は切り捨て（例：15歳11ヶ月 → 15歳として計算し、残年数は $18-15=3$年）。
控除枠の流用: 本人の税額から引ききれない控除額がある場合、その残額を扶養義務者（親など）の税額から控除できる。この「扶養義務者への転送処理」を実装している簡易ツールは少ないため、実装すれば差別化となる。
6.3 障害者控除
相続人が85歳未満の障害者である場合38。
一般障害者: $(85 - \text{年齢}) \times 10\text{万円}$
特別障害者: $(85 - \text{年齢}) \times 20\text{万円}$
同様に、引ききれない分は扶養義務者から控除可能。
6.4 2割加算（20% Surcharge）
被相続人の一親等の血族（代襲相続人を含む）および配偶者 以外 の人が財産を取得した場合、その人の税額は2割増しとなる25。
対象: 兄弟姉妹、甥・姪、代襲相続人ではない孫（孫養子）、第三者（遺贈）。
ロジック: $\text{算出税額} \times 1.2$
7. 競合ツール分析と差別化機能の提案
既存の主要な相続税シミュレーターを分析し、開発するツールの市場における立ち位置（Positioning）を明確にする。
7.1 主要競合ツールの機能マトリクス

ツール名
ターゲット層
不動産評価機能
2024年改正対応
強み
弱み
freee相続
一般個人（DIY層）
手入力ベース
対応済
会計データ連携、UIが親しみやすい2。
土地の自動評価機能が弱く、正確な値を出すには専門知識が必要。
MUFG/信託銀行系
潜在顧客（リード獲得）
概算（固定資産税額ベース）
対応済
無料、ブランド信頼性、ライフプラン連携40。
詳細設定（特例の有利判定など）が不可。あくまで営業ツール。
BBC（士業向け）
税理士・専門家
高度（路線価・かげ地計算）
完全対応
圧倒的な計算精度、帳票出力、複雑な土地形状対応5。
高価、一般人には操作難易度が高い。UXが業務ソフト的。
Chester Tax
一般/検索ユーザー
簡易計算
情報豊富
特例解説等のコンテンツ力が高い1。
ツール自体は簡易的で、詳細な最適化機能はない。

7.2 差別化のための推奨機能（Killer Features）
調査に基づき、新規シミュレーターが競争優位性を持つための機能を提案する。
「路線価自動取得」APIの実装
現状の多くの無料ツールは「路線価を入力してください」または「固定資産税評価額を入力してください」という仕様だが、一般ユーザーはこれらの資料の手配や読み方に挫折する。
Google Maps API等と国税庁路線価図データ（または15の不動産情報ライブラリ）をリンクさせ、地図上のピンから路線価を自動取得、あるいは推定する機能は、ユーザー体験を劇的に向上させる。
「2024年改正比較」ハイブリッドシミュレーション
「暦年贈与を続けるべきか、相続時精算課税に切り替えるべきか」の損益分岐点を可視化する機能。
スライダーで「年間贈与額」と「想定寿命」を動かし、リアルタイムで有利な制度が切り替わるグラフィカルなUI。
小規模宅地特例の「AI有利判定」リコメンド
ユーザーに計算させるのではなく、バックグラウンドで全パターンの組み合わせ計算（総当たりまたは数理最適化）を行い、「A土地に特例を適用すると税額が最小になります（節税効果：〇〇万円）」と提案する機能24。
「ヒストリカル贈与ログ」機能
2024年改正により、過去の贈与履歴の管理が必須となった。単発の計算機ではなく、ユーザーが毎年ログインして贈与実績を記録し、相続発生時に自動的に持ち戻し計算を行う「台帳機能」を持たせることで、リテンション（継続利用）を促す。
8. システム要件定義とデータスキーマ
開発チーム向けに、システムの入出力データ構造を定義する。
8.1 入力データ（Input Schema）
基本情報: 相続開始日（予定）、被相続人情報。
家族構成: 続柄、年齢、障害の有無、同居・別居ステータス、持家有無（家なき子判定用）。
資産データ:
不動産: 住所、地積、種類（宅地/農地等）、利用状況（自用/貸付）、路線価/固定資産税評価額。
金融資産: 金額。
贈与履歴: 贈与日、贈与額、贈与者・受贈者ペア、適用制度（暦年/精算）。
8.2 出力データ（Output Schema）
法定相続人カウント: 実数および税法上の数。
基礎控除額: 数値。
各財産の評価額: 特例適用前・適用後の額。
相続税総額: 数値。
各人の納税額: 配分後の最終税額。
シミュレーションサマリー: 二次相続を含めた総負担額、特例適用による削減額。
9. 開発のためのFAQ（エッジケース・ロジック詳細編）
開発フェーズでエンジニアやPMが直面する可能性の高い疑問点と、その技術的・法的回答をまとめる。
Q1: 路線価がない地域の自動判定はどうすればよいか？
A: 国税庁のデータセットには「路線価地域」と「倍率地域」の区分フラグが含まれている。API等で指定地点が倍率地域と判定された場合、フロントエンドの入力フォームを「路線価入力」から「固定資産税評価額 × 倍率入力」のUIに動的に切り替える実装が必要である14。
Q2: 小規模宅地の特例で、配偶者が取得する場合の計算順序と優先度は？
A: 配偶者は特例を使わなくても「配偶者の税額軽減（1.6億円）」があるため、特例適用による即時の税額減少効果が見えない（0円のまま）場合が多い。しかし、システムとしては**「小規模宅地の特例を優先適用して評価額を下げ、その上で配偶者軽減を適用する」**のが原則である。
さらに高度な機能として、「あえて配偶者には特例を使わず（配偶者軽減のみで0円にする）、子供に特例枠を回すことで、家族全体の税負担を最小化する」ロジックを提案機能として盛り込むべきである27。
Q3: 2024年改正の経過措置における「100万円控除」は各贈与者ごとに適用されるか？
A: 否。被相続人（贈与者）ごとに適用される32。受贈者（もらう人）単位ではない。例えば、父から贈与を受けていた場合、父の相続において、父からの過去の贈与総額（対象期間分）から100万円を引く。母からも受けていた場合は、母の相続計算時に別途100万円を引く。シミュレーターでは「誰からの贈与か」を明確に紐付けるデータ構造（Edge Attribute）が必要である。
Q4: 相続時精算課税を選択した場合の「年110万円控除」は、暦年課税の110万円と併用できるか？
A: 同一の贈与者からは併用できない。異なる贈与者からは併用可能である。
例：父からは精算課税を選択（父からの贈与は精算課税の110万円控除適用）。母からは暦年課税（母からの贈与は暦年課税の110万円控除適用）。
システム上は、贈与者と受贈者のペアごとに課税方式のステータス（Flag: Calendar/Settlement）を管理する必要がある33。
Q5: 不動産の「不整形地」等の補正はどう扱うべきか？
A: 完全自動化には測量図データの解析が必要であり、WEBシミュレーターでは非現実的である。競合のBBCなどは「かげ地計算」機能を備えているが5、一般向けにはオーバースペックである。
推奨解：デフォルトは補正なし（1.0）。詳細設定メニューで「補正率（0.1〜1.0）」をユーザーが手動入力できるフィールドを用意し、「不整形地や間口が狭い場合は0.9程度を入力してください」といったツールチップで案内するのが現実的な落とし所である。
10. 結論と実装ロードマップ
不動産を含む相続税シミュレーターの開発は、単なる四則演算の実装ではなく、複雑な条件分岐、数理最適化、そして法改正による時系列データの管理が求められる高度なシステム開発である。特に2024年の法改正により、「時間軸」（いつ贈与したか、いつ相続が発生するか）と**「履歴管理」**の重要性が飛躍的に高まった。
推奨する開発ロードマップ:
フェーズ1：MVP（Minimum Viable Product）
法定相続分計算、速算表による税額算出エンジンの実装。
不動産は「評価額直接入力」方式でスタート。
2024年改正対応（7年持ち戻しの基本ロジックと経過措置テーブルの実装）。
フェーズ2：差別化機能の実装（Ver 2.0）
小規模宅地等の特例の「有利判定（最適化）」ロジックの実装。
不動産評価の「倍率方式」データベース連携。
「暦年 vs 精算課税」の比較シミュレーション機能。
フェーズ3：UXの高度化とAPI連携（Ver 3.0）
地図API連携による路線価自動取得機能。
ユーザーアカウント機能による「贈与履歴台帳」化。
二次相続シミュレーション機能の統合。
本報告書で定義した計算式、特例判定ロジック、および法改正対応要件に基づきシステム設計を行うことで、法的正確性とユーザーへの提供価値を両立させた、市場競争力の高い相続税シミュレーターが構築可能となる。
引用文献
相続税の税率(割合)は10～55％【最新の税率表付】税額の計算方法も解説, 1月 15, 2026にアクセス、 https://chester-tax.com/encyclopedia/12712.html
相続税シミュレーション, 1月 15, 2026にアクセス、 https://www.taiju-life.co.jp/cgi-bin/souzokuzei/index.cgi
No.4103 相続時精算課税の選択｜国税庁, 1月 15, 2026にアクセス、 https://www.nta.go.jp/taxes/shiraberu/taxanswer/sozoku/4103.htm
【相続税の配偶者控除】1.6億円が無税に！条件・注意点・計算方法を解説 - 税理士法人チェスター, 1月 15, 2026にアクセス、 https://chester-tax.com/encyclopedia/8987.html
相続管理システム | 製品情報 | 株式会社ビービーシー, 1月 15, 2026にアクセス、 https://www.bbcinc.co.jp/products/inheritance/
生前贈与加算とは？対象者・相続税改正内容・生前贈与の注意点を解説, 1月 15, 2026にアクセス、 https://chester-tax.com/encyclopedia/8981.html
生前贈与加算とは？令和6年改正による期間延長の影響と対策を解説 - 辻・本郷 税理士法人, 1月 15, 2026にアクセス、 https://www.ht-tax.or.jp/sozoku-guide/gifts-made-during-life
配偶者は1億6000万円相続税額が軽減！配偶者控除のデメリット - 円満相続税理士法人, 1月 15, 2026にアクセス、 https://osd-souzoku.jp/haiguusyanozeigakukeigen/
相続税路線価の基礎知識を解説！計算方法や調べ方を知ろう, 1月 15, 2026にアクセス、 https://www.taxlawyer328.jp/inheritance-columns/souzokuzei/p5473/
相続税の配偶者控除とは？計算方法や注意点を解説します - 税理士法人アイユーコンサルティング, 1月 15, 2026にアクセス、 https://www.taxlawyer328.jp/inheritance-columns/kojyo/p5483/
「相続税の速算表」で相続税を簡単に計算する方法を税理士が解説, 1月 15, 2026にアクセス、 https://chester-tax.com/encyclopedia/12770.html
土地の相続税はいくら？計算方法や節税対策を解説【自動計算機付】, 1月 15, 2026にアクセス、 https://www.daylight-law.jp/inheritance/souzokuzei/tochi/
倍率方式とは？路線価方式との違いや計算方法、必要書類を解説！ - マルイシ税理士法人, 1月 15, 2026にアクセス、 https://maruishi-tax.jp/column/column351/
相続税の土地評価は路線価と倍率方式で評価できる！計算方法と注意点 - OAG税理士法人, 1月 15, 2026にアクセス、 https://www.oag-tax.co.jp/souzokuzei/column/inheritance-tax-land-valuation-15614/
【2024年4月スタート】不動産情報ライブラリの使い方マニュアル｜無料で地価・防災・人口統計を地図で確認できる新サービスとは, 1月 15, 2026にアクセス、 https://rec-tokyo.net/column/3908/
No.4602 土地家屋の評価 - 国税庁, 1月 15, 2026にアクセス、 https://www.nta.go.jp/taxes/shiraberu/taxanswer/sozoku/4602.htm
不動産（土地家屋）の相続税はいくら？ 計算方法・手続き・相続税対策 - 税理士法人チェスター, 1月 15, 2026にアクセス、 https://chester-tax.com/encyclopedia/17568.html
倍率地域の相続税はいくら？倍率表の見方・評価の計算方法を解説 - 税理士法人チェスター, 1月 15, 2026にアクセス、 https://chester-tax.com/encyclopedia/17071.html
No.4606 倍率方式による土地の評価 - 国税庁, 1月 15, 2026にアクセス、 https://www.nta.go.jp/taxes/shiraberu/taxanswer/hyoka/4606.htm
No.4124 相続した事業の用や居住の用の宅地等の価額の特例（小 ..., 1月 15, 2026にアクセス、 https://www.nta.go.jp/taxes/shiraberu/taxanswer/sozoku/4124.htm
小規模宅地等の特例をわかりやすく徹底解説！ | 東京の相続税申告・相続専門の税理士法人トゥモローズ, 1月 15, 2026にアクセス、 https://tomorrowstax.com/knowledge/202102186403/
小規模宅地等の特例を完全解説！対象条件や手続きを知って相続税を節税しよう, 1月 15, 2026にアクセス、 https://chester-tax.com/contents/estate/
小規模宅地の特例の併用 | 相続税申告相談プラザ｜[運営]ランドマーク税理士法人, 1月 15, 2026にアクセス、 https://www.zeirisi.co.jp/syoukibotakuchi/heiyou/
小規模宅地等の特例対象候補地の有利選択 - 倉田淳一税理士事務所, 1月 15, 2026にアクセス、 https://souzoku0119.com/shoukibonoruurisentaku/
小規模宅地の有利判定を簡単に行う方法 - 税理士法人チェスター, 1月 15, 2026にアクセス、 https://chester-tax.com/academy/blog/hyouka/advantageous-decision-1972
相続税の節税 小規模宅地の特例の限度面積と有利選択について徹底解説, 1月 15, 2026にアクセス、 https://tomorrowstax.com/knowledge/201609081493/
小規模宅地等の特例 ～併用と有利選択についての考え方 - 五十嵐税理士事務所, 1月 15, 2026にアクセス、 https://www.m-iga03.jp/column-tax-inheritance15
相続時精算課税と暦年贈与はどっちが有利？税制改正後の変更点などを紹介, 1月 15, 2026にアクセス、 https://vs-group.jp/sozokuzei/reiwa5_rekinen_seisan/
相続税と贈与税の「7年ルール」徹底解説【2024年改正対応・完全ガイド】 | オールバーグ, 1月 15, 2026にアクセス、 https://orbague.com/souzoku-gift-7year-rule-2024/
【生前贈与の持ち戻し期間が7年に？】新制度を税理士が詳しく解説 - 岡野相続税理士法人, 1月 15, 2026にアクセス、 https://www.souzoku-zei.jp/souzokuzei/seizen/seizenzouyo-sinseido/
暦年贈与とは？7年持ち戻しルールの延長や相続時精算課税との違いを解説, 1月 15, 2026にアクセス、 https://www.futami-tax.com/gift-tax/
相続税の持ち戻しとは？生前贈与が相続税の節税対策にならない理由 - OAG税理士法人, 1月 15, 2026にアクセス、 https://www.oag-tax.co.jp/souzokuzei/column/inheritance-tax-take-back-7026/
相続時精算課税制度とは？2024年改正対応！メリット・デメリットを徹底解説, 1月 15, 2026にアクセス、 https://chester-tax.com/encyclopedia/848.html
暦年贈与とは？税制改正による変更点や活用方法を解説 - オリックス銀行, 1月 15, 2026にアクセス、 https://www.orixbank.co.jp/column/article/199/
相続税の配偶者控除とは？デメリットや計算方法も解説, 1月 15, 2026にアクセス、 https://www.daylight-law.jp/inheritance/deduction/
相続税の未成年者控除とは？対象年齢・計算方法・申告手続きまで徹底解説 - 小谷野税理士法人, 1月 15, 2026にアクセス、 https://koyano-cpa.gr.jp/yasashii-sozoku/column/2601/
相続税の未成年者控除とは？ 適用要件や計算方法をやさしく解説。, 1月 15, 2026にアクセス、 https://miraie-souzoku.jp/column/inheritance_tax/column-3702/
第３回 相続税の税額控除について（３）『未成年者控除と障害者控除』 | 新宿 - 税理士法人ともに, 1月 15, 2026にアクセス、 https://www.tax-tomoni.co.jp/blog/souzokuzei/zeigakukoujo-3/
相続税の障害者控除はいくら減額？要件・計算方法・2回目の注意点も解説, 1月 15, 2026にアクセス、 https://chester-tax.com/encyclopedia/2837.html
相続税とは？相続税の計算方法や負担軽減条件をくわしく解説 - 三菱ＵＦＪ銀行, 1月 15, 2026にアクセス、 https://www.bk.mufg.jp/sonaeru/souzoku/column/002/index.html