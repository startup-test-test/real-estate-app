# PageSpeed Insights レポート

対象URL: https://ooya.tech/
計測日時: 2026-02-18 13:43 JST
ツール: Lighthouse 13.0.1 (HeadlessChromium 144.0.7559.132)

---

## スコア概要

| カテゴリ | モバイル | デスクトップ |
|---------|---------|------------|
| パフォーマンス | **53** | **76** |
| ユーザー補助 | 91 | 96 |
| おすすめの方法 | 100 | 100 |
| SEO | 100 | 100 |

---

## パフォーマンス指標

| 指標 | モバイル | デスクトップ | 目標値 |
|------|---------|------------|--------|
| First Contentful Paint (FCP) | **9.5秒** | 1.3秒 | < 1.8秒 |
| Largest Contentful Paint (LCP) | **21.2秒** | **3.0秒** | < 2.5秒 |
| Total Blocking Time (TBT) | 180ms | 70ms | < 200ms |
| Cumulative Layout Shift (CLS) | 0.002 | 0.002 | < 0.1 |
| Speed Index (SI) | **15.4秒** | 2.2秒 | < 3.4秒 |

※ 太字は目標値を超えている指標

---

## 主要な問題点と改善策

### 1. レンダリングをブロックしているリクエスト（最優先）

| 項目 | モバイル | デスクトップ |
|------|---------|------------|
| 推定削減時間 | **7,690ms** | **1,180ms** |

**対策:**
- CSS/JSの非同期読み込み
- クリティカルCSSのインライン化
- `defer` / `async` 属性の活用

### 2. 画像配信の改善

| 項目 | モバイル | デスクトップ |
|------|---------|------------|
| 推定削減サイズ | **3,585 KiB** | **3,641 KiB** |

**対策:**
- WebP/AVIF形式への変換
- Next.js `<Image>` コンポーネントの活用（自動最適化）
- 適切なサイズの画像配信（レスポンシブ画像）

### 3. 使用していないCSSの削減

| 項目 | 推定削減サイズ |
|------|-------------|
| 未使用CSS | **267 KiB** |

**対策:**
- PurgeCSSやTailwind CSSのパージ設定の確認
- 未使用のCSSライブラリの除去

### 4. 使用していないJavaScriptの削減

| 項目 | 推定削減サイズ |
|------|-------------|
| 未使用JS | **233〜234 KiB** |

**対策:**
- コード分割（dynamic import）
- Tree shakingの確認
- 不要なライブラリの除去

### 5. CSSの最小化

| 項目 | 推定削減サイズ |
|------|-------------|
| CSS最小化 | **28 KiB** |

**対策:**
- Next.jsのビルド設定でCSS minifyが有効か確認

### 6. 過大なネットワークペイロード

| 項目 | モバイル | デスクトップ |
|------|---------|------------|
| 合計サイズ | **5,689 KiB** | **15,875 KiB** |

**対策:**
- 画像の最適化（上記2と関連）
- 遅延読み込み（lazy loading）の活用
- 不要なリソースの削除

### 7. 画像要素にwidth/heightが未指定

**対策:**
- すべての `<img>` 要素に `width` と `height` を明示的に指定
- Next.js `<Image>` コンポーネントでは自動的に設定される

### 8. メインスレッドの長時間タスク

| 項目 | モバイル | デスクトップ |
|------|---------|------------|
| 長時間タスク数 | **9件** | **7件** |

**対策:**
- 重い処理のWeb Worker移行
- コード分割による初期ロード削減

### 9. レガシーJavaScript

| 項目 | 推定削減サイズ |
|------|-------------|
| 以前のJS | **14 KiB** |

**対策:**
- browserslistの設定確認
- モダンブラウザ向けビルドへの切り替え

---

## ユーザー補助（アクセシビリティ）の問題

### モバイル（91点）

| 問題 | カテゴリ |
|------|---------|
| ボタンにユーザー補助機能名が指定されていない | 名前とラベル |
| 背景色と前景色のコントラスト比が不十分 | コントラスト |

### デスクトップ（96点）

| 問題 | カテゴリ |
|------|---------|
| 背景色と前景色のコントラスト比が不十分 | コントラスト |

---

## セキュリティ関連（おすすめの方法 - 情報提供）

以下は合格していないが、情報提供レベルの項目：

- CSP が XSS 攻撃を防げるよう設定されているか確認する
- 強力な HSTS ポリシーを使用する
- COOP でオリジン分離が適切に行われていることを確認する
- XFO または CSP を使用してクリックジャッキングを軽減する
- Trusted Types を使用して DOM ベースの XSS に対処する

---

## 改善の優先度

| 優先度 | 対策 | 期待効果 |
|--------|------|---------|
| **最優先** | レンダリングブロック解消 | FCP/LCP大幅改善（モバイル7.7秒短縮見込み） |
| **最優先** | 画像最適化（WebP変換+リサイズ） | ペイロード3.5MB以上削減 |
| **高** | 未使用CSS/JS削減 | 約500KiB削減 |
| **高** | 画像のwidth/height指定 | CLS改善 |
| **中** | アクセシビリティ修正（ボタン名・コントラスト） | a11y向上 |
| **中** | コード分割・遅延読み込み | TBT/SI改善 |
| **低** | CSS最小化 | 28KiB削減 |
| **低** | レガシーJS対応 | 14KiB削減 |

---

## 本日の改善結果（2026-02-18）

### スコア比較

| デバイス | 開始時 (13:43) | 最終 (16:44) | 改善幅 |
|---|---|---|---|
| **モバイル (SP)** | 53点 | 61点 | **+8点** |
| **デスクトップ (PC)** | 76点 | 96点 | **+20点** |

### モバイル指標の推移

| 指標 | 開始時 (13:43) | 最終 (16:44) | 改善 |
|---|---|---|---|
| FCP | 9.5s | 1.8s | **-7.7s (-81%)** |
| LCP | 21.2s | 7.8s | **-13.4s (-63%)** |
| TBT | 180ms | 520ms | +340ms |
| CLS | 0.002 | 0 | 改善 |
| SI | 15.4s | 3.1s | **-12.3s (-80%)** |
| レンダリングブロック | 7,690ms | 1,910ms | **-5,780ms (-75%)** |
| 画像改善余地 | 3,585 KiB | 0 KiB | **解消** |
| 未使用CSS | 267 KiB | 32 KiB | **-235 KiB (-88%)** |

### デスクトップ指標の推移

| 指標 | 開始時 (13:43) | 最終 (16:44) | 改善 |
|---|---|---|---|
| FCP | 1.3s | 0.3s | **-1.0s (-77%)** |
| LCP | 3.0s | 1.5s | **-1.5s (-50%)** |
| TBT | 70ms | 40ms | **-30ms (-43%)** |
| CLS | 0.002 | 0.002 | ±0 |
| SI | 2.2s | 0.6s | **-1.6s (-73%)** |
| 画像改善余地 | 3,641 KiB | 150 KiB | **-3,491 KiB (-96%)** |

### 実施した施策

| # | 施策 | 対象ファイル | 効果 |
|---|---|---|---|
| 1 | 全ページ `<img>` → `<Image>` 移行 | SimulatorLPClient, profile/page, not-found | WebP自動変換・レスポンシブ画像配信 |
| 2 | 全 `<Image>` に `sizes` 属性追加 | shared-header, landing-footer, BlogPosts, ToolSidebarCTA, LandingPageClient | 適切なサイズの画像配信 |
| 3 | Hero画像に `fetchPriority="high"` 追加 | LandingPageClient | LCP改善 |
| 4 | Google Analytics `lazyOnload` 化 | GoogleAnalytics.tsx | FCP大幅改善（レンダリングブロック解消） |
| 5 | 印刷CSS分離（globals.css → print.css） | globals.css, SimulatorClient.tsx | CSSバンドル138行軽量化 |
| 6 | `optimizePackageImports` 追加 | next.config.mjs | lucide-react ツリーシェイキング |
| 7 | kakushin画像 `sizes` 指定 | LandingPageClient | 画像転送量削減 |

### 試行して取り消した施策

| 施策 | 理由 |
|---|---|
| `experimental.optimizeCss: true`（critters） | デスクトップTBTが70→270msに悪化（スコア98→87）。Tailwind CSS v4との相性問題 |

### 対応不可と判断した項目

| 項目 | 理由 |
|---|---|
| レンダリングブロックCSS (1,910ms) | Tailwind CSS v4 + Next.jsの構造上、CSSチャンクの分離は不可 |
| 以前のJavaScript (14 KiB) | Next.jsフレームワークのポリフィル。browserslist設定済みでも残る |
| 未使用JS (233 KiB) | react-dom, Next.jsランタイム, ポリフィル等のフレームワークコード |
| 未使用CSS (32 KiB) | Tailwind v4のユーティリティCSS。ページ単位のパージは不可 |
