# サブスクリプション管理システム ドキュメント

**最終更新日**: 2025年8月14日  
**バージョン**: 2.0.0（統合版）

## 📚 概要

このディレクトリには、大家DXのサブスクリプション管理システムに関する全てのドキュメントが統合されています。
有料課金（アップグレード）から解約（ダウングレード）まで、サブスクリプションライフサイクル全体をカバーしています。

## 🗂️ ドキュメント構成

### 📋 01_仕様書
システムの要件定義と仕様を記載したドキュメント群

| ドキュメント | 内容 | 対象者 |
|------------|------|--------|
| [料金プラン仕様書](./01_仕様書/料金プラン仕様書.md) | 無料/プレミアムプランの詳細、価格設定、利用制限 | PM、営業、開発者 |
| [Stripe連携仕様書](./01_仕様書/Stripe連携仕様書.md) | Stripe決済システムの統合仕様、API連携詳細 | 開発者、インフラ |
| [ダウングレード・解約仕様書](./01_仕様書/ダウングレード・解約仕様書.md) | プラン解約と退会機能の仕様 | PM、開発者、CS |
| [二重決済防止仕様書](./01_仕様書/二重決済防止仕様書.md) | 重複課金を防ぐシステム設計 | 開発者、QA |

### 🛠️ 02_実装ガイド
開発者向けの技術実装ガイド

| ドキュメント | 内容 | 対象者 |
|------------|------|--------|
| [環境構築ガイド](./02_実装ガイド/環境構築ガイド.md) | 開発環境のセットアップ、環境変数設定 | 開発者、DevOps |
| [Edge_Functions実装ガイド](./02_実装ガイド/Edge_Functions実装ガイド.md) | Supabase Edge Functionsの実装詳細 | バックエンド開発者 |
| [フロントエンド実装ガイド](./02_実装ガイド/フロントエンド実装ガイド.md) | React/TypeScriptでのUI実装 | フロントエンド開発者 |
| [データベース設計](./02_実装ガイド/データベース設計.md) | テーブル設計、RLSポリシー、マイグレーション | DB管理者、開発者 |

### 📊 03_運用手順
本番環境の運用・保守手順

| ドキュメント | 内容 | 対象者 |
|------------|------|--------|
| [デプロイ手順書](./03_運用手順/デプロイ手順書.md) | 本番環境へのデプロイ手順、ロールバック方法 | DevOps、開発者 |
| [テスト手順書](./03_運用手順/テスト手順書.md) | 単体・統合・E2Eテストの実施手順 | QA、開発者 |
| [トラブルシューティング](./03_運用手順/トラブルシューティング.md) | エラー対応、問題解決ガイド | サポート、開発者 |

### 🧪 04_テスト・検証
テスト結果と検証記録

| ドキュメント | 内容 | 対象者 |
|------------|------|--------|
| [テスト実施記録](./04_テスト・検証/テスト実施記録.md) | 実施済みテストの記録、結果、課題 | QA、PM、開発者 |

### 🏗️ システムアーキテクチャ
システム全体の設計と構成

| ドキュメント | 内容 | 対象者 |
|------------|------|--------|
| [システムアーキテクチャ](./システムアーキテクチャ.md) | システム全体図、データフロー、セキュリティ設計 | アーキテクト、開発者 |

## 🚀 クイックスタート

### 新規開発者の方

1. **環境構築**: [環境構築ガイド](./02_実装ガイド/環境構築ガイド.md)を参照
2. **仕様理解**: [料金プラン仕様書](./01_仕様書/料金プラン仕様書.md)で基本仕様を確認
3. **実装開始**: 担当領域の実装ガイドを参照

### 運用担当者の方

1. **デプロイ**: [デプロイ手順書](./03_運用手順/デプロイ手順書.md)を参照
2. **監視設定**: [システムアーキテクチャ](./システムアーキテクチャ.md)の監視セクション参照
3. **障害対応**: [トラブルシューティング](./03_運用手順/トラブルシューティング.md)を参照

## 📈 システム概要

### 料金プラン
- **無料プラン**: 月5回まで利用可能
- **プレミアムプラン**: 月額2,980円（税込）で無制限利用

### 主要機能
- ✅ Stripe決済統合
- ✅ 自動更新サブスクリプション
- ✅ プラン解約（期間終了まで利用可能）
- ✅ 二重決済防止
- ✅ 利用制限管理
- 📧 退会処理（メール申請）

### 技術スタック
- **Frontend**: React + TypeScript + Vite
- **Backend**: Supabase (PostgreSQL + Edge Functions)
- **Payment**: Stripe
- **Hosting**: GitHub Codespaces / Vercel
- **CI/CD**: GitHub Actions

## 📝 更新履歴

### v2.0.0 (2025-08-14)
- 11_stripe_有料課金と12_退会処理を統合
- ドキュメント数を29個から15個に削減
- カテゴリ別に再構成
- 重複内容を排除

### v1.0.0 (2025-08-13)
- 初回リリース
- 基本的なサブスクリプション機能実装

## 🔗 関連リンク

### 内部ドキュメント
- [プロジェクト全体README](/README.md)
- [API仕様書](/docs_md/09_API仕様/)
- [セキュリティ対策](/docs_md/07_セキュリティ対策/)

### 外部リソース
- [Stripe公式ドキュメント](https://stripe.com/docs)
- [Supabase公式ドキュメント](https://supabase.com/docs)
- [React公式ドキュメント](https://react.dev)

## 📞 サポート

### 技術的な質問
- **Slack**: #dev-subscription-management
- **GitHub Issues**: [Issues](https://github.com/your-org/real-estate-app/issues)

### ビジネス関連
- **PM**: project-manager@example.com
- **CS**: customer-support@example.com

## ⚠️ 注意事項

1. **環境変数**: 本番環境の認証情報は絶対にコミットしないこと
2. **テスト**: Stripeのテストモードで十分にテストしてから本番環境へ
3. **データ削除**: 退会処理は現在メール対応のみ（自動削除なし）
4. **監視**: 決済関連のエラーは即座に対応が必要

## 🏆 貢献者

このドキュメントシステムの構築・統合に貢献いただいた全ての開発者に感謝します。

---

*このドキュメントは定期的に更新されます。最新情報はGitHubリポジトリをご確認ください。*