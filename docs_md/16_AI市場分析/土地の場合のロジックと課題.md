# åœŸåœ°æ¤œç´¢ã®èª²é¡Œç®¡ç†è¡¨

## ç¾çŠ¶ã®èª²é¡Œä¸€è¦§

| No | èª²é¡Œå†…å®¹ | åŸå›  | å¯¾å¿œçŠ¶æ³ |
|----|---------|------|----------|
| 1 | ãƒãƒ³ã‚·ãƒ§ãƒ³ãŒå…¥ã£ã¦ã„ã‚‹ | åœŸåœ°(propertyType='01')ã§æ¤œç´¢ã—ã¦ã„ã‚‹ã®ã«ã€ãƒãƒ³ã‚·ãƒ§ãƒ³ç‰©ä»¶ãŒçµæœã«å«ã¾ã‚Œã¦ã„ã‚‹ | ğŸŸ¡ ä¸€éƒ¨å¯¾å¿œ |
| 2 | MLåˆ†æã®è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œãªã„ | å»¶åºŠé¢ç©ã®è¨ˆç®—ãŒåœŸåœ°ã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ | ğŸ”´ æœªå¯¾å¿œ |
| 3 | é¡ä¼¼ç‰©ä»¶ã®å–å¼•äº‹ä¾‹ãŒè¡¨ç¤ºã•ã‚Œãªã„ | ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¡ä»¶ãŒå»ºç‰©ç”¨ã®ãŸã‚ã€åœŸåœ°ã®å ´åˆã«ãƒãƒƒãƒã—ãªã„ | ğŸŸ¢ å¯¾å¿œæ¸ˆï¼ˆ1652-1663è¡Œç›®ä¿®æ­£ï¼‰ |
| 4 | ã€Œå»¶ã¹åºŠã¨ä¾¡æ ¼ã€ã®è¡¨ç¤º | åœŸåœ°ã®å ´åˆã¯ã€ŒåœŸåœ°é¢ç©ã¨ä¾¡æ ¼ã€ã«å¤‰æ›´ãŒå¿…è¦ | ğŸŸ¢ å¯¾å¿œæ¸ˆ |
| 5 | ã€Œå»¶åºŠé¢ç©åˆ¥ä¾¡æ ¼åˆ†å¸ƒã€ã®è¡¨ç¤º | åœŸåœ°ã®å ´åˆã¯ã€ŒåœŸåœ°é¢ç©åˆ¥ä¾¡æ ¼åˆ†å¸ƒã€ã«å¤‰æ›´ãŒå¿…è¦ | ğŸŸ¢ å¯¾å¿œæ¸ˆ |
| 6 | ã€Œå»ºç¯‰å¹´åˆ¥ä¾¡æ ¼åˆ†å¸ƒã€ã®è¡¨ç¤º | åœŸåœ°ã®å ´åˆã¯éè¡¨ç¤ºã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ | ğŸŸ¢ å¯¾å¿œæ¸ˆ |
| 7 | ã€Œå»ºç¯‰å¹´åˆ¥ä¾¡æ ¼åˆ†å¸ƒï¼ˆãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ï¼‰ã€ã®è¡¨ç¤º | åœŸåœ°ã®å ´åˆã¯éè¡¨ç¤ºã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ | ğŸŸ¢ å¯¾å¿œæ¸ˆ |

---

# ä¿®æ­£æ–¹é‡ã¨ãƒ­ã‚¸ãƒƒã‚¯

## å®Ÿè£…ã‚¿ã‚¹ã‚¯ç®¡ç†è¡¨

| No | ã‚¿ã‚¹ã‚¯å†…å®¹ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« | å„ªå…ˆåº¦ | å¯¾å¿œçŠ¶æ³ | å‚™è€ƒ |
|----|-----------|-------------|--------|----------|------|
| T1 | isLandãƒ•ãƒ©ã‚°ã®è¿½åŠ  | MarketAnalysis.tsx:50 | æœ€é«˜ | âœ… å®Ÿè£…æ¸ˆ | `const isLand = selectedPropertyType === '01'` |
| T2 | getAreaé–¢æ•°ã®ä¿®æ­£ | MarketAnalysis.tsx:44-51 | æœ€é«˜ | âœ… å®Ÿè£…æ¸ˆ | åœŸåœ°ã®å ´åˆã¯åœŸåœ°é¢ç©ã‚’å–å¾— |
| T3 | å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ©ãƒ™ãƒ«å¤‰æ›´ | MarketAnalysis.tsx:1142 | æœ€é«˜ | âœ… å®Ÿè£…æ¸ˆ | ã€Œå»¶åºŠé¢ç©ã€â†’ã€ŒåœŸåœ°é¢ç©ã€ |
| T4 | ç¯‰å¹´æ•°å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®éè¡¨ç¤º | MarketAnalysis.tsx:1171-1189 | æœ€é«˜ | âœ… å®Ÿè£…æ¸ˆ | åœŸåœ°ã®å ´åˆã¯éè¡¨ç¤º |
| T5 | APIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¡ä»¶åˆ†å² | MarketAnalysis.tsx:æ¤œç´¢å‡¦ç† | é«˜ | ğŸ”´ æœªå®Ÿè£… | area_min/max vs building_area_min/max |
| T6 | ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã®ä¿®æ­£ | MarketAnalysis.tsx:270-304 | é«˜ | âœ… å®Ÿè£…æ¸ˆ | åœŸåœ°ã¯ç¯‰å¹´æ•°ãƒ•ã‚£ãƒ«ã‚¿ã‚’ã‚¹ã‚­ãƒƒãƒ— |
| T7 | ä¾¡æ ¼åˆ†å¸ƒã‚¿ã‚¤ãƒˆãƒ«ã®å¤‰æ›´ | MarketAnalysis.tsx:1448,1316 | ä¸­ | âœ… å®Ÿè£…æ¸ˆ | åœŸåœ°ç”¨ã®ã‚¿ã‚¤ãƒˆãƒ«è¡¨ç¤º |
| T8 | ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ã®å¤‰æ›´ | MarketAnalysis.tsx:1641-1643,1687-1689 | ä¸­ | âœ… å®Ÿè£…æ¸ˆ | åœŸåœ°é¢ç©/å»¶åºŠé¢ç©ã®åˆ‡ã‚Šæ›¿ãˆ |
| T9 | ã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒˆãƒ«ã®å¤‰æ›´ | MarketAnalysis.tsx:1707,1842 | ä¸­ | âœ… å®Ÿè£…æ¸ˆ | ã€ŒåœŸåœ°é¢ç©ã¨ä¾¡æ ¼ã€ç­‰ |
| T10 | ç¯‰å¹´æ•°ã‚°ãƒ©ãƒ•ã®éè¡¨ç¤º | MarketAnalysis.tsx:1924,2036 | ä¸­ | âœ… å®Ÿè£…æ¸ˆ | åœŸåœ°ã®å ´åˆã¯éè¡¨ç¤º |
| T11 | MLåˆ†æã®åœŸåœ°å¯¾å¿œ | MarketAnalysis.tsx:MLåˆ†æ | ä½ | ğŸ”´ æœªå®Ÿè£… | åœŸåœ°ç”¨ã®ç‰¹å¾´é‡è¨­å®š |
| T12 | Render APIã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ  | backend/app.py | ä½ | ğŸ”´ æœªå®Ÿè£… | area_min/maxç­‰ã®è¿½åŠ  |

---

## 1. åŸºæœ¬æ–¹é‡
**æˆ¸å»º(02)ã¨ãƒãƒ³ã‚·ãƒ§ãƒ³(07)ã®å‹•ä½œã¯ä¸€åˆ‡å¤‰æ›´ã—ãªã„ã€‚åœŸåœ°(01)ã®å ´åˆã®ã¿ç‰¹åˆ¥å‡¦ç†ã‚’è¿½åŠ ã™ã‚‹ã€‚**

## 2. å®Ÿè£…ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆè©³ç´°ï¼‰

### 2.1 åœŸåœ°åˆ¤å®šãƒ•ãƒ©ã‚°ã®è¿½åŠ ï¼ˆMarketAnalysis.tsx:41è¡Œç›®ä»˜è¿‘ï¼‰
```typescript
// ç‰©ä»¶ã‚¿ã‚¤ãƒ—ã®åˆ¤å®šï¼ˆåœŸåœ°ã®å ´åˆã®ã¿ç‰¹åˆ¥å‡¦ç†ï¼‰
const isLand = selectedPropertyType === '01';
```

### 2.2 ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®ä¿®æ­£ï¼ˆMarketAnalysis.tsx:28-34è¡Œç›®ï¼‰

#### getAreaé–¢æ•°ã®ä¿®æ­£
```typescript
const getArea = (item: any): number => {
  // åœŸåœ°ã®å ´åˆã®ã¿åœŸåœ°é¢ç©ã‚’å–å¾—ã€ãã‚Œä»¥å¤–ã¯å¾“æ¥é€šã‚Š
  if (selectedPropertyType === '01') {
    return item['åœŸåœ°é¢ç©ï¼ˆã¡ï¼‰'] || item.land_area || item['åœŸåœ°é¢ç©'] || 0;
  }
  // æˆ¸å»ºãƒ»ãƒãƒ³ã‚·ãƒ§ãƒ³ã¯å¾“æ¥é€šã‚Šå»¶åºŠé¢ç©ã‚’å–å¾—
  return item['å»¶ã¹åºŠé¢ç©ï¼ˆã¡ï¼‰'] || item.building_area || item.é¢ç© || item.å»¶åºŠé¢ç© || item.area || 0;
};
```

#### getBuildYearé–¢æ•°ã¯ãã®ã¾ã¾ï¼ˆåœŸåœ°ã®å ´åˆã¯ä½¿ç”¨ã—ãªã„ï¼‰
```typescript
const getBuildYear = (item: any): number => {
  return parseInt(item['å»ºç¯‰å¹´'] || item.build_year || item.å»ºç¯‰å¹´ || item.building_year || '0');
};
```

### 2.3 å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®æ¡ä»¶åˆ†å²ï¼ˆMarketAnalysis.tsx:1130-1160è¡Œç›®ä»˜è¿‘ï¼‰

#### é¢ç©å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒ©ãƒ™ãƒ«å¤‰æ›´
```typescript
<label className="block text-sm font-medium text-gray-700 mb-1">
  <Ruler className="inline-block w-4 h-4 mr-1" />
  {isLand ? 'å¸Œæœ›åœŸåœ°é¢ç©' : 'å¸Œæœ›å»¶åºŠé¢ç©'} (ã¡) <span className="text-red-500">*</span>
</label>
```

#### ç¯‰å¹´æ•°å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ¡ä»¶è¡¨ç¤º
```typescript
{!isLand && (
  <div>
    <label className="block text-sm font-medium text-gray-700 mb-1">
      <Calendar className="inline-block w-4 h-4 mr-1" />
      å»ºç¯‰å¹´ <span className="text-red-500">*</span>
    </label>
    <input
      type="number"
      className="w-full px-3 py-2 border border-gray-300 rounded-md"
      value={targetYear}
      onChange={(e) => setTargetYear(Number(e.target.value))}
      min={1950}
      max={new Date().getFullYear()}
      placeholder="ä¾‹: 2015"
    />
  </div>
)}
```

### 2.4 APIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä¿®æ­£ï¼ˆæ¤œç´¢å®Ÿè¡Œæ™‚ï¼‰

```typescript
// handleSearché–¢æ•°å†…ã§APIãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®š
const searchParams = {
  prefecture: selectedPrefecture,
  city: selectedCity,
  district: selectedDistrict,
  property_type: selectedPropertyType,
  // åœŸåœ°ã®å ´åˆã¯area_min/maxã€å»ºç‰©ã®å ´åˆã¯building_area_min/max
  ...(isLand ? {
    area_min: targetArea - areaTolerance,
    area_max: targetArea + areaTolerance,
    // ç¯‰å¹´æ•°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯å«ã‚ãªã„
  } : {
    building_area_min: targetArea - areaTolerance,
    building_area_max: targetArea + areaTolerance,
    build_year_min: targetYear - yearTolerance,
    build_year_max: targetYear + yearTolerance,
  })
};
```

### 2.5 ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã®ä¿®æ­£ï¼ˆMarketAnalysis.tsx:262-275è¡Œç›®ä»˜è¿‘ï¼‰

```typescript
// é¢ç©ãƒ•ã‚£ãƒ«ã‚¿
if (targetArea > 0 && allData.length > 0) {
  const areaFiltered = allData.filter(item => {
    const area = getArea(item); // getAreaãŒæ—¢ã«åœŸåœ°/å»ºç‰©ã‚’åˆ¤å®š
    return area >= targetArea - areaTolerance && area <= targetArea + areaTolerance;
  });

  // ç¯‰å¹´æ•°ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆåœŸåœ°ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰
  if (!isLand && targetYear > 0) {
    const yearFiltered = areaFiltered.filter(item => {
      const buildYear = getBuildYear(item);
      return buildYear >= targetYear - yearTolerance && buildYear <= targetYear + yearTolerance;
    });
    setMarketData(yearFiltered);
  } else {
    setMarketData(areaFiltered);
  }
}
```

### 2.6 è¡¨ç¤ºãƒ©ãƒ™ãƒ«ã®å‹•çš„å¤‰æ›´

#### ä¾¡æ ¼åˆ†å¸ƒã‚¿ã‚¤ãƒˆãƒ«ï¼ˆMarketAnalysis.tsx:1429è¡Œç›®ä»˜è¿‘ï¼‰
```typescript
{isLand ?
  `åœŸåœ°ä¾¡æ ¼åˆ†å¸ƒ | åœŸåœ°é¢ç©${targetArea}Â±${areaTolerance}ã¡` :
  `${selectedPropertyType === '02' ? 'æˆ¸å»ºã¦' : 'ãƒãƒ³ã‚·ãƒ§ãƒ³'}ä¾¡æ ¼åˆ†å¸ƒ | å»¶åºŠé¢ç©${targetArea}Â±${areaTolerance}ã¡ãƒ»ç¯‰å¹´æ•°${targetYear}Â±${yearTolerance}å¹´`
}
```

#### ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆMarketAnalysis.tsx:1618-1620è¡Œç›®ä»˜è¿‘ï¼‰
```typescript
<th className="px-4 py-3 text-left text-sm font-bold text-gray-900">
  {isLand ? 'åœŸåœ°é¢ç©(ã¡)' : 'å»¶åºŠé¢ç©(ã¡)'}
</th>
{!isLand && (
  <th className="px-4 py-3 text-left text-sm font-bold text-gray-900">å»ºç¯‰å¹´</th>
)}
```

### 2.7 ã‚°ãƒ©ãƒ•ãƒ»åˆ†æã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®è¡¨ç¤ºåˆ¶å¾¡

#### ã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒˆãƒ«ã®å¤‰æ›´
```typescript
// 1. é¢ç©ã¨ä¾¡æ ¼ã®ã‚°ãƒ©ãƒ•
<h3 className="text-lg font-semibold mb-4">
  1. {isLand ? 'åœŸåœ°é¢ç©' : 'å»¶åºŠé¢ç©'}ã¨ä¾¡æ ¼
</h3>
```

#### ç¯‰å¹´æ•°é–¢é€£ã‚°ãƒ©ãƒ•ã®éè¡¨ç¤º
```typescript
{/* 3. å»ºç¯‰å¹´åˆ¥ä¾¡æ ¼åˆ†å¸ƒ - åœŸåœ°ã®å ´åˆã¯éè¡¨ç¤º */}
{!isLand && (
  <div className="bg-white rounded-lg shadow-lg p-6">
    <h3 className="text-lg font-semibold mb-4">3. å»ºç¯‰å¹´åˆ¥ä¾¡æ ¼åˆ†å¸ƒ</h3>
    {/* ã‚°ãƒ©ãƒ•å†…å®¹ */}
  </div>
)}

{/* 4. å»ºç¯‰å¹´åˆ¥ä¾¡æ ¼åˆ†å¸ƒï¼ˆãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ï¼‰ - åœŸåœ°ã®å ´åˆã¯éè¡¨ç¤º */}
{!isLand && (
  <div className="bg-white rounded-lg shadow-lg p-6">
    <h3 className="text-lg font-semibold mb-4">4. å»ºç¯‰å¹´åˆ¥ä¾¡æ ¼åˆ†å¸ƒï¼ˆãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ï¼‰</h3>
    {/* ã‚°ãƒ©ãƒ•å†…å®¹ */}
  </div>
)}
```

## 3. å½±éŸ¿ç¯„å›²ã®ä¿è¨¼

### 3.1 æ¡ä»¶åˆ†å²ã«ã‚ˆã‚‹å½±éŸ¿ç¯„å›²ã®é™å®š
ã™ã¹ã¦ã®ä¿®æ­£ã¯`isLand`ï¼ˆ`selectedPropertyType === '01'`ï¼‰ã®æ¡ä»¶åˆ†å²å†…ã§å®Ÿæ–½ã™ã‚‹ãŸã‚ï¼š
- **propertyType='02'ï¼ˆæˆ¸å»ºï¼‰ã®å ´åˆ**ï¼šã™ã¹ã¦å¾“æ¥é€šã‚Šã®å‹•ä½œ
- **propertyType='07'ï¼ˆãƒãƒ³ã‚·ãƒ§ãƒ³ï¼‰ã®å ´åˆ**ï¼šã™ã¹ã¦å¾“æ¥é€šã‚Šã®å‹•ä½œ
- **propertyType='01'ï¼ˆåœŸåœ°ï¼‰ã®å ´åˆã®ã¿**ï¼šæ–°ã—ã„ãƒ­ã‚¸ãƒƒã‚¯ãŒé©ç”¨

### 3.2 å®‰å…¨ãªå®Ÿè£…ã®ãŸã‚ã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ
1. **æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ç¶­æŒ**ï¼šæˆ¸å»ºãƒ»ãƒãƒ³ã‚·ãƒ§ãƒ³ç”¨ã®ã‚³ãƒ¼ãƒ‰ã¯å‰Šé™¤ãƒ»å¤‰æ›´ã›ãšã€æ¡ä»¶åˆ†å²ã‚’è¿½åŠ ã™ã‚‹ã®ã¿
2. **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®ä¿æŒ**ï¼šåœŸåœ°ä»¥å¤–ã®å ´åˆã¯å¿…ãšå¾“æ¥ã®å‡¦ç†ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
3. **APIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®åˆ†é›¢**ï¼šåœŸåœ°ç”¨ã¨å»ºç‰©ç”¨ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®Œå…¨ã«åˆ†é›¢

### 3.3 ãƒ†ã‚¹ãƒˆç¢ºèªé …ç›®
- [ ] æˆ¸å»º(02)ã®æ¤œç´¢ãŒå¾“æ¥é€šã‚Šå‹•ä½œã™ã‚‹ã“ã¨
- [ ] ãƒãƒ³ã‚·ãƒ§ãƒ³(07)ã®æ¤œç´¢ãŒå¾“æ¥é€šã‚Šå‹•ä½œã™ã‚‹ã“ã¨
- [ ] åœŸåœ°(01)ã®æ¤œç´¢ã§åœŸåœ°ç‰©ä»¶ã®ã¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
- [ ] åœŸåœ°(01)ã®æ¤œç´¢ã§ç¯‰å¹´æ•°é–¢é€£ã®é …ç›®ãŒéè¡¨ç¤ºã«ãªã‚‹ã“ã¨
- [ ] åœŸåœ°(01)ã®æ¤œç´¢ã§é¢ç©ãŒã€ŒåœŸåœ°é¢ç©ã€ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨

## 4. å®Ÿè£…å„ªå…ˆé †ä½

1. **ã€æœ€å„ªå…ˆã€‘åŸºæœ¬å‹•ä½œã®ä¿®æ­£**
   - isLandãƒ•ãƒ©ã‚°ã®è¿½åŠ 
   - getAreaé–¢æ•°ã®ä¿®æ­£
   - å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®æ¡ä»¶åˆ†å²

2. **ã€é«˜å„ªå…ˆã€‘ãƒ‡ãƒ¼ã‚¿å–å¾—ã®ä¿®æ­£**
   - APIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¡ä»¶åˆ†å²
   - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã®ä¿®æ­£

3. **ã€ä¸­å„ªå…ˆã€‘è¡¨ç¤ºã®æœ€é©åŒ–**
   - ãƒ©ãƒ™ãƒ«ãƒ»ã‚¿ã‚¤ãƒˆãƒ«ã®å‹•çš„å¤‰æ›´
   - ã‚°ãƒ©ãƒ•ã®è¡¨ç¤º/éè¡¨ç¤ºåˆ¶å¾¡

4. **ã€ä½å„ªå…ˆã€‘è©³ç´°èª¿æ•´**
   - MLåˆ†æã®åœŸåœ°å¯¾å¿œ
   - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æœ€é©åŒ–

---

## 5. Renderã®APIå´ã®å¯¾å¿œçŠ¶æ³ã¨å¿…è¦ãªä¿®æ­£

### 5.1 ç¾åœ¨ã®APIä»•æ§˜ï¼ˆapp.pyï¼‰
ç¾åœ¨ã®Render APIã¯ä»¥ä¸‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘ä»˜ã‘ã¦ã„ã¾ã™ï¼š
- `min_area` / `max_area`: ä¸€èˆ¬çš„ãªé¢ç©ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆåœŸåœ°ãƒ»å»ºç‰©å…±é€šï¼‰
- `min_year` / `max_year`: å»ºç¯‰å¹´ãƒ•ã‚£ãƒ«ã‚¿
- `property_type`: ç‰©ä»¶ç¨®åˆ¥ï¼ˆãƒãƒ³ã‚·ãƒ§ãƒ³/æˆ¸å»º/åœŸåœ°ï¼‰

### 5.2 APIå´ã§å¿…è¦ãªä¿®æ­£

#### â‘  ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¿½åŠ ï¼ˆapp.py:195-205è¡Œç›®ï¼‰
```python
async def search_properties(
    # æ—¢å­˜ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    prefecture: str = Query(...),
    city: Optional[str] = Query(None),
    district: Optional[str] = Query(None),
    property_type: str = Query("ãƒãƒ³ã‚·ãƒ§ãƒ³"),

    # åœŸåœ°ãƒ»å»ºç‰©ã‚’åŒºåˆ¥ã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 
    area_min: Optional[float] = Query(None, description="åœŸåœ°é¢ç©ã®æœ€å°å€¤ï¼ˆã¡ï¼‰"),
    area_max: Optional[float] = Query(None, description="åœŸåœ°é¢ç©ã®æœ€å¤§å€¤ï¼ˆã¡ï¼‰"),
    building_area_min: Optional[float] = Query(None, description="å»¶åºŠé¢ç©ã®æœ€å°å€¤ï¼ˆã¡ï¼‰"),
    building_area_max: Optional[float] = Query(None, description="å»¶åºŠé¢ç©ã®æœ€å¤§å€¤ï¼ˆã¡ï¼‰"),
    build_year_min: Optional[int] = Query(None, description="å»ºç¯‰å¹´ã®æœ€å°å€¤"),
    build_year_max: Optional[int] = Query(None, description="å»ºç¯‰å¹´ã®æœ€å¤§å€¤"),

    # æ—¢å­˜ã®æ±ç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚æ®‹ã™
    min_area: Optional[float] = Query(None, deprecated=True),
    max_area: Optional[float] = Query(None, deprecated=True),
    min_year: Optional[int] = Query(None, deprecated=True),
    max_year: Optional[int] = Query(None, deprecated=True)
):
```

#### â‘¡ ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã®ä¿®æ­£ï¼ˆreal_estate_client.pyï¼‰
```python
# ç‰©ä»¶ã‚¿ã‚¤ãƒ—åˆ¤å®š
is_land = property_type == "01" or property_type == "åœŸåœ°"

# ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å‡¦ç†
if is_land:
    # åœŸåœ°ã®å ´åˆï¼šåœŸåœ°é¢ç©ã§ãƒ•ã‚£ãƒ«ã‚¿
    if area_min or area_max:
        filtered = [item for item in data
                   if (not area_min or item['åœŸåœ°é¢ç©'] >= area_min) and
                      (not area_max or item['åœŸåœ°é¢ç©'] <= area_max)]
else:
    # å»ºç‰©ã®å ´åˆï¼šå»¶åºŠé¢ç©ã¨ç¯‰å¹´æ•°ã§ãƒ•ã‚£ãƒ«ã‚¿
    if building_area_min or building_area_max:
        filtered = [item for item in data
                   if (not building_area_min or item['å»¶åºŠé¢ç©'] >= building_area_min) and
                      (not building_area_max or item['å»¶åºŠé¢ç©'] <= building_area_max)]
    if build_year_min or build_year_max:
        filtered = [item for item in filtered
                   if (not build_year_min or item['å»ºç¯‰å¹´'] >= build_year_min) and
                      (not build_year_max or item['å»ºç¯‰å¹´'] <= build_year_max)]
```

#### â‘¢ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿ã®èª¿æ•´
```python
# MLåˆ†æç”¨ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™
if is_land:
    # åœŸåœ°ã®å ´åˆã¯åœŸåœ°é¢ç©ã‚’ä½¿ç”¨
    for item in data:
        item['åˆ†æç”¨é¢ç©'] = item.get('åœŸåœ°é¢ç©', 0)
        item['å»ºç¯‰å¹´'] = None  # åœŸåœ°ã«ã¯å»ºç¯‰å¹´ãªã—
else:
    # å»ºç‰©ã®å ´åˆã¯å»¶åºŠé¢ç©ã‚’ä½¿ç”¨
    for item in data:
        item['åˆ†æç”¨é¢ç©'] = item.get('å»¶åºŠé¢ç©', 0) or item.get('å°‚æœ‰é¢ç©', 0)
```

### 5.3 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã¨ã®é€£æº
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆMarketAnalysis.tsxï¼‰ã‹ã‚‰é€ä¿¡ã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼š
```typescript
// åœŸåœ°ã®å ´åˆ
{
  property_type: '01',
  area_min: 100,
  area_max: 120,
  // building_area_min/max, build_year_min/maxã¯é€ä¿¡ã—ãªã„
}

// æˆ¸å»ºãƒ»ãƒãƒ³ã‚·ãƒ§ãƒ³ã®å ´åˆ
{
  property_type: '02', // ã¾ãŸã¯ '07'
  building_area_min: 90,
  building_area_max: 110,
  build_year_min: 2010,
  build_year_max: 2020,
  // area_min/maxã¯é€ä¿¡ã—ãªã„
}
```

### 5.4 APIä¿®æ­£ã®å½±éŸ¿ç¯„å›²
- **å¾Œæ–¹äº’æ›æ€§ç¶­æŒ**ï¼šæ—¢å­˜ã®`min_area`/`max_area`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯æ®‹ã™ãŸã‚ã€æ—¢å­˜å®Ÿè£…ã¸ã®å½±éŸ¿ãªã—
- **æ®µéšçš„ç§»è¡Œ**ï¼šæ–°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å„ªå…ˆçš„ã«ä½¿ç”¨ã—ã€ãªã‘ã‚Œã°æ—§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- **æ˜ç¢ºãªåˆ†é›¢**ï¼šåœŸåœ°ã¨å»ºç‰©ã§ä½¿ç”¨ã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ˜ç¢ºã«åˆ†é›¢