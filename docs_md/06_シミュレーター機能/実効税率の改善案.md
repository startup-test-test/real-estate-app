# 実効税率入力フィールドの改善案

## 現状の問題点
1. 実効税率が自由入力のため、ユーザーが適切な値を判断しにくい
2. 個人と法人で税率体系が異なるが、UIが同じ
3. 譲渡所得税と運用中の税率の違いが不明確

## 改善案

### 案1: セレクトボックス + カスタム入力（推奨）

#### 法人の場合
```
実効税率: [セレクトボックス▼]
  ├─ 15% - 中小法人（所得800万円以下）
  ├─ 23% - 中小法人（所得800万円超）
  ├─ 30% - 標準税率
  ├─ 34% - 大企業（地方税込み）
  └─ カスタム → [数値入力フィールド]
```

#### 個人の場合
```
所得税率: [セレクトボックス▼]
  ├─ 5% - 課税所得195万円以下
  ├─ 10% - 課税所得330万円以下
  ├─ 20% - 課税所得695万円以下
  ├─ 23% - 課税所得900万円以下
  ├─ 33% - 課税所得1800万円以下
  ├─ 40% - 課税所得4000万円以下
  ├─ 45% - 課税所得4000万円超
  └─ カスタム → [数値入力フィールド]

※譲渡所得税は自動計算（短期40%/長期20%）
```

### 案2: プリセット選択 + 詳細設定

```
税率設定:
[◉] 簡易設定（推奨）
  法人：[中小法人15% ▼]
  個人：[所得税20% ▼]

[ ] 詳細設定
  実効税率: [___]%
```

### 案3: 現状維持 + ヘルプ表示強化

現在の数値入力フィールドを維持し、以下を追加：
- プレースホルダーで推奨値を表示
- ツールチップで税率の目安を詳細説明
- 「？」アイコンクリックで税率早見表をモーダル表示

## 実装優先度

**推奨：案1**
- メリット：
  - ユーザーが適切な税率を選びやすい
  - カスタム入力も可能で柔軟性がある
  - 個人/法人で異なるUIを提供できる

- デメリット：
  - 実装工数がやや多い
  - UIが複雑になる可能性

## 実装に必要な変更

### フロントエンド（Simulator.tsx）
1. 税率選択用のセレクトボックスコンポーネント追加
2. 個人/法人で表示を切り替えるロジック
3. カスタム選択時の入力フィールド表示制御

### バックエンド（calculations.py）
- 変更不要（現在の実装で対応可能）

### データ型（simulation.ts）
- 変更不要（effective_tax_rateフィールドで対応可能）

## 段階的実装案

### Phase 1（即実装可能）
- ツールチップの内容を充実させる
- プレースホルダーで推奨値を表示

### Phase 2（次回リリース）
- セレクトボックス実装
- 個人/法人でUI切り替え

### Phase 3（将来）
- 税率早見表モーダル
- 税額シミュレーション機能