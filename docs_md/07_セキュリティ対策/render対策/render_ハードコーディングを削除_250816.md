# Render APIハードコーディング削除対応方針書

**作成日**: 2025年8月16日  
**作成者**: Claude Code  
**ステータス**: 検討中  
**優先度**: 高

## 📋 目次

1. [エグゼクティブサマリー](#エグゼクティブサマリー)
2. [現状の問題点](#現状の問題点)
3. [過去の対応履歴と失敗事例](#過去の対応履歴と失敗事例)
4. [技術的制約と課題](#技術的制約と課題)
5. [解決方針](#解決方針)
6. [実装設計](#実装設計)
7. [リスク評価](#リスク評価)
8. [実装計画](#実装計画)

---

## エグゼクティブサマリー

### 概要
現在、Render APIのURLがフロントエンドコードにハードコーディングされており、以下の問題が発生している：
- 環境変数が正しく機能しない（Codespaces環境）
- APIが誰でも使える状態（セキュリティリスク）
- 保守性の低下

### 推奨対応
**フロントエンド側での環境判定による動的URL切り替え**を実装する。バックエンド側のCORS設定は現状維持（`allow_origins=["*"]`）とする。

---

## 現状の問題点

### 1. コードの現状

```
┌─────────────────────────────────────────────────┐
│  src/pages/Simulator.tsx (Line 793)            │
├─────────────────────────────────────────────────┤
│                                                 │
│  // 環境変数の問題が解決するまで一時的に          │
│  // ハードコーディング                          │
│  const API_BASE_URL =                          │
│    'https://real-estate-app-rwf1.onrender.com' │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 2. 問題の構造

```
┌──────────────────┐     ┌──────────────────┐     ┌──────────────────┐
│                  │     │                  │     │                  │
│   問題A:         │     │   問題B:         │     │   問題C:         │
│   ハードコード   │ ──> │   セキュリティ   │ ──> │   環境変数       │
│   されたURL      │     │   リスク         │     │   が効かない     │
│                  │     │                  │     │                  │
└──────────────────┘     └──────────────────┘     └──────────────────┘
         ↓                        ↓                        ↓
    保守性低下              誰でも使える           Codespaces問題
```

### 3. 影響範囲

| 項目 | 現在の状態 | 影響度 |
|------|-----------|--------|
| **開発効率** | 環境変数が使えず手動修正 | 🟡 中 |
| **セキュリティ** | APIが公開状態 | 🔴 高 |
| **保守性** | URL変更時に手動修正必要 | 🟡 中 |
| **拡張性** | 新環境追加が困難 | 🟡 中 |

---

## 過去の対応履歴と失敗事例

### タイムライン

```
2025年7月16日    7月24日        8月12日        8月14日        8月15日        8月16日
    │              │              │              │              │              │
    ▼              ▼              ▼              ▼              ▼              ▼
┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐
│セキュリ │   │CORS設定 │   │Edge     │   │リスク   │   │環境変数 │   │本方針書 │
│ティ対策 │──>│カスタム │──>│Functions│──>│評価実施 │──>│調査     │──>│作成     │
│62件実装 │   │実装     │   │改善     │   │現状維持 │   │失敗確認 │   │         │
└─────────┘   └─────────┘   └─────────┘   └─────────┘   └─────────┘   └─────────┘
    ↓              ↓              ↓              ↓              ↓
 システム       複雑化で       部分的        全許可で        Viteと
 障害発生       失敗          成功          安定稼働      互換性なし
```

### 失敗パターンの分析

#### パターン1: 過度なセキュリティ実装（7月16日）
```
┌────────────────────────────────────┐
│  62件のセキュリティ脆弱性を一度に修正  │
└────────────────────────────────────┘
                 ↓
         [システム全体が動作不能]
                 ↓
    ┌───────────────────────────┐
    │  学習事項:                 │
    │  ・段階的な実装が必要        │
    │  ・動作確認の重要性          │
    │  ・複雑性のリスク            │
    └───────────────────────────┘
```

#### パターン2: CORS設定での失敗（7月24日）
```
┌──────────────────────────────────────────────┐
│  カスタムミドルウェアでCodespaces対応を試みる   │
└──────────────────────────────────────────────┘
                      ↓
    [コードが複雑になりすぎて保守困難]
                      ↓
         ┌────────────────────┐
         │  問題点:             │
         │  ・環境変数管理が煩雑  │
         │  ・デバッグが困難      │
         │  ・新環境対応が大変    │
         └────────────────────┘
```

#### パターン3: 環境変数での失敗（8月15日）
```
┌─────────────────────────────────────┐
│  Codespaces SecretsでVite環境変数設定 │
└─────────────────────────────────────┘
                  ↓
        [Viteに環境変数が渡らない]
                  ↓
      ┌──────────────────────┐
      │  原因:                │
      │  ・Viteの仕様          │
      │  ・.envファイル優先     │
      │  ・システム環境変数無視  │
      └──────────────────────┘
```

---

## 技術的制約と課題

### 1. 環境別の制約

```
┌─────────────────────────────────────────────────────────────┐
│                        環境別制約マトリックス                   │
├──────────────┬──────────────────┬──────────────────────────┤
│     環境      │       URL        │         制約事項          │
├──────────────┼──────────────────┼──────────────────────────┤
│  Codespaces  │  動的に変化       │  ・URLが毎回変わる         │
│              │  xxx-5173.app... │  ・環境変数が効かない       │
├──────────────┼──────────────────┼──────────────────────────┤
│  dev.ooya    │  固定            │  ・Basic認証あり          │
│  .tech       │                  │  ・安定した環境           │
├──────────────┼──────────────────┼──────────────────────────┤
│  ooya.tech   │  固定            │  ・本番環境              │
│              │                  │  ・変更は慎重に           │
├──────────────┼──────────────────┼──────────────────────────┤
│  localhost   │  固定            │  ・開発者のローカル        │
│              │                  │  ・各自の環境差あり        │
└──────────────┴──────────────────┴──────────────────────────┘
```

### 2. 技術スタックの制約

```
           Frontend                    Backend
    ┌──────────────────┐      ┌──────────────────┐
    │                  │      │                  │
    │     Vite +       │      │    FastAPI +     │
    │     React        │ <--> │    Render        │
    │                  │      │                  │
    └──────────────────┘      └──────────────────┘
            ↓                          ↓
    ┌──────────────────┐      ┌──────────────────┐
    │   制約事項:       │      │   制約事項:       │
    │  ・VITE_プレ      │      │  ・CORS設定       │
    │    フィックス必須  │      │  ・無料プラン      │
    │  ・.env優先       │      │  ・コールドスタート│
    └──────────────────┘      └──────────────────┘
```

---

## 解決方針

### 基本方針

```
┌─────────────────────────────────────────────────────────┐
│                      解決方針の3原則                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. 動いているものを壊さない（Do No Harm）                │
│     └─> バックエンドのCORS設定は触らない                 │
│                                                         │
│  2. シンプルに保つ（Keep It Simple）                     │
│     └─> フロントエンド側で環境判定                       │
│                                                         │
│  3. 段階的に改善（Incremental Improvement）              │
│     └─> まずハードコーディング削除から                   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### アプローチの比較

```
┌────────────────┬────────────┬────────────┬────────────┬────────────┐
│    アプローチ   │  実装難易度 │   リスク    │  保守性     │   推奨度    │
├────────────────┼────────────┼────────────┼────────────┼────────────┤
│ A.現状維持      │     -      │     低     │     低     │     🟡     │
│ (ハードコード)  │            │            │            │            │
├────────────────┼────────────┼────────────┼────────────┼────────────┤
│ B.フロント判定  │     低     │     低     │     高     │     🟢     │
│ (推奨)         │            │            │            │    ★★★★★   │
├────────────────┼────────────┼────────────┼────────────┼────────────┤
│ C.環境変数      │     高     │     高     │     中     │     🔴     │
│ (再挑戦)       │            │            │            │     ★★     │
├────────────────┼────────────┼────────────┼────────────┼────────────┤
│ D.CORS制限     │   非常に高  │   非常に高  │     低     │     🔴     │
│ (再実装)       │            │            │            │      ★     │
└────────────────┴────────────┴────────────┴────────────┴────────────┘
```

---

## 実装設計

### 1. アーキテクチャ

```
┌──────────────────────────────────────────────────────────────┐
│                     フロントエンド環境判定システム               │
└──────────────────────────────────────────────────────────────┘

    [ユーザーアクセス]
           ↓
    ┌─────────────┐
    │   Browser   │
    │             │
    │ window.     │
    │ location.   │
    │ hostname    │
    └─────────────┘
           ↓
    ┌─────────────────────────────────────┐
    │        環境判定ロジック                │
    │        (src/config/api.ts)           │
    ├─────────────────────────────────────┤
    │                                     │
    │  if (hostname === 'ooya.tech')     │
    │    return PRODUCTION_API            │
    │                                     │
    │  if (hostname === 'dev.ooya.tech') │
    │    return STAGING_API               │
    │                                     │
    │  if (hostname.includes              │
    │      ('.app.github.dev'))           │
    │    return DEVELOPMENT_API           │
    │                                     │
    │  return DEFAULT_API                 │
    │                                     │
    └─────────────────────────────────────┘
           ↓
    ┌─────────────┐
    │  Simulator  │
    │    .tsx     │
    │             │
    │  API呼び出し │
    └─────────────┘
           ↓
    ┌─────────────┐
    │   Render    │
    │     API     │
    └─────────────┘
```

### 2. ファイル構成

```
bolt_front/
├── src/
│   ├── config/              [新規作成]
│   │   └── api.ts          # API設定と環境判定
│   │
│   └── pages/
│       └── Simulator.tsx    [修正]
│           └── Line 793: ハードコーディング削除
```

### 3. 実装コード構造

#### 新規ファイル: `src/config/api.ts`

```typescript
┌─────────────────────────────────────────────┐
│  環境判定関数                                │
├─────────────────────────────────────────────┤
│                                             │
│  getSimulatorApiUrl(): string               │
│    ├── 環境判定ロジック                      │
│    ├── URLマッピング                         │
│    └── デフォルト値返却                      │
│                                             │
├─────────────────────────────────────────────┤
│  定数定義                                   │
├─────────────────────────────────────────────┤
│                                             │
│  API_ENDPOINTS = {                          │
│    SIMULATOR: getSimulatorApiUrl()          │
│    SIMULATOR_HEALTH: ...                    │
│    SIMULATOR_CALCULATE: ...                 │
│    MARKET_ANALYSIS: ...                     │
│  }                                          │
│                                             │
├─────────────────────────────────────────────┤
│  デバッグ関数                                │
├─────────────────────────────────────────────┤
│                                             │
│  debugApiConfig(): void                     │
│    └── 現在の環境情報をコンソール出力         │
│                                             │
└─────────────────────────────────────────────┘
```

#### 修正ファイル: `src/pages/Simulator.tsx`

```typescript
┌─────────────────────────────────────────────┐
│  変更前（Line 793）:                         │
├─────────────────────────────────────────────┤
│                                             │
│  const API_BASE_URL =                       │
│    'https://real-estate-app-rwf1            │
│     .onrender.com';                         │
│                                             │
├─────────────────────────────────────────────┤
│  変更後:                                    │
├─────────────────────────────────────────────┤
│                                             │
│  import { API_ENDPOINTS }                   │
│    from '../config/api';                    │
│                                             │
│  const API_BASE_URL =                       │
│    API_ENDPOINTS.SIMULATOR;                 │
│                                             │
└─────────────────────────────────────────────┘
```

---

## リスク評価

### リスクマトリックス

```
        影響度
          ↑
      高  │ ┌─────┐
          │ │  C  │         A: APIのURL公開
          │ └─────┘         B: 判定ロジックミス
      中  │     ┌─────┐     C: CORS設定変更
          │     │  B  │     D: 新環境対応
          │     └─────┘
      低  │ ┌─────┐ ┌─────┐
          │ │  A  │ │  D  │
          │ └─────┘ └─────┘
          └────────────────→
            低   中   高     発生確率
```

### リスク対応策

| リスク | 発生確率 | 影響度 | 対応策 |
|--------|---------|--------|--------|
| **A. APIのURL公開** | 高 | 低 | 元々公開情報なので受容 |
| **B. 判定ロジックミス** | 中 | 中 | テストで確認、段階的リリース |
| **C. CORS設定変更** | 低 | 高 | 現状維持で回避 |
| **D. 新環境対応** | 低 | 低 | 設定ファイル更新で対応 |

---

## 実装計画

### フェーズ分割

```
┌──────────────────────────────────────────────────────────────┐
│                         実装ロードマップ                       │
└──────────────────────────────────────────────────────────────┘

Phase 1: 準備（現在）
├── ドキュメント作成 ✅
├── リスク評価 ✅
└── 方針決定 ✅

Phase 2: 実装（次ステップ）
├── config/api.ts作成
├── Simulator.tsx修正
└── 動作確認

Phase 3: テスト
├── Codespaces環境
├── dev.ooya.tech
└── localhost

Phase 4: デプロイ
├── developブランチ
├── dev.ooya.techで確認
└── mainブランチ

Phase 5: 監視
├── エラー監視
├── パフォーマンス確認
└── フィードバック収集
```

### タイムライン

```
Day 1（8/16）     Day 2          Day 3          Day 4
    │              │              │              │
    ▼              ▼              ▼              ▼
┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐
│ 方針決定 │──>│  実装   │──>│ テスト  │──>│デプロイ │
│ (本書)   │   │         │   │         │   │         │
└─────────┘   └─────────┘   └─────────┘   └─────────┘
```

### チェックリスト

#### Phase 2: 実装
- [ ] `src/config/api.ts`ファイル作成
- [ ] 環境判定ロジック実装
- [ ] API定数定義
- [ ] デバッグ関数実装
- [ ] `Simulator.tsx`のインポート追加
- [ ] ハードコーディング削除
- [ ] ビルド確認

#### Phase 3: テスト
- [ ] Codespaces環境での動作確認
- [ ] localhost環境での動作確認
- [ ] dev.ooya.tech環境での動作確認
- [ ] APIコール成功確認
- [ ] エラーハンドリング確認

#### Phase 4: デプロイ
- [ ] developブランチへコミット
- [ ] GitHub Actionsの成功確認
- [ ] dev.ooya.techでの動作確認
- [ ] mainブランチへのマージ準備

---

## 成功指標

### 定量的指標
- ✅ ハードコーディング箇所: 1 → 0
- ✅ 環境対応数: 1 → 4+
- ✅ 設定変更時の修正箇所: 複数 → 1箇所

### 定性的指標
- ✅ 開発者体験の向上
- ✅ 保守性の改善
- ✅ 拡張性の確保

---

## 付録

### A. 関連ドキュメント
- [セキュリティ脆弱性レポート_20250814.md](./セキュリティ脆弱性レポート_20250814.md)
- [環境変数エラー調査_250815.md](../03_リファクタリング/環境変数エラー調査_250815.md)
- [開発日報_250815_1.md](../02_日報/開発日報_250815_1.md)

### B. 参考コミット
- `32b7010`: CORS設定カスタム実装（失敗）
- `70df4f3`: Edge Functions CORS改善
- `bbd34a4`: Stripe決済リダイレクトURL修正
- `e1aa61c`: 環境変数管理改善（ハードコーディング追加）

### C. 用語集
- **CORS**: Cross-Origin Resource Sharing（異なるドメイン間の通信制御）
- **ハードコーディング**: コードに値を直接記述すること
- **環境変数**: 実行環境ごとに異なる設定値
- **Codespaces**: GitHubのクラウド開発環境

---

## 📝 追記：セキュリティ対策に関する詳細検討（2025年8月16日追加）

### 背景情報（他のAIへの共有用）

このセクションは、Render APIのセキュリティ対策について深掘りした議論の記録です。ChatGPTやGeminiなど他のAIに相談する際の参考情報として追記しました。

**現在の構成：**
- フロントエンド：React (Vite) - GitHub Codespacesで開発、Xserverでホスティング
- バックエンド：FastAPI (Python) - Render.comで無料ホスティング
- データベース：Supabase
- 決済：Stripe

---

## 🔐 セキュリティ対策の追加検討事項

### 1. Render APIの現在の認証状態

#### 現状分析
```python
# backend/simulator-api/app.py の現在の状態

# CORS設定（26-33行目）
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # 全てのオリジンを許可
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# APIエンドポイント（認証なし）
@app.post("/api/simulate")
def run_simulation(property_data: dict):
    # 認証チェックなし - 誰でも呼び出し可能
    validation_errors = validate_simulator_input(property_data)
    # ...
```

**問題点：**
- APIキー認証が実装されていない
- レート制限がない
- 誰でも無制限に使用可能

---

### 2. APIキー実装の可能性と制約

#### 技術的には可能だが、フロントエンドオンリーのアーキテクチャでは問題がある

```
現在のアーキテクチャ（SPAアプリケーション）：
┌─────────────────┐         ┌─────────────────┐
│   ブラウザ       │  直接   │   Render API    │
│   (React)       │ ──────> │   (FastAPI)     │
│                 │         │                 │
└─────────────────┘         └─────────────────┘
        ↓                           ↓
  JavaScriptは全て            現在認証なし
  ユーザーに見える

問題：APIキーをどこに置くか？
```

#### APIキーの保存場所と問題点

| 保存場所 | セキュリティ | ブラウザで使える | 結果 |
|---------|------------|----------------|------|
| **GitHub Secrets** | ✅ 安全 | ❌ 使えない | ビルド時のみ、実行時は届かない |
| **Render環境変数** | ✅ 安全 | ❌ 使えない | サーバー側のみ |
| **フロントエンドコード** | ❌ 危険 | ✅ 使える | 開発者ツールで丸見え |
| **.envファイル** | ❌ 危険 | ✅ 使える | ビルドに含まれ公開される |

---

### 3. Supabase/Stripeとの認証方式の違い

#### なぜSupabaseとStripeは動くのか？

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
サービス      キーの種類        公開可否    セキュリティ層
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Supabase     Anon Key         公開OK      RLS（Row Level Security）
             Service Key      秘密        データベース側で防御

Stripe       Publishable Key  公開OK      トークン化、サーバー検証
             Secret Key       秘密        決済処理の実行権限

Render API   なし（現状）      -          なし
             APIキー（案）     秘密必須    これが唯一の防御
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**重要な違い：**
- **Supabase Anon Key**：公開前提で設計。実際のセキュリティはRLSが担当
- **Stripe Publishable Key**：公開前提。カード情報の収集のみ可能、決済実行は不可
- **Render APIキー（もし作った場合）**：秘密必須。これが漏れると全機能が使える

---

### 4. GitHub Secretsの役割と誤解

#### GitHub Secretsが解決できること・できないこと

```
GitHub Secretsのライフサイクル：
┌──────────────────────────────────────────┐
│         GitHub Secrets                    │
│              ↓                            │
│    GitHub Actions（CI/CD）                │
│              ↓                            │
│     ビルド時の環境変数として使用            │
│              ↓                            │
│   静的ファイル生成（HTML/JS/CSS）          │
│              ↓                            │
│      デプロイ（Xserver等）                 │
│              ↓                            │
│   ユーザーのブラウザで実行                 │
│   ※ この時点でSecretsは存在しない         │
└──────────────────────────────────────────┘
```

**Supabaseの場合（なぜ動くか）：**
```javascript
// ビルド時（GitHub Actions）
process.env.DEV_SUPABASE_ANON_KEY // Secretsから取得

// ビルド後（ブラウザ）
const SUPABASE_KEY = 'eyJhbG...' // 実際の値に置換済み
// → Anon Keyは公開OKなので問題なし
```

**Render APIキーの場合（なぜ動かないか）：**
```javascript
// ビルド時
process.env.RENDER_API_KEY // Secretsから取得可能

// ビルド後（ブラウザ）
const API_KEY = 'sk-secret...' // コードに埋め込まれて公開される
// → 秘密キーが露出してしまう！
```

---

### 5. CORS設定の詳細と過去の失敗

#### CORS設定の変更場所と方法

**ファイル：** `backend/simulator-api/app.py`

**単純な制限（Codespacesが動かなくなる）：**
```python
# 特定ドメインのみ許可
app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "https://ooya.tech",
        "https://dev.ooya.tech",
        "http://localhost:5173"
        # Codespacesは動的URLなので含められない
    ],
    # ...
)
```

**過去の失敗例（2025年7月24日）：**
```python
# 複雑すぎて保守困難になった例
@app.middleware("http")
async def cors_middleware(request, call_next):
    origin = request.headers.get("origin")
    
    # Codespacesの動的判定
    if origin and ".app.github.dev" in origin:
        # 許可
    elif origin in PRODUCTION_ORIGINS:
        # 許可
    # ... 複雑なロジックが続く
```

---

### 6. 実現可能な解決策の比較

#### A. 現状維持（推奨度：🟡）
```
メリット：
- 動作が安定している
- 開発効率が良い
- 過去の失敗を避けられる

デメリット：
- 誰でもAPIを使える
- 将来的なリスク
```

#### B. 中間プロキシサーバー構築（推奨度：🟢）
```
アーキテクチャ：
┌──────────┐    ┌──────────────┐    ┌──────────┐
│ ブラウザ  │───>│ Edge Function│───>│Render API│
│(キーなし) │    │ (キー保持)   │    │(キー認証) │
└──────────┘    └──────────────┘    └──────────┘

実装オプション：
- Supabase Edge Functions（既存インフラ活用）
- Vercel Functions
- Cloudflare Workers
```

#### C. レート制限の実装（推奨度：🟢）
```python
# slowapiライブラリを使用
from slowapi import Limiter
from slowapi.util import get_remote_address

limiter = Limiter(key_func=get_remote_address)

@app.post("/api/simulate")
@limiter.limit("100/hour")  # 1時間100回まで
def run_simulation(property_data: dict):
    # ...
```

#### D. Refererヘッダーチェック（推奨度：🟡）
```python
# 完璧ではないが一定の効果
from fastapi import Request, HTTPException

@app.post("/api/simulate")
def run_simulation(request: Request, property_data: dict):
    referer = request.headers.get("referer", "")
    allowed_domains = ["ooya.tech", "dev.ooya.tech", "github.dev"]
    
    if not any(domain in referer for domain in allowed_domains):
        raise HTTPException(status_code=403, detail="Forbidden")
```

---

### 7. 質問と回答のまとめ

#### Q1: Render APIにAPIキーを作って、GitHub Secretsに入れれば解決？
**A:** いいえ。GitHub Secretsはビルド時のみ使用可能で、ブラウザ実行時には届きません。

#### Q2: SupabaseやStripeは同じようにGitHub Secretsを使っているのでは？
**A:** 使っていますが、公開可能なキー（Anon Key、Publishable Key）のみです。秘密キーはサーバー側でのみ使用。

#### Q3: CORS設定はどこで行う？
**A:** `backend/simulator-api/app.py`の26-33行目。ただし、過去2回失敗しているため慎重に。

#### Q4: 他のユーザーがAPIを使える問題は解決する？
**A:** フロントエンド側の対応だけでは解決しません。サーバー側の認証実装が必要。

---

### 8. 推奨される段階的アプローチ

```
Phase 1: 現状把握とモニタリング（現在）
├── 使用量の監視
├── 異常アクセスの検知
└── コスト影響の評価

Phase 2: 簡易対策（必要に応じて）
├── レート制限の実装
├── Refererヘッダーチェック
└── ログ記録の強化

Phase 3: 本格的な認証（将来）
├── Edge Functionsでプロキシ構築
├── APIキー管理システム
└── ユーザー別の使用量制限
```

---

### 9. 他のAIへの相談ポイント

以下の点について、追加の意見を求めることを推奨：

1. **中間プロキシサーバーの最適な実装方法**
   - Supabase Edge Functions vs Vercel Functions vs その他
   - コスト対効果の比較

2. **レート制限の適切な設定値**
   - 1時間あたりの回数
   - IPベース vs トークンベース

3. **段階的移行の具体的な手順**
   - 現在の全許可から制限ありへの安全な移行方法

4. **代替案の検討**
   - BFF（Backend for Frontend）パターン
   - API Gateway の導入
   - サーバーレスアーキテクチャへの移行

---

**最終更新**: 2025年8月16日（追記含む）  
**次回レビュー**: 実装完了後