# 追加シナリオテスト一覧

**作成日**: 2025-08-09  
**バージョン**: 1.0.0  
**目的**: シミュレーター機能の網羅的テストのための追加シナリオ

## 1. 業務フローテスト

### 1.1 エンドツーエンドシナリオ
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| E2E_001 | 新規物件登録から保存まで | ログイン→新規作成→入力→計算→保存→一覧表示 | 全工程が正常完了 |
| E2E_002 | 既存物件の編集フロー | 一覧から選択→編集→再計算→上書き保存 | 変更が正しく反映 |
| E2E_003 | 物件比較シナリオ | 複数物件作成→比較機能利用→PDF出力 | 比較表が正しく生成 |
| E2E_004 | サンプルデータからのカスタマイズ | サンプル選択→値変更→保存 | カスタマイズ版が保存される |

### 1.2 データ連携テスト
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| DATA_001 | 複数タブでの同期 | 2つのタブで同じ物件を開く→片方で編集 | データ不整合の警告 |
| DATA_002 | セッションタイムアウト | 長時間放置後の操作 | 再ログイン促進 |
| DATA_003 | オフライン→オンライン | オフライン状態で入力→接続復帰→保存 | データ保持と保存成功 |
| DATA_004 | ブラウザバック操作 | 入力途中でブラウザバック→進む | 入力値が保持される |

## 2. パフォーマンステスト

### 2.1 負荷テスト
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| PERF_001 | 大量データ入力 | 全フィールド最大値入力→計算 | 3秒以内に計算完了 |
| PERF_002 | 連続計算 | 計算ボタン10回連続クリック | エラーなく処理 |
| PERF_003 | 長期間シミュレーション | 保有期間50年で計算 | タイムアウトしない |
| PERF_004 | 複雑な条件組み合わせ | 全オプション有効化→計算 | 正常に結果表示 |

### 2.2 メモリリークテスト
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| MEM_001 | 長時間操作 | 1時間連続で入力・計算を繰り返す | メモリ使用量が増加し続けない |
| MEM_002 | 大量グラフ生成 | グラフ表示→非表示を100回繰り返す | メモリリークなし |

## 3. アクセシビリティテスト

### 3.1 キーボード操作
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| ACC_001 | キーボードのみで全操作 | マウス不使用で全機能利用 | 全機能アクセス可能 |
| ACC_002 | ショートカットキー | Ctrl+S で保存、Ctrl+Enter で計算 | ショートカット動作 |
| ACC_003 | フォーカストラップ | モーダル表示時のTab操作 | モーダル内でループ |

### 3.2 スクリーンリーダー対応
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| SR_001 | ラベル読み上げ | 全入力フィールドのラベル確認 | 適切な説明文読み上げ |
| SR_002 | エラーメッセージ読み上げ | バリデーションエラー発生時 | エラー内容が明確に伝わる |
| SR_003 | 計算結果読み上げ | 結果表示時の読み上げ順序 | 論理的な順序で読み上げ |

## 4. 国際化・ローカライゼーション

### 4.1 多言語対応
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| I18N_001 | 言語切り替え | 日本語→英語→日本語 | 全UI要素が切り替わる |
| I18N_002 | 通貨表示 | 円/ドル表示切り替え | 正しいレート変換 |
| I18N_003 | 日付フォーマット | 和暦/西暦切り替え | 適切な表示形式 |

### 4.2 地域別対応
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| LOC_001 | タイムゾーン | 異なるタイムゾーンでの保存時刻 | 正しい時刻記録 |
| LOC_002 | 数値フォーマット | カンマ/ピリオド区切り | 地域設定に従う |

## 5. ブラウザ互換性テスト

### 5.1 主要ブラウザ
| テストID | ブラウザ | バージョン | テスト内容 |
|----------|----------|------------|----------|
| BROWSER_001 | Chrome | 最新版 | 全機能動作確認 |
| BROWSER_002 | Firefox | 最新版 | 全機能動作確認 |
| BROWSER_003 | Safari | 最新版 | 全機能動作確認 |
| BROWSER_004 | Edge | 最新版 | 全機能動作確認 |

### 5.2 モバイルブラウザ
| テストID | デバイス | ブラウザ | テスト内容 |
|----------|----------|----------|----------|
| MOBILE_001 | iPhone | Safari | タッチ操作、画面回転 |
| MOBILE_002 | Android | Chrome | タッチ操作、画面回転 |
| MOBILE_003 | iPad | Safari | タブレット最適化確認 |

## 6. データ整合性テスト

### 6.1 計算ロジック検証
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| CALC_001 | 複利計算精度 | 長期ローンの総返済額 | 銀行計算と一致 |
| CALC_002 | 税金計算 | 各種税率適用時の計算 | 国税庁基準と一致 |
| CALC_003 | 減価償却計算 | 定額法/定率法の切り替え | 会計基準に準拠 |
| CALC_004 | キャッシュフロー累計 | 30年間の累計値 | 誤差1円以内 |

### 6.2 データ保存・復元
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| SAVE_001 | 自動保存機能 | 入力中の自動保存 | データロスなし |
| SAVE_002 | インポート/エクスポート | CSV/Excel形式での入出力 | 完全なデータ復元 |
| SAVE_003 | バックアップ復元 | 削除データの復元 | 30日以内なら復元可能 |

## 7. エラーリカバリーテスト

### 7.1 異常終了対応
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| RECOVERY_001 | ブラウザクラッシュ | 強制終了後の再起動 | 入力データ復元 |
| RECOVERY_002 | ネットワーク切断 | 通信エラー時の対応 | 適切なエラーメッセージ |
| RECOVERY_003 | サーバーエラー | 500エラー時の対応 | リトライオプション表示 |

### 7.2 データ競合解決
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| CONFLICT_001 | 同時編集 | 複数ユーザーが同じデータ編集 | 競合検出と解決オプション |
| CONFLICT_002 | 楽観的ロック | 古いバージョンの更新試行 | 更新失敗と最新取得促進 |

## 8. コンプライアンステスト

### 8.1 法規制準拠
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| COMP_001 | 個人情報保護 | 個人情報の暗号化確認 | 適切な暗号化 |
| COMP_002 | Cookie同意 | Cookie使用の同意取得 | GDPR準拠 |
| COMP_003 | 利用規約同意 | 初回利用時の規約表示 | 同意なしでは利用不可 |

### 8.2 監査ログ
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| AUDIT_001 | 操作履歴記録 | 全操作のログ記録確認 | 完全な監査証跡 |
| AUDIT_002 | データ変更履歴 | 変更前後の値記録 | 変更履歴追跡可能 |

## 9. 統合テスト

### 9.1 外部サービス連携
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| INT_001 | 地図サービス連携 | 物件位置の地図表示 | 正確な位置表示 |
| INT_002 | 金融機関API連携 | 最新金利の自動取得 | リアルタイム更新 |
| INT_003 | 不動産DB連携 | 相場情報の取得 | 適切な相場表示 |

### 9.2 通知機能
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| NOTIFY_001 | メール通知 | 計算完了通知 | メール正常送信 |
| NOTIFY_002 | プッシュ通知 | 重要な更新通知 | デバイスに通知 |

## 10. 移行テスト

### 10.1 データ移行
| テストID | シナリオ | 詳細 | 期待結果 |
|----------|---------|------|----------|
| MIG_001 | 旧バージョンからの移行 | v1.0→v2.0データ移行 | データ完全性保持 |
| MIG_002 | 他システムからのインポート | 競合他社データ取込 | 適切なマッピング |

## 実施優先度

### 最優先（必須）
1. 業務フローテスト（E2E）
2. データ整合性テスト（CALC）
3. ブラウザ互換性テスト（BROWSER/MOBILE）

### 高優先度
4. パフォーマンステスト（PERF）
5. エラーリカバリーテスト（RECOVERY）
6. データ連携テスト（DATA）

### 中優先度
7. アクセシビリティテスト（ACC/SR）
8. セキュリティ関連（COMP/AUDIT）
9. 統合テスト（INT）

### 低優先度
10. 国際化テスト（I18N/LOC）
11. 移行テスト（MIG）
12. 通知機能（NOTIFY）

---

**推奨事項**:
- 自動化可能なテストは自動化ツール（Playwright, Cypress等）を導入
- 定期的な回帰テストの実施（最低月1回）
- 本番環境に近いステージング環境でのテスト実施
- ユーザー受け入れテスト（UAT）の実施