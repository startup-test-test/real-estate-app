# シミュレーターテスト管理統合ドキュメント

**作成日**: 2025-08-09  
**最終更新**: 2025-08-10  
**バージョン**: 3.2.0  
**対象システム**: 物件シミュレーター

---

## 📊 1. 進捗ダッシュボード

### 全体サマリー
| 項目 | 数値 | 進捗 |
|------|------|------|
| **テスト進捗** | 29/42 | 69.0% |
| **合格率** | 11/42 | 26.2% |
| **発見バグ数** | 23件 | - |
| **修正済みバグ** | 3/23 | 13.0% |
| **残作業** | 20件 | 87.0% |

### 本日の状況（2025-08-10）
- ✅ **昨日完了**: BUG_008（ゼロ値バリデーション）, BUG_013（表面利回り99%制限）
- 🔄 **進行中**: なし
- 📋 **次の優先タスク**: BUG_010（必須項目チェック）

### バグ優先度別状況
```
🔴 高優先度: 5件（未着手）
🟡 中優先度: 6件（未着手）  
🟢 低優先度: 6件（未着手）
✅ 修正済み: 3件
⚪ 対応不要: 3件
```

---

## 📝 2. テストシナリオ一覧（全42件）

### 2.1 正常系テストケース（3件）
| テストID | シナリオ | 入力条件 | 期待結果 | 実施状況 |
|----------|---------|---------|----------|----------|
| NORMAL_001 | 最小値入力パターン | 物件価格100万円、月額賃料1万円等の最小値 | 正常に計算され、全指標が表示される | ❌ 不合格 |
| NORMAL_002 | 最大値入力パターン | 物件価格10億円、月額賃料1000万円等の最大値 | 正常に計算され、グラフが適切に表示される | ❌ 不合格 |
| NORMAL_003 | 一般的な投資物件パターン | 物件価格2500万円、月額賃料11.5万円、ローン2000万円、金利2.5%、35年 | 全ての指標が妥当な範囲で計算される | ✅ 合格 |

### 2.2 異常系テストケース（5件）
| テストID | シナリオ | 入力条件 | 期待結果 | 実施状況 |
|----------|---------|---------|----------|----------|
| ERROR_001 | ゼロ値入力パターン | 物件価格0円、月額賃料0円 | エラーメッセージ表示、計算処理ブロック | ✅ 合格（修正済） |
| ERROR_002 | マイナス値入力パターン | 物件価格-5000万円、月額賃料-10万円 | 入力不可またはエラーメッセージ表示 | ✅ 合格 |
| ERROR_003 | 極端な値入力パターン | 物件価格999999999万円、表面利回り999% | エラーまたは上限値で制限 | ❌ 不合格 |
| ERROR_004 | 空文字・NULL入力パターン | 必須項目を空欄のまま | エラーメッセージ表示 | ❌ 不合格 |
| ERROR_005 | 文字列入力パターン | 数値フィールドに「abc」「１２３」等 | 入力不可または自動変換 | ❌ 不合格 |

### 2.3 境界値テストケース（3件）
| テストID | シナリオ | 入力条件 | 期待結果 | 実施状況 |
|----------|---------|---------|----------|----------|
| BOUNDARY_001 | 建築年の境界値テスト | 建築年1900年、2025年、2050年 | 1900-2025年のみ受付 | ❌ 不合格 |
| BOUNDARY_002 | 表面利回りの境界値テスト | 物件価格と賃料の組み合わせで利回り0.1%、50%、99%、100% | 99%まで受付 | ✅ 合格（修正済） |
| BOUNDARY_003 | ローン条件の境界値テスト | 借入期間1年、50年、100年、金利0.1%、10%、50% | 妥当な範囲のみ受付 | ❌ 不合格 |

### 2.4 特殊ケーステスト（7件）
| テストID | シナリオ | 確認内容 | 期待結果 | 実施状況 |
|----------|---------|----------|----------|----------|
| SPECIAL_DEFAULT_001 | デフォルト値確認テスト | 新規作成時の初期値 | 仕様通りのデフォルト値 | ❌ 不合格 |
| SPECIAL_TAX_001 | 個人投資家（税率20%）パターン | 個人選択時の税率 | 20%がデフォルト | ✅ 合格（修正済） |
| SPECIAL_PERCENT_001 | 管理手数料パーセント入力テスト | 「3%」と入力 | 自動計算される | ❌ 不合格 |
| SPECIAL_001 | 物件価格変更時の自動計算 | 価格変更後の連動 | 適切に再計算 | ❌ 不合格 |
| SPECIAL_002 | 減価償却年数自動計算テスト | 構造と築年数から計算 | 正確な償却年数 | ✅ 合格 |
| SPECIAL_003 | コピー＆ペーストテスト | カンマ付き数値のペースト | 正しく処理 | ❌ 不合格 |
| SPECIAL_004 | 浮動小数点演算精度テスト | 長期計算の精度 | 誤差最小限 | ❌ 不合格 |

### 2.5 ユーザビリティテスト（3件）
| テストID | シナリオ | 確認内容 | 期待結果 | 実施状況 |
|----------|---------|----------|----------|----------|
| UX_001 | フォーカス動作テスト | Tab移動、フォーカス表示 | 適切な順序と表示 | ✅ 合格 |
| UX_002 | エラー回復テスト | エラー後の正常入力 | エラー状態クリア | ❌ 不合格 |
| UX_003 | レスポンシブテスト | モバイル表示 | 全デバイス対応 | ❌ 不合格 |

### 2.6 セキュリティテスト（3件）
| テストID | シナリオ | 攻撃手法 | 期待結果 | 実施状況 |
|----------|---------|----------|----------|----------|
| SECURITY_001 | SQLインジェクション対策 | 悪意あるSQL文入力 | 適切にエスケープ | ✅ 合格 |
| SECURITY_002 | XSS対策 | スクリプトタグ入力 | サニタイズ処理 | ✅ 合格 |
| SECURITY_003 | 巨大データ送信テスト | 1万文字以上入力 | 適切に制限 | ❌ 不合格 |

### 2.7 API連携テスト（2件）
| テストID | シナリオ | 確認内容 | 期待結果 | 実施状況 |
|----------|---------|----------|----------|----------|
| API_001 | タイムアウトテスト | API遅延時の動作 | 30秒でタイムアウト | ❌ 不合格 |
| API_002 | エラーレスポンステスト | 各種エラー時の表示 | 適切なメッセージ | ✅ 合格 |

### 2.8 追加実施済みテスト（BUG_008修正後）
| テストID | シナリオ | 結果 | 備考 |
|----------|---------|------|------|
| E2E_004 | サンプルデータからのカスタマイズ | ✅ 合格 | ゼロ値バリデーション正常動作 |
| PERF_001 | 大量データ入力 | ❌ 不合格 | BUG_022発見（表示崩れ） |
| CALC_004 | キャッシュフロー累計 | ❌ 不合格 | BUG_023発見（極小値での精度低下） |

---

## 🐛 3. バグ管理・修正計画

### ステータス凡例
- ✅ **Push済**: GitHubにプッシュ済み、テスト合格
- 🟡 **作業中**: 現在実装中
- 📋 **予定**: 本日または近日中に着手予定
- 🔵 **未着手**: まだ着手していない
- ⚪ **対応不要**: 仕様通りのため対応不要

### 3.1 修正済みバグ（3件）
| 不具合ID | 概要 | 修正内容 | 修正日 | GitHub | テスト実行 |
|----------|------|----------|--------|--------|------------|
| BUG_004 | 個人実効税率デフォルト | sampleData.ts L29: effectiveTaxRate: 20に変更 | 2025-08-09 | ✅ Push済 | ✅ 合格 |
| BUG_008 | ゼロ値バリデーション | Simulator.tsx L439-470: ゼロ値チェック追加 | 2025-08-09 | ✅ Push済 | ✅ 合格 |
| BUG_013 | 表面利回り上限チェック | Simulator.tsx L472-504: 99%上限チェック追加 | 2025-08-09 | ✅ Push済 | ✅ 合格 |

### 3.2 対応不要バグ（3件）
| 不具合ID | 概要 | 理由 |
|----------|------|------|
| BUG_001 | 管理手数料デフォルト値 | 5%が業界標準仕様 |
| BUG_002 | 固定資産税の計算ロジック | 物件価格×0.7%が正しい仕様 |
| BUG_003 | 空室率デフォルト値 | 0%が正しい仕様 |

### 3.3 🔴 高優先度バグ（5件）
| 不具合ID | 概要 | テスト内容 | 実際の結果 | 期待結果 | 修正内容 | 工数 | ステータス |
|----------|------|----------|------------|----------|----------|------|-----------|
| BUG_005 | 管理手数料％入力 | 「3%」「5%」と入力 | エラーで入力不可 | 自動で賃料×3%計算 | ％入力パーサー追加 | 4h | 🔵 未着手 |
| BUG_009 | 上限値チェック全般 | 物件価格999999999万円等 | 全て受付 | 各項目に上限値設定 | 全フィールドに上限値追加 | 3h | 🔵 未着手 |
| BUG_010 | 必須項目チェック | 空欄で計算実行 | エラーなし | 必須項目エラー表示 | 必須チェック追加 | 2h | 📋 予定 |
| BUG_019 | モバイル表示崩れ | iPhone(375px)表示 | 画面外にはみ出す | レスポンシブ対応 | メディアクエリ調整 | 4h | 🔵 未着手 |
| BUG_021 | APIタイムアウト | API遅延時 | 無限待機 | 30秒でタイムアウト | AbortController実装 | 2h | 🔵 未着手 |

### 3.4 🟡 中優先度バグ（6件）
| 不具合ID | 概要 | テスト内容 | 実際の結果 | 期待結果 | 修正内容 | 工数 | ステータス |
|----------|------|----------|------------|----------|----------|------|-----------|
| BUG_011 | 全角数字変換 | 「１２３４５」入力 | NaN表示 | 「12345」に変換 | 全角→半角変換処理 | 1h | 🔵 未着手 |
| BUG_012 | 未来年チェック | 建築年2026年入力 | 築年数「-1年」 | エラー表示 | 現在年以降の制限 | 1h | 🔵 未着手 |
| BUG_014 | ローン期間上限 | 借入期間100年 | 受付される | 最大50年 | 上限値チェック | 1h | 🔵 未着手 |
| BUG_015 | 自動計算タイミング | 価格変更後の管理費 | 手動値も上書き | 手動変更は保持 | フラグ管理 | 3h | 🔵 未着手 |
| BUG_016 | カンマ付き数値処理 | 「1,234,567」ペースト | 「1」だけ入力 | 「1234567」処理 | カンマ除去処理 | 2h | 🔵 未着手 |
| BUG_020 | 文字数上限 | 物件名1万文字 | 全て受付 | 200文字制限 | maxLength追加 | 1h | 🔵 未着手 |

### 3.5 🟢 低優先度バグ（6件）
| 不具合ID | 概要 | テスト内容 | 実際の結果 | 期待結果 | 修正内容 | 工数 | ステータス |
|----------|------|----------|------------|----------|----------|------|-----------|
| BUG_006 | 最小値での利回り計算 | 物件100万、賃料1万 | 利回り0% | 12%表示 | 計算ロジック修正 | 1h | 🔵 未着手 |
| BUG_007 | 大数値の表示形式 | 10億円表示 | 「10000000000」 | カンマ区切り | toLocaleString() | 1h | 🔵 未着手 |
| BUG_017 | 浮動小数点精度 | 30年計算 | 累積誤差360円 | 誤差1円以内 | Decimal型導入 | 2h | 🔵 未着手 |
| BUG_018 | エラー復帰処理 | エラー後の入力 | エラー表示残る | エラークリア | 状態管理改善 | 2h | 🔵 未着手 |
| BUG_022 | 大量データ表示崩れ | 巨大数値入力 | 画面外はみ出し | 適切に折り返し | overflow処理 | 1h | 🔵 未着手 |
| BUG_023 | 極小値での計算精度 | 0.001円入力 | 精度低下 | 適切な丸め | 最小単位制限 | 1h | 🔵 未着手 |

---

## 📈 4. 修正ロードマップ

### Phase 1: 緊急対応（1-2日）
- [ ] BUG_005: 管理手数料％入力
- [ ] BUG_010: 必須項目チェック
- [ ] BUG_009: 上限値チェック全般

### Phase 2: UX改善（3-4日）
- [ ] BUG_019: モバイル表示対応
- [ ] BUG_021: APIタイムアウト
- [ ] BUG_011: 全角数字変換

### Phase 3: 品質向上（5-6日）
- [ ] BUG_012, 014, 015, 016, 020: 中優先度バグ
- [ ] 回帰テスト実施

### Phase 4: 最終調整（7日以降）
- [ ] 低優先度バグの修正
- [ ] 全体テスト実施
- [ ] リリース準備

---

## 📊 5. 成功指標

| 指標 | 現状値 | 目標値 | 期限 |
|------|--------|--------|------|
| テスト合格率 | 14.3% | 95%以上 | 1週間後 |
| バグ修正率 | 13.0% | 100% | 1週間後 |
| 計算精度 | 誤差あり | 誤差0.01%以内 | Phase 3完了時 |
| モバイル対応 | 非対応 | 完全対応 | Phase 2完了時 |

---

## 🧪 6. テスト実行履歴

### 最新のテスト実行状況
| 実行日 | 実行環境 | テスト種別 | 実施者 | 結果 | 備考 |
|--------|---------|-----------|--------|------|------|
| 2025-08-10 | ローカル開発 | 手動テスト | - | 29/42件実施 | 11件合格、18件不合格 |
| 2025-08-09 | ローカル開発 | BUG修正確認 | - | 3件修正確認 | BUG_004, BUG_008, BUG_013 |

### GitHubへのプッシュ履歴
| 日付 | コミットハッシュ | 修正内容 | ステータス |
|------|----------------|----------|-----------|
| 2025-08-09 | 9d6c131 | 表面利回り99%制限 | ✅ マージ済 |
| 2025-08-09 | f0de416 | ゼロ値バリデーション | ✅ マージ済 |
| 2025-08-09 | 8e8ae2f | 個人実効税率20%修正 | ✅ マージ済 |

---

## 📝 7. 更新履歴

| 日付 | バージョン | 更新内容 |
|------|-----------|----------|
| 2025-08-09 | 1.0.0 | 初版作成（個別ファイル） |
| 2025-08-09 | 2.0.0 | BUG_008, BUG_013修正 |
| 2025-08-09 | 3.0.0 | 統合ドキュメント作成 |
| 2025-08-10 | 3.1.0 | テスト結果数値を正確に更新（29件実施、11件合格） |
| 2025-08-10 | 3.2.0 | ステータス列追加、テスト実行履歴セクション追加 |

---

**次のアクション**: BUG_009（上限値チェック全般）の実装開始