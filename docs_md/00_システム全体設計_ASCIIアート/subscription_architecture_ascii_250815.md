# ğŸ“Š Supabase/Stripe æœˆé¡èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆASCIIå›³ç‰ˆï¼‰

ä½œæˆæ—¥: 2025-08-15  
æœ€çµ‚æ›´æ–°: 2025-08-15

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Frontend (React/Vite)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ–™é‡‘ãƒ—ãƒ©ãƒ³   â”‚  â”‚  è§£ç´„ãƒ¢ãƒ¼ãƒ€ãƒ« â”‚  â”‚  å†é–‹ãƒœã‚¿ãƒ³  â”‚  â”‚ Dashboardâ”‚  â”‚
â”‚  â”‚   ãƒšãƒ¼ã‚¸     â”‚  â”‚              â”‚  â”‚              â”‚  â”‚          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                 â”‚                â”‚
          â–¼                  â–¼                 â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Supabase                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        Edge Functions                            â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚ â”‚create-checkout â”‚ â”‚cancel-         â”‚ â”‚resume-         â”‚       â”‚  â”‚
â”‚  â”‚ â”‚-session        â”‚ â”‚subscription    â”‚ â”‚subscription    â”‚       â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â”‚          â”‚                  â”‚                   â”‚                â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚ â”‚              handle-stripe-webhook                      â”‚      â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         Database                                 â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  users   â”‚  â”‚subscriptions â”‚  â”‚usage_limits  â”‚  â”‚propertiesâ”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               Stripe                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API     â”‚  â”‚  Checkout    â”‚  â”‚  Customer    â”‚  â”‚ Subscription â”‚  â”‚
â”‚  â”‚          â”‚â—„â”€â”¤  Session     â”‚â”€â”€â–ºâ”‚              â”‚â”€â”€â–ºâ”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         Webhook Events                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’³ æ–°è¦ãƒ—ãƒ©ãƒ³è³¼å…¥ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚     â”‚ Frontend â”‚     â”‚ Supabase â”‚     â”‚  Stripe  â”‚     â”‚ Webhook  â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚              â”‚                 â”‚                 â”‚                 â”‚
   â”‚ 1.ãƒ—ãƒ©ãƒ³é¸æŠ â”‚                 â”‚                 â”‚                 â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚                 â”‚                 â”‚
   â”‚              â”‚ 2.èªè¨¼ç¢ºèª      â”‚                 â”‚                 â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚                 â”‚
   â”‚              â”‚                 â”‚                 â”‚                 â”‚
   â”‚              â”‚ 3.create-checkout-session         â”‚                 â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚                 â”‚
   â”‚              â”‚                 â”‚ 4.ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆâ”‚                 â”‚
   â”‚              â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚
   â”‚              â”‚                 â”‚                 â”‚                 â”‚
   â”‚              â”‚ 5.ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURLâ”‚                 â”‚                 â”‚
   â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚                 â”‚
   â”‚              â”‚                 â”‚                 â”‚                 â”‚
   â”‚ 6.Stripeç”»é¢ â”‚                 â”‚                 â”‚                 â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚                 â”‚                 â”‚
   â”‚              â”‚                 â”‚                 â”‚                 â”‚
   â”‚ 7.ã‚«ãƒ¼ãƒ‰å…¥åŠ› â”‚                 â”‚                 â”‚                 â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚
   â”‚              â”‚                 â”‚                 â”‚                 â”‚
   â”‚              â”‚                 â”‚                 â”‚ 8.paymentæˆåŠŸ   â”‚
   â”‚              â”‚                 â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚              â”‚                 â”‚                 â”‚                 â”‚
   â”‚              â”‚                 â”‚ 9.webhookå—ä¿¡  â”‚                 â”‚
   â”‚              â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚              â”‚                 â”‚                 â”‚                 â”‚
   â”‚              â”‚                 â”‚ 10.DBæ›´æ–°      â”‚                 â”‚
   â”‚              â”‚                 â”œâ”€â”€â”€â”€â”€â”          â”‚                 â”‚
   â”‚              â”‚                 â”‚     â”‚          â”‚                 â”‚
   â”‚              â”‚                 â”‚â—„â”€â”€â”€â”€â”˜          â”‚                 â”‚
   â”‚              â”‚                 â”‚                 â”‚                 â”‚
   â”‚ 11.å®Œäº†ç”»é¢  â”‚                 â”‚                 â”‚                 â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
   â”‚              â”‚                 â”‚                 â”‚                 â”‚
```

## ğŸ”„ æœˆæ¬¡æ›´æ–°ãƒ•ãƒ­ãƒ¼

```
æ¯æœˆ1æ—¥ 0:00 (JST)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stripe  â”‚                    â”‚ Supabase â”‚                â”‚   User   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                                â”‚                           â”‚
     â”‚ 1. invoice.payment_succeeded  â”‚                           â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚
     â”‚                                â”‚                           â”‚
     â”‚                                â”‚ 2. subscriptionsæ›´æ–°      â”‚
     â”‚                                â”œâ”€â”€â”€â”€â”€â”                     â”‚
     â”‚                                â”‚     â”‚ current_periodæ›´æ–°  â”‚
     â”‚                                â”‚â—„â”€â”€â”€â”€â”˜                     â”‚
     â”‚                                â”‚                           â”‚
     â”‚                                â”‚ 3. usage_limitsæ›´æ–°       â”‚
     â”‚                                â”œâ”€â”€â”€â”€â”€â”                     â”‚
     â”‚                                â”‚     â”‚ monthly_count = 0  â”‚
     â”‚                                â”‚â—„â”€â”€â”€â”€â”˜                     â”‚
     â”‚                                â”‚                           â”‚
     â”‚                                â”‚                           â”‚
     â”‚                                â”‚ 4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚»ã‚¹æ™‚     â”‚
     â”‚                                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                â”‚                           â”‚
     â”‚                                â”‚ 5. check_and_reset_usage()â”‚
     â”‚                                â”œâ”€â”€â”€â”€â”€â”                     â”‚
     â”‚                                â”‚     â”‚ è‡ªå‹•ãƒªã‚»ãƒƒãƒˆç¢ºèª   â”‚
     â”‚                                â”‚â—„â”€â”€â”€â”€â”˜                     â”‚
     â”‚                                â”‚                           â”‚
     â”‚                                â”‚ 6. æ–°åˆ¶é™å€¤ã‚’è¿”ã™        â”‚
     â”‚                                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                                â”‚                           â”‚
```

## âŒ è§£ç´„ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            è§£ç´„å‡¦ç†ã®æµã‚Œ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ãƒ¦ãƒ¼ã‚¶ãƒ¼          Frontend        Edge Function       Stripe         DB
       â”‚                 â”‚                 â”‚               â”‚            â”‚
       â”‚ 1.è§£ç´„ãƒœã‚¿ãƒ³    â”‚                 â”‚               â”‚            â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚               â”‚            â”‚
       â”‚                 â”‚                 â”‚               â”‚            â”‚
       â”‚ 2.ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«  â”‚                 â”‚               â”‚            â”‚
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚               â”‚            â”‚
       â”‚                 â”‚                 â”‚               â”‚            â”‚
       â”‚ 3.è§£ç´„ç¢ºèª      â”‚                 â”‚               â”‚            â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚               â”‚            â”‚
       â”‚                 â”‚ 4.cancel-subscription           â”‚            â”‚
       â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚               â”‚            â”‚
       â”‚                 â”‚                 â”‚ 5.æœŸé–“çµ‚äº†è¨­å®šâ”‚            â”‚
       â”‚                 â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
       â”‚                 â”‚                 â”‚               â”‚            â”‚
       â”‚                 â”‚                 â”‚ 6.æ›´æ–°å®Œäº†    â”‚            â”‚
       â”‚                 â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
       â”‚                 â”‚                 â”‚               â”‚            â”‚
       â”‚                 â”‚                 â”‚ 7.DBæ›´æ–°      â”‚            â”‚
       â”‚                 â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                 â”‚                 â”‚               â”‚  status:   â”‚
       â”‚                 â”‚                 â”‚               â”‚ canceling  â”‚
       â”‚                 â”‚ 8.è§£ç´„äºˆå®šè¨­å®š  â”‚               â”‚            â”‚
       â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚            â”‚
       â”‚                 â”‚                 â”‚               â”‚            â”‚
       â”‚ 9.è§£ç´„äºˆå®šè¡¨ç¤º  â”‚                 â”‚               â”‚            â”‚
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚               â”‚            â”‚
       â”‚                 â”‚                 â”‚               â”‚            â”‚
       
       â–¼ æœŸé–“çµ‚äº†æ—¥ã«ãªã‚‹ã¨...
       
       â”‚                 â”‚                 â”‚               â”‚            â”‚
       â”‚                 â”‚                 â”‚ 10.è§£ç´„å®Œäº†é€šçŸ¥â”‚            â”‚
       â”‚                 â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
       â”‚                 â”‚                 â”‚ (subscription.deleted)     â”‚
       â”‚                 â”‚                 â”‚               â”‚            â”‚
       â”‚                 â”‚                 â”‚ 11.statusæ›´æ–°  â”‚            â”‚
       â”‚                 â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                 â”‚                 â”‚               â”‚  status:   â”‚
       â”‚                 â”‚                 â”‚               â”‚  cancelled â”‚
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«é–¢ä¿‚å›³                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     users        â”‚          â”‚   subscriptions      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ id (PK)              â”‚
â”‚ email            â”‚    1:1   â”‚ user_id (FK)         â”‚
â”‚ created_at       â”‚          â”‚ stripe_customer_id   â”‚
â”‚ updated_at       â”‚          â”‚ stripe_subscription_idâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ status               â”‚
         â”‚                    â”‚ price_id             â”‚
         â”‚                    â”‚ current_period_end   â”‚
         â”‚                    â”‚ current_period_start â”‚
         â”‚                    â”‚ cancel_at_period_end â”‚
         â”‚                    â”‚ canceled_at          â”‚
         â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:1                        1:N
         â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   usage_limits   â”‚          â”‚    properties    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚          â”‚ id (PK)          â”‚
â”‚ user_id (FK)     â”‚          â”‚ user_id (FK)     â”‚
â”‚ plan_type        â”‚          â”‚ name             â”‚
â”‚ max_properties   â”‚          â”‚ data (JSON)      â”‚
â”‚ monthly_count    â”‚          â”‚ created_at       â”‚
â”‚ reset_date       â”‚          â”‚ updated_at       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ãƒ—ãƒ©ãƒ³åˆ¥åˆ¶é™ç®¡ç†è¡¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ãƒ—ãƒ©ãƒ³æ¯”è¼ƒè¡¨                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ãƒ—ãƒ©ãƒ³    â”‚  æœˆé¡    â”‚  ç‰©ä»¶ç™»éŒ²æ•°  â”‚ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³â”‚  ãƒªã‚»ãƒƒãƒˆ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç„¡æ–™ãƒ—ãƒ©ãƒ³ â”‚    Â¥0    â”‚    3ä»¶ã¾ã§   â”‚    åˆ¶é™ãªã—    â”‚   æ¯æœˆ1æ—¥    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ â”‚   Â¥500   â”‚   10ä»¶ã¾ã§   â”‚    åˆ¶é™ãªã—    â”‚   æ¯æœˆ1æ—¥    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ  â”‚  Â¥1,500  â”‚    ç„¡åˆ¶é™    â”‚    åˆ¶é™ãªã—    â”‚      -       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰©ä»¶ç™»éŒ²æ™‚ã®åˆ¶é™ãƒã‚§ãƒƒã‚¯ãƒ•ãƒ­ãƒ¼ï¼š

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ ç‰©ä»¶ç™»éŒ²é–‹å§‹ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚ ãƒ—ãƒ©ãƒ³ç¢ºèª   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼              â–¼              â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   ç„¡æ–™   â”‚   â”‚ãƒ™ãƒ¼ã‚·ãƒƒã‚¯â”‚   â”‚ãƒ—ãƒ¬ãƒŸã‚¢ãƒ â”‚
     â”‚  (3ä»¶)   â”‚   â”‚  (10ä»¶)  â”‚   â”‚  (ç„¡åˆ¶é™)â”‚
     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                   â”‚ ç™»éŒ²æ•°ç¢ºèª   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ åˆ¶é™å†…   â”‚        â”‚ åˆ¶é™è¶…é â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
              â”‚                    â”‚
         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚ ç™»éŒ²è¨±å¯ â”‚        â”‚ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚    ä¿ƒé€²     â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ã‚¤ãƒ¤ãƒ¼                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Frontend                 Edge Functions              Database
        â”‚                          â”‚                        â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚JWT Tokenâ”‚              â”‚CORSè¨­å®š   â”‚           â”‚    RLS    â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚ãƒãƒªã‚·ãƒ¼   â”‚
        â”‚                          â”‚                 â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ èªè¨¼ãƒã‚§ãƒƒã‚¯ â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                           â”‚ å…¥åŠ›æ¤œè¨¼    â”‚
                           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                           â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚Stripe API Keyâ”‚           â”‚Webhook Secretâ”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            
ç’°å¢ƒå¤‰æ•°ç®¡ç†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VITE_SUPABASE_URL      : Supabase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆURL             â”‚
â”‚ VITE_SUPABASE_ANON_KEY : Supabase å…¬é–‹ç”¨åŒ¿åã‚­ãƒ¼             â”‚
â”‚ STRIPE_SECRET_KEY      : Stripe ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼              â”‚
â”‚ STRIPE_WEBHOOK_SECRET  : Webhook ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš¨ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ•ãƒ­ãƒ¼                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend ã‚¨ãƒ©ãƒ¼:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯  â”‚â”€â”€â”€â”€â–ºâ”‚ ãƒªãƒˆãƒ©ã‚¤å‡¦ç†  â”‚â”€â”€â”€â”€â–ºâ”‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯â”‚
â”‚   ã‚¨ãƒ©ãƒ¼     â”‚     â”‚  (3å›ã¾ã§)   â”‚     â”‚   è¡¨ç¤º       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   èªè¨¼       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ â”‚
â”‚  ã‚¨ãƒ©ãƒ¼      â”‚                           â”‚  ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ¤œè¨¼       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸â”‚
â”‚  ã‚¨ãƒ©ãƒ¼      â”‚                           â”‚     è¡¨ç¤º      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Backend ã‚¨ãƒ©ãƒ¼:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stripe API  â”‚â”€â”€â”€â”€â–ºâ”‚ ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°   â”‚â”€â”€â”€â”€â–ºâ”‚  ç®¡ç†è€…é€šçŸ¥  â”‚
â”‚   ã‚¨ãƒ©ãƒ¼     â”‚     â”‚    è¨˜éŒ²      â”‚     â”‚   (é‡å¤§æ™‚)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥  â”‚
                     â”‚ (ä¸€èˆ¬ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸)â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®Ÿè£…å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¡ Webhookå‡¦ç†ã®å†ªç­‰æ€§å®Ÿè£…                                              â”‚
â”‚   â””â”€ åŒã˜ã‚¤ãƒ™ãƒ³ãƒˆIDã®é‡è¤‡å‡¦ç†é˜²æ­¢                                      â”‚
â”‚                                                                         â”‚
â”‚ â–¡ æœˆæ¬¡ãƒªã‚»ãƒƒãƒˆå‡¦ç†                                                     â”‚
â”‚   â”œâ”€ check_and_reset_usageé–¢æ•°ã®å®Ÿè£…                                  â”‚
â”‚   â””â”€ JSTã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³è€ƒæ…®                                              â”‚
â”‚                                                                         â”‚
â”‚ â–¡ ãƒ—ãƒ©ãƒ³å¤‰æ›´æ™‚ã®æ—¥å‰²ã‚Šè¨ˆç®—                                            â”‚
â”‚   â””â”€ Stripeã®è‡ªå‹•æ—¥å‰²ã‚Šè¨­å®šç¢ºèª                                       â”‚
â”‚                                                                         â”‚
â”‚ â–¡ è§£ç´„æ™‚ã®æŒ™å‹•                                                        â”‚
â”‚   â”œâ”€ æœŸé–“çµ‚äº†ã¾ã§åˆ©ç”¨å¯èƒ½ã®å®Ÿè£…                                       â”‚
â”‚   â””â”€ è§£ç´„å–ã‚Šæ¶ˆã—å¯èƒ½æœŸé–“ã®è¨­å®š                                       â”‚
â”‚                                                                         â”‚
â”‚ â–¡ ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯                                            â”‚
â”‚   â”œâ”€ Stripeã‚¨ãƒ©ãƒ¼æ™‚ã®æ—¢å­˜ãƒ—ãƒ©ãƒ³ç¶­æŒ                                   â”‚
â”‚   â””â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é©åˆ‡ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯                                 â”‚
â”‚                                                                         â”‚
â”‚ â–¡ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–                                                    â”‚
â”‚   â”œâ”€ RLSãƒãƒªã‚·ãƒ¼ã®é©åˆ‡ãªè¨­å®š                                         â”‚
â”‚   â”œâ”€ Webhookç½²åã®æ¤œè¨¼                                               â”‚
â”‚   â””â”€ ç’°å¢ƒå¤‰æ•°ã®å®‰å…¨ãªç®¡ç†                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ç’°å¢ƒåˆ¥è¨­å®š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ç’°å¢ƒ    â”‚     Stripe     â”‚    Supabase      â”‚        URL         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   é–‹ç™º     â”‚  ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰  â”‚  é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ â”‚  localhost:5173    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°â”‚  ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰  â”‚  é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ â”‚  dev.ooya.tech     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æœ¬ç•ª     â”‚   æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰   â”‚  æœ¬ç•ªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ â”‚  ooya.tech         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ  ç‰©ä»¶ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ç‰©ä»¶ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç‰©ä»¶ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œãƒ—ãƒ­ã‚»ã‚¹                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ãƒ¦ãƒ¼ã‚¶ãƒ¼        Frontend          APIã‚µãƒ¼ãƒãƒ¼        Supabase         
       â”‚               â”‚                  â”‚                â”‚              
       â”‚ 1.ç‰©ä»¶æƒ…å ±å…¥åŠ›â”‚                  â”‚                â”‚              
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                â”‚              
       â”‚               â”‚                  â”‚                â”‚              
       â”‚               â”‚ 2.å…¥åŠ›æ¤œè¨¼       â”‚                â”‚              
       â”‚               â”œâ”€â”€â”€â”€â”€â”            â”‚                â”‚              
       â”‚               â”‚     â”‚            â”‚                â”‚              
       â”‚               â”‚â—„â”€â”€â”€â”€â”˜            â”‚                â”‚              
       â”‚               â”‚                  â”‚                â”‚              
       â”‚ 3.è¨ˆç®—å®Ÿè¡Œ   â”‚                  â”‚                â”‚              
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                â”‚              
       â”‚               â”‚ 4.APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ  â”‚                â”‚              
       â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚              
       â”‚               â”‚                  â”‚                â”‚              
       â”‚               â”‚                  â”‚ 5.è¨ˆç®—å‡¦ç†    â”‚              
       â”‚               â”‚                  â”œâ”€â”€â”€â”€â”€â”          â”‚              
       â”‚               â”‚                  â”‚     â”‚          â”‚              
       â”‚               â”‚                  â”‚ ãƒ»è¡¨é¢åˆ©å›ã‚Š  â”‚              
       â”‚               â”‚                  â”‚ ãƒ»å®Ÿè³ªåˆ©å›ã‚Š  â”‚              
       â”‚               â”‚                  â”‚ ãƒ»CFè¨ˆç®—     â”‚              
       â”‚               â”‚                  â”‚ ãƒ»ROIç®—å‡º    â”‚              
       â”‚               â”‚                  â”‚â—„â”€â”€â”€â”€â”˜          â”‚              
       â”‚               â”‚                  â”‚                â”‚              
       â”‚               â”‚ 6.è¨ˆç®—çµæœ       â”‚                â”‚              
       â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚              
       â”‚               â”‚                  â”‚                â”‚              
       â”‚ 7.çµæœè¡¨ç¤º    â”‚                  â”‚                â”‚              
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                â”‚              
       â”‚               â”‚                  â”‚                â”‚              
       â”‚ 8.ä¿å­˜ãƒœã‚¿ãƒ³  â”‚                  â”‚                â”‚              
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                â”‚              
       â”‚               â”‚ 9.ä¿å­˜ãƒªã‚¯ã‚¨ã‚¹ãƒˆ â”‚                â”‚              
       â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              
       â”‚               â”‚                  â”‚                â”‚              
       â”‚               â”‚                  â”‚        10.DBã«ä¿å­˜           
       â”‚               â”‚                  â”‚           â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        
       â”‚               â”‚                  â”‚           â”‚propertiesâ”‚        
       â”‚               â”‚                  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        
       â”‚               â”‚                  â”‚           â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        
       â”‚               â”‚                  â”‚           â”‚simulations       
       â”‚               â”‚                  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        
       â”‚               â”‚                  â”‚                â”‚              
       â”‚               â”‚ 11.ä¿å­˜å®Œäº†      â”‚                â”‚              
       â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              
       â”‚               â”‚                  â”‚                â”‚              
       â”‚ 12.å®Œäº†é€šçŸ¥   â”‚                  â”‚                â”‚              
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                â”‚              
       â”‚               â”‚                  â”‚                â”‚              
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é–¢é€£ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿æ§‹é€                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     users        â”‚          â”‚    properties        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ id (PK)              â”‚
â”‚ email            â”‚    1:N   â”‚ user_id (FK)         â”‚
â”‚ created_at       â”‚          â”‚ name                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ price                â”‚
                              â”‚ address              â”‚
                              â”‚ building_age         â”‚
                              â”‚ structure            â”‚
                              â”‚ land_area            â”‚
                              â”‚ building_area        â”‚
                              â”‚ created_at           â”‚
                              â”‚ updated_at           â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚ 1:N
                                        â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   simulations        â”‚
                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                              â”‚ id (PK)              â”‚
                              â”‚ property_id (FK)     â”‚
                              â”‚ purchase_price       â”‚
                              â”‚ annual_income        â”‚
                              â”‚ expenses             â”‚
                              â”‚ loan_amount          â”‚
                              â”‚ interest_rate        â”‚
                              â”‚ loan_term            â”‚
                              â”‚ surface_yield        â”‚
                              â”‚ real_yield           â”‚
                              â”‚ cash_flow            â”‚
                              â”‚ roi                  â”‚
                              â”‚ simulation_date      â”‚
                              â”‚ created_at           â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒã‚¤ãƒšãƒ¼ã‚¸è¡¨ç¤ºãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ãƒã‚¤ãƒšãƒ¼ã‚¸ï¼ˆDashboardï¼‰è¡¨ç¤º                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ãƒ¦ãƒ¼ã‚¶ãƒ¼          Frontend            Supabase           è¡¨ç¤ºå†…å®¹
     â”‚                 â”‚                   â”‚                   
     â”‚ 1.ãƒ­ã‚°ã‚¤ãƒ³      â”‚                   â”‚                   
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚                   
     â”‚                 â”‚ 2.èªè¨¼ç¢ºèª        â”‚                   
     â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   
     â”‚                 â”‚                   â”‚                   
     â”‚                 â”‚ 3.ãƒ¦ãƒ¼ã‚¶ãƒ¼IDè¿”å´  â”‚                   
     â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   
     â”‚                 â”‚                   â”‚                   
     â”‚ 4.ãƒã‚¤ãƒšãƒ¼ã‚¸    â”‚                   â”‚                   
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚                   
     â”‚                 â”‚                   â”‚                   
     â”‚                 â”‚ 5.ãƒ‡ãƒ¼ã‚¿å–å¾—è¦æ±‚  â”‚                   
     â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   
     â”‚                 â”‚                   â”‚                   
     â”‚                 â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”            
     â”‚                 â”‚            â”‚   RLSãƒã‚§ãƒƒã‚¯â”‚            
     â”‚                 â”‚            â”‚  (user_id)  â”‚            
     â”‚                 â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            
     â”‚                 â”‚                   â”‚                   
     â”‚                 â”‚      6.ç‰©ä»¶ä¸€è¦§å–å¾—â”‚                   
     â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   
     â”‚                 â”‚                   â”‚                   
     â”‚                 â”œâ”€â”€â”€â”€â”€â”             â”‚                   
     â”‚                 â”‚     â”‚ 7.è¡¨ç¤ºæº–å‚™  â”‚                   
     â”‚                 â”‚â—„â”€â”€â”€â”€â”˜             â”‚                   
     â”‚                 â”‚                   â”‚                   
     â”‚ 8.ç‰©ä»¶ä¸€è¦§è¡¨ç¤º  â”‚                   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚     â”‚ ç‰©ä»¶ã‚«ãƒ¼ãƒ‰è¡¨ç¤º  â”‚
     â”‚                 â”‚                   â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                 â”‚                   â”‚     â”‚ ãƒ»ç‰©ä»¶å        â”‚
     â”‚                 â”‚                   â”‚     â”‚ ãƒ»ä½æ‰€          â”‚
     â”‚                 â”‚                   â”‚     â”‚ ãƒ»ä¾¡æ ¼          â”‚
     â”‚                 â”‚                   â”‚     â”‚ ãƒ»åˆ©å›ã‚Š        â”‚
     â”‚                 â”‚                   â”‚     â”‚ [è©³ç´°][ç·¨é›†][å‰Šé™¤]
     â”‚                 â”‚                   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç‰©ä»¶è©³ç´°è¡¨ç¤ºãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç‰©ä»¶æ“ä½œãƒ•ãƒ­ãƒ¼                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€è©³ç´°è¡¨ç¤ºã€‘
  ãƒ¦ãƒ¼ã‚¶ãƒ¼     Frontend      Supabase
     â”‚            â”‚             â”‚
     â”‚ è©³ç´°ãƒœã‚¿ãƒ³ â”‚             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
     â”‚            â”‚ propertyå–å¾—â”‚
     â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚            â”‚             â”‚
     â”‚            â”‚ simulation  â”‚
     â”‚            â”‚    å–å¾—     â”‚
     â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚            â”‚             â”‚
     â”‚  è©³ç´°ç”»é¢  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
                  â”‚             â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚    è©³ç´°è¡¨ç¤ºå†…å®¹          â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚ â– åŸºæœ¬æƒ…å ±               â”‚
     â”‚  ç‰©ä»¶åã€ä½æ‰€ã€ä¾¡æ ¼      â”‚
     â”‚ â– å»ºç‰©æƒ…å ±               â”‚
     â”‚  ç¯‰å¹´æ•°ã€æ§‹é€ ã€é¢ç©      â”‚
     â”‚ â– ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœ   â”‚
     â”‚  è¡¨é¢åˆ©å›ã‚Š: XX%        â”‚
     â”‚  å®Ÿè³ªåˆ©å›ã‚Š: XX%        â”‚
     â”‚  æœˆé–“CF: Â¥XXX,XXX      â”‚
     â”‚  ROI: XX%              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€ç·¨é›†ãƒ•ãƒ­ãƒ¼ã€‘
  ãƒ¦ãƒ¼ã‚¶ãƒ¼     Frontend      Supabase
     â”‚            â”‚             â”‚
     â”‚ ç·¨é›†ãƒœã‚¿ãƒ³ â”‚             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
     â”‚            â”‚             â”‚
     â”‚ ç·¨é›†ç”»é¢   â”‚             â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
     â”‚            â”‚             â”‚
     â”‚ å†…å®¹å¤‰æ›´   â”‚             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
     â”‚            â”‚             â”‚
     â”‚ ä¿å­˜ãƒœã‚¿ãƒ³ â”‚             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
     â”‚            â”‚ æ›´æ–°ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
     â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚            â”‚             â”‚
     â”‚            â”‚        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
     â”‚            â”‚        â”‚  UPDATE  â”‚
     â”‚            â”‚        â”‚propertiesâ”‚
     â”‚            â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚            â”‚             â”‚
     â”‚            â”‚ æ›´æ–°å®Œäº†    â”‚
     â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚ å®Œäº†é€šçŸ¥   â”‚             â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚

ã€å‰Šé™¤ãƒ•ãƒ­ãƒ¼ã€‘
  ãƒ¦ãƒ¼ã‚¶ãƒ¼     Frontend      Supabase
     â”‚            â”‚             â”‚
     â”‚ å‰Šé™¤ãƒœã‚¿ãƒ³ â”‚             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
     â”‚            â”‚             â”‚
     â”‚ ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°          â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
     â”‚ â”‚ æœ¬å½“ã«å‰Šé™¤ï¼Ÿ    â”‚     â”‚
     â”‚ â”‚ [ã¯ã„] [ã„ã„ãˆ] â”‚     â”‚
     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
     â”‚            â”‚             â”‚
     â”‚ ã¯ã„é¸æŠ   â”‚             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
     â”‚            â”‚ å‰Šé™¤ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
     â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚            â”‚             â”‚
     â”‚            â”‚        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
     â”‚            â”‚        â”‚  DELETE  â”‚
     â”‚            â”‚        â”‚simulations
     â”‚            â”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚            â”‚             â”‚
     â”‚            â”‚        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
     â”‚            â”‚        â”‚  DELETE  â”‚
     â”‚            â”‚        â”‚propertiesâ”‚
     â”‚            â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚            â”‚             â”‚
     â”‚            â”‚ å‰Šé™¤å®Œäº†    â”‚
     â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚ ãƒªã‚¹ãƒˆæ›´æ–° â”‚             â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
```

### ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å†å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å†å®Ÿè¡Œ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ãƒ¦ãƒ¼ã‚¶ãƒ¼        Frontend         APIã‚µãƒ¼ãƒãƒ¼        Supabase
     â”‚               â”‚                 â”‚                â”‚
     â”‚ 1.ç‰©ä»¶è©³ç´°é–‹ãâ”‚                 â”‚                â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚                â”‚
     â”‚               â”‚                 â”‚                â”‚
     â”‚               â”‚ 2.æ—¢å­˜ãƒ‡ãƒ¼ã‚¿å–å¾— â”‚                â”‚
     â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚               â”‚                 â”‚                â”‚
     â”‚               â”‚                 â”‚         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
     â”‚               â”‚                 â”‚         â”‚ properties  â”‚
     â”‚               â”‚                 â”‚         â”‚ simulations â”‚
     â”‚               â”‚                 â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚                 â”‚                â”‚
     â”‚ 3.ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚   å¤‰æ›´ç”»é¢    â”‚                 â”‚                â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚                â”‚
     â”‚               â”‚                 â”‚                â”‚
     â”‚ 4.å€¤ã‚’å¤‰æ›´    â”‚                 â”‚                â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚                â”‚
     â”‚ (é‡‘åˆ©,æœŸé–“ç­‰) â”‚                 â”‚                â”‚
     â”‚               â”‚                 â”‚                â”‚
     â”‚ 5.å†è¨ˆç®—ãƒœã‚¿ãƒ³â”‚                 â”‚                â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚                â”‚
     â”‚               â”‚ 6.å†è¨ˆç®—ãƒªã‚¯ã‚¨ã‚¹ãƒˆ               â”‚
     â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚
     â”‚               â”‚                 â”‚                â”‚
     â”‚               â”‚                 â”‚ 7.æ–°è¦è¨ˆç®—     â”‚
     â”‚               â”‚                 â”œâ”€â”€â”€â”€â”€â”          â”‚
     â”‚               â”‚                 â”‚     â”‚          â”‚
     â”‚               â”‚                 â”‚â—„â”€â”€â”€â”€â”˜          â”‚
     â”‚               â”‚                 â”‚                â”‚
     â”‚               â”‚ 8.æ–°çµæœ       â”‚                â”‚
     â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
     â”‚               â”‚                 â”‚                â”‚
     â”‚ 9.æ¯”è¼ƒè¡¨ç¤º    â”‚                 â”‚                â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚                â”‚
     â”‚               â”‚                 â”‚                â”‚
     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                â”‚
     â”‚  â”‚   ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ¯”è¼ƒ  â”‚    â”‚                â”‚
     â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚                â”‚
     â”‚  â”‚        å‰å›    ä»Šå›     â”‚    â”‚                â”‚
     â”‚  â”‚ åˆ©å›ã‚Š  8%     9.5%    â”‚    â”‚                â”‚
     â”‚  â”‚ CF    +5ä¸‡    +8ä¸‡     â”‚    â”‚                â”‚
     â”‚  â”‚ ROI    12%     15%     â”‚    â”‚                â”‚
     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                â”‚
     â”‚               â”‚                 â”‚                â”‚
     â”‚ 10.ä¿å­˜ã™ã‚‹ï¼Ÿ â”‚                 â”‚                â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚                â”‚
     â”‚               â”‚ 11.æ–°è¦ä¿å­˜     â”‚                â”‚
     â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚               â”‚                 â”‚         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
     â”‚               â”‚                 â”‚         â”‚  INSERT     â”‚
     â”‚               â”‚                 â”‚         â”‚ simulations â”‚
     â”‚               â”‚                 â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼è©³ç´°è¨ˆç®—ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿                    è¨ˆç®—ãƒ—ãƒ­ã‚»ã‚¹                     å‡ºåŠ›çµæœ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€
                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â–¼
â”‚ ç‰©ä»¶ä¾¡æ ¼      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â¥10,000,000   â”‚           â”‚   å¹´é–“å®¶è³ƒåå…¥è¨ˆç®—   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  è³ƒæ–™ Ã— 12ãƒ¶æœˆ      â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚ æœˆé¡è³ƒæ–™      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º          â–¼
â”‚ Â¥100,000      â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    çµŒè²»è¨ˆç®—         â”‚      â”‚ è¡¨é¢åˆ©å›ã‚Š   â”‚
                            â”‚ ãƒ»ç®¡ç†è²»            â”‚â”€â”€â”€â”€â”€â–ºâ”‚    12.0%     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ ãƒ»ä¿®ç¹•ç©ç«‹é‡‘        â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ ç®¡ç†è²»ç­‰      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ ãƒ»å›ºå®šè³‡ç”£ç¨        â”‚
â”‚ Â¥20,000/æœˆ    â”‚           â”‚ ãƒ»ãã®ä»–çµŒè²»        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â–¼
â”‚ ãƒ­ãƒ¼ãƒ³æ¡ä»¶    â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ»å€Ÿå…¥é¡      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   ãƒ­ãƒ¼ãƒ³è¿”æ¸ˆè¨ˆç®—    â”‚      â”‚ å®Ÿè³ªåˆ©å›ã‚Š   â”‚
â”‚ ãƒ»é‡‘åˆ©        â”‚           â”‚  å…ƒåˆ©å‡ç­‰è¿”æ¸ˆ       â”‚â”€â”€â”€â”€â”€â–ºâ”‚    8.5%      â”‚
â”‚ ãƒ»æœŸé–“        â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
                                       â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  æœˆé–“CFè¨ˆç®—         â”‚      â”‚ æœˆé–“CF       â”‚
                            â”‚  åå…¥ - çµŒè²» - è¿”æ¸ˆ  â”‚â”€â”€â”€â”€â”€â–ºâ”‚  Â¥15,000     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚    ROIè¨ˆç®—          â”‚      â”‚ ROI          â”‚
                            â”‚  å¹´é–“CF Ã· è‡ªå·±è³‡é‡‘  â”‚â”€â”€â”€â”€â”€â–ºâ”‚    18%       â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç³»ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼å‡¦ç†                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€å…¥åŠ›ã‚¨ãƒ©ãƒ¼ã€‘
  ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ› â”€â”€â–º æ¤œè¨¼
                    â”‚
                    â”œâ”€ æ•°å€¤ä»¥å¤– â”€â”€â–º "æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
                    â”œâ”€ è² ã®å€¤ â”€â”€â”€â”€â–º "æ­£ã®å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
                    â”œâ”€ ç¯„å›²å¤– â”€â”€â”€â”€â–º "1ï½100ã®é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„"
                    â””â”€ å¿…é ˆé …ç›® â”€â”€â–º "ã“ã®é …ç›®ã¯å¿…é ˆã§ã™"

ã€è¨ˆç®—ã‚¨ãƒ©ãƒ¼ã€‘
  APIå‘¼ã³å‡ºã— â”€â”€â–º ã‚¨ãƒ©ãƒ¼
                   â”‚
                   â”œâ”€ ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ â”€â”€â–º ãƒªãƒˆãƒ©ã‚¤(3å›) â”€â”€â–º "ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œ"
                   â”œâ”€ 500ã‚¨ãƒ©ãƒ¼ â”€â”€â”€â”€â–º "ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ã€‚ç®¡ç†è€…ã«é€£çµ¡"
                   â””â”€ è¨ˆç®—ä¸èƒ½ â”€â”€â”€â”€â”€â–º "å…¥åŠ›å€¤ã‚’ç¢ºèªã—ã¦ãã ã•ã„"

ã€ä¿å­˜ã‚¨ãƒ©ãƒ¼ã€‘
  DBä¿å­˜ â”€â”€â–º ã‚¨ãƒ©ãƒ¼
             â”‚
             â”œâ”€ å®¹é‡è¶…é â”€â”€â–º "ãƒ—ãƒ©ãƒ³ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸ"
             â”œâ”€ èªè¨¼åˆ‡ã‚Œ â”€â”€â–º ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸
             â””â”€ é€šä¿¡ã‚¨ãƒ©ãƒ¼ â”€â”€â–º ãƒªãƒˆãƒ©ã‚¤ â”€â”€â–º "ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ"

ã€å‰Šé™¤ã‚¨ãƒ©ãƒ¼ã€‘
  å‰Šé™¤å‡¦ç† â”€â”€â–º ã‚¨ãƒ©ãƒ¼
               â”‚
               â”œâ”€ æ¨©é™ãªã— â”€â”€â–º "ã“ã®ç‰©ä»¶ã¯å‰Šé™¤ã§ãã¾ã›ã‚“"
               â”œâ”€ ä¾å­˜é–¢ä¿‚ â”€â”€â–º "é–¢é€£ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ãŸã‚å‰Šé™¤ã§ãã¾ã›ã‚“"
               â””â”€ é€šä¿¡ã‚¨ãƒ©ãƒ¼ â”€â”€â–º "å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚å†è©¦è¡Œã—ã¦ãã ã•ã„"
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å…¨ä½“åƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å…¨ä½“åƒ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     å…¥åŠ›              å‡¦ç†              ä¿å­˜              è¡¨ç¤º
      â”‚                â”‚                 â”‚                 â”‚
  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
  â”‚ãƒ¦ãƒ¼ã‚¶ãƒ¼â”‚      â”‚Frontend â”‚      â”‚Supabase â”‚      â”‚Dashboardâ”‚
  â”‚  å…¥åŠ›  â”‚â”€â”€â”€â”€â”€â–ºâ”‚  æ¤œè¨¼   â”‚â”€â”€â”€â”€â”€â–ºâ”‚   DB    â”‚â”€â”€â”€â”€â”€â–ºâ”‚  ä¸€è¦§   â”‚
  â””â”€â”€â”€â”¬â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚                â”‚                 â”‚                 â”‚
      â”‚           â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”           â”‚            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
      â”‚           â”‚   API   â”‚           â”‚            â”‚  è©³ç´°   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  è¨ˆç®—   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚  ç”»é¢   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                                   â”‚  RLS    â”‚
                                   â”‚ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

ä½œæˆè€…: Claude Code  
ä½œæˆæ—¥: 2025-08-15  
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: ASCIIå›³ç‰ˆ v1.1ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½è¿½åŠ ï¼‰